{"version":3,"file":"ol-wfst.js","sources":["../node_modules/modal-vanilla/lib/modal.js","../src/modules/errors.ts","../src/modules/i18n/es.ts","../src/modules/i18n/en.ts","../src/modules/i18n/zh.ts","../src/modules/i18n/index.ts","../src/modules/loading.ts","../node_modules/ts-mixer/dist/esm/index.js","../src/@enums.ts","../src/modules/state.ts","../src/modules/base/BaseLayer.ts","../src/modules/base/WfsSource.ts","../src/WfsLayer.ts","../node_modules/ol/TileState.js","../src/modules/base/WmsSource.ts","../src/WmsLayer.ts","../node_modules/ol/events/Event.js","../node_modules/ol/ObjectEventType.js","../node_modules/ol/Disposable.js","../node_modules/ol/functions.js","../node_modules/ol/obj.js","../node_modules/ol/events/Target.js","../node_modules/ol/events/EventType.js","../node_modules/ol/events.js","../node_modules/ol/Observable.js","../node_modules/ol/util.js","../node_modules/ol/Object.js","../node_modules/ol/extent.js","../node_modules/ol/dom.js","../node_modules/ol/css.js","../node_modules/ol/MapEventType.js","../node_modules/ol/Overlay.js","../src/myPragma.ts","../src/assets/images/upload.svg","../src/assets/images/draw.svg","../src/assets/images/visibilityOn.svg","../src/assets/images/visibilityOff.svg","../src/modules/LayersControl.tsx","../src/modules/editLayer.ts","../src/modules/Uploads.ts","../src/modules/helpers.ts","../src/defaults.ts","../src/modules/EditControlChanges.tsx","../src/modules/styleFunction.ts","../src/modules/EditFieldsModal.ts","../src/Geoserver.ts","../src/assets/images/editFields.svg","../src/assets/images/editGeom.svg","../src/modules/EditOverlay.tsx","../src/ol-wfst.ts","../src/index-umd.js"],"sourcesContent":["/**\n * Vanilla JS Modal compatible with Bootstrap\n * modal-vanilla 0.12.0 <https://github.com/KaneCohen/modal-vanilla>\n * Copyright 2020 Kane Cohen <https://github.com/KaneCohen>\n * Available under BSD-3-Clause license\n */\nimport EventEmitter from 'events';\n\nlet _factory = null;\n\nconst _defaults = Object.freeze({\n  el: null,               // Existing DOM element that will be 'Modal-ized'.\n  animate: true,          // Show Modal using animation.\n  animateClass: 'fade',   //\n  animateInClass: 'show', //\n  appendTo: 'body',       // DOM element to which constructed Modal will be appended.\n  backdrop: true,         // Boolean or 'static', Show Modal backdrop blocking content.\n  keyboard: true,         // Close modal on esc key.\n  title: false,           // Content of the title in the constructed dialog.\n  header: true,           // Show header content.\n  content: false,         // Either string or an HTML element.\n  footer: true,           // Footer content. By default will use buttons.\n  buttons: null,          //\n  headerClose: true,      // Show close button in the header.\n  construct: false,       // Creates new HTML with a given content.\n  transition: 300,        //\n  backdropTransition: 150 //\n});\n\nconst _buttons = deepFreeze({\n  dialog: [\n    {text: 'Cancel',\n      value: false,\n      attr: {\n        'class': 'btn btn-default',\n        'data-dismiss': 'modal'\n      }\n    },\n    {text: 'OK',\n      value: true,\n      attr: {\n        'class': 'btn btn-primary',\n        'data-dismiss': 'modal'\n      }\n    }\n  ],\n  alert: [\n    {text: 'OK',\n      attr: {\n        'class': 'btn btn-primary',\n        'data-dismiss': 'modal'\n      }\n    }\n  ],\n  confirm: [\n    {text: 'Cancel',\n      value: false,\n      attr: {\n        'class': 'btn btn-default',\n        'data-dismiss': 'modal'\n      }\n    },\n    {text: 'OK',\n      value: true,\n      attr: {\n        'class': 'btn btn-primary',\n        'data-dismiss': 'modal'\n      }\n    }\n  ]\n});\n\nconst _templates = {\n  container: '<div class=\"modal\"></div>',\n  dialog: '<div class=\"modal-dialog\"></div>',\n  content: '<div class=\"modal-content\"></div>',\n  header: '<div class=\"modal-header\"></div>',\n  headerClose: '<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">×</span></button>',\n  body: '<div class=\"modal-body\"></div>',\n  footer: '<div class=\"modal-footer\"></div>',\n  backdrop: '<div class=\"modal-backdrop\"></div>'\n};\n\nfunction deepFreeze(obj) {\n  for (let k in obj) {\n    if (Array.isArray(obj[k])) {\n      obj[k].forEach(v => {\n        deepFreeze(v);\n      });\n    } else if (obj[k] !== null && typeof obj[k] === 'object') {\n      Object.freeze(obj[k]);\n    }\n  }\n  return Object.freeze(obj);\n}\n\nfunction guid() {\n  return (((1 + Math.random()) * 0x10000) | 0).toString(16) +\n    (((1 + Math.random()) * 0x10000) | 0).toString(16);\n}\n\nfunction data(el, prop, value) {\n let prefix = 'data';\n let elData = el[prefix] || {};\n if (typeof value === 'undefined') {\n   if (el[prefix] && el[prefix][prop]) {\n     return el[prefix][prop];\n   } else {\n     var dataAttr = el.getAttribute(`${prefix}-${prop}`);\n     if (typeof dataAttr !== 'undefined') {\n       return dataAttr;\n     }\n     return null;\n   }\n } else {\n   elData[prop] = value;\n   el[prefix] = elData;\n   return el;\n }\n}\n\nfunction build(html, all) {\n  if (html.nodeName) return html;\n  html = html.replace(/(\\t|\\n$)/g, '');\n\n  if (!_factory) {\n    _factory = document.createElement('div');\n  }\n\n  _factory.innerHTML = '';\n  _factory.innerHTML = html;\n  if (all === true) {\n    return _factory.childNodes;\n  } else {\n    return _factory.childNodes[0];\n  }\n}\n\nfunction calcScrollbarWidth() {\n  let inner;\n  let width;\n  let outerWidth;\n  let outer = document.createElement('div');\n  Object.assign(outer.style, {\n    visibility: 'hidden',\n    width: '100px'\n  });\n  document.body.appendChild(outer);\n\n  outerWidth = outer.offsetWidth;\n  outer.style.overflow = 'scroll';\n\n  inner = document.createElement('div');\n  inner.style.width = '100%';\n  outer.appendChild(inner);\n\n  width = outerWidth - inner.offsetWidth;\n  document.body.removeChild(outer);\n\n  return width;\n}\n\nfunction getPath(node) {\n  let nodes = [node];\n  while (node.parentNode) {\n    node = node.parentNode;\n    nodes.push(node);\n  }\n  return nodes;\n}\n\nclass Modal extends EventEmitter {\n  static set templates(templates) {\n    this._baseTemplates = templates;\n  }\n\n  static get templates() {\n    return Object.assign({}, _templates, Modal._baseTemplates || {});\n  }\n\n  static set buttons(buttons) {\n    this._baseButtons = buttons;\n  }\n\n  static get buttons() {\n    return Object.assign({}, _buttons, Modal._baseButtons || {});\n  }\n\n  static set options(options) {\n    this._baseOptions = options;\n  }\n\n  static get options() {\n    return Object.assign({}, _defaults, Modal._baseOptions || {});\n  }\n\n  static get version() {\n    return '0.12.0';\n  }\n\n  static alert(message, _options = {}) {\n    let options = Object.assign({},\n      _defaults,\n      {\n        title:  message,\n        content: false,\n        construct: true,\n        headerClose: false,\n        buttons: Modal.buttons.alert\n      },\n      _options\n    );\n\n    return new Modal(options);\n  }\n\n  static confirm(question, _options = {}) {\n    let options = Object.assign({},\n      _defaults,\n      {\n        title:  question,\n        content: false,\n        construct: true,\n        headerClose: false,\n        buttons: Modal.buttons.confirm\n      },\n      _options\n    );\n\n    return new Modal(options);\n  }\n\n  constructor(options = {}) {\n    super();\n\n    this.id = guid();\n    this.el = null;\n    this._html = {};\n    this._events = {};\n    this._visible = false;\n    this._pointerInContent = false;\n    this._options = Object.assign({}, Modal.options, options);\n    this._templates = Object.assign({}, Modal.templates, options.templates || {});\n    this._html.appendTo = document.querySelector(this._options.appendTo);\n    this._scrollbarWidth = calcScrollbarWidth();\n\n    if (this._options.buttons === null) {\n      this._options.buttons = Modal.buttons.dialog;\n    }\n\n    if (this._options.el) {\n      let el = this._options.el;\n      if (typeof this._options.el == 'string') {\n        el = document.querySelector(this._options.el);\n        if (! el) {\n          throw new Error(`Selector: DOM Element ${this._options.el} not found.`);\n        }\n      }\n      data(el, 'modal', this);\n      this.el = el;\n    } else {\n      this._options.construct = true;\n    }\n\n    if (this._options.construct) {\n      this._render();\n    } else {\n      this._mapDom();\n    }\n  }\n\n  _render() {\n    let html = this._html;\n    let o = this._options;\n    let t = this._templates;\n    let animate = o.animate ? o.animateClass : false;\n\n    html.container = build(t.container);\n    html.dialog = build(t.dialog);\n    html.content = build(t.content);\n    html.header = build(t.header);\n    html.headerClose = build(t.headerClose);\n    html.body = build(t.body);\n    html.footer = build(t.footer);\n    if (animate) html.container.classList.add(animate);\n\n    this._setHeader();\n    this._setContent();\n    this._setFooter();\n\n    this.el = html.container;\n\n    html.dialog.appendChild(html.content);\n    html.container.appendChild(html.dialog);\n\n    return this;\n  }\n\n  _mapDom() {\n    let html = this._html;\n    let o = this._options;\n\n    if (this.el.classList.contains(o.animateClass)) {\n      o.animate = true;\n    }\n\n    html.container = this.el;\n    html.dialog = this.el.querySelector('.modal-dialog');\n    html.content = this.el.querySelector('.modal-content');\n    html.header = this.el.querySelector('.modal-header');\n    html.headerClose = this.el.querySelector('.modal-header .close');\n    html.body = this.el.querySelector('.modal-body');\n    html.footer = this.el.querySelector('.modal-footer');\n\n    this._setHeader();\n    this._setContent();\n    this._setFooter();\n\n    return this;\n  }\n\n  _setHeader() {\n    let html = this._html;\n    let o = this._options;\n\n    if (o.header && html.header) {\n      if (o.title.nodeName) {\n        html.header.innerHTML = o.title.outerHTML;\n      } else if (typeof o.title === 'string') {\n        html.header.innerHTML = `<h4 class=\"modal-title\">${o.title}</h4>`;\n      }\n      // Add header close button only to constructed modals.\n      if (this.el === null && html.headerClose && o.headerClose) {\n        html.header.appendChild(html.headerClose);\n      }\n      if (o.construct) {\n        html.content.appendChild(html.header);\n      }\n    }\n  }\n\n  _setContent() {\n    let html = this._html;\n    let o = this._options;\n\n    if (o.content && html.body) {\n      if (typeof o.content === 'string') {\n        html.body.innerHTML = o.content;\n      } else {\n        html.body.innerHTML = o.content.outerHTML;\n      }\n      if (o.construct) {\n        html.content.appendChild(html.body);\n      }\n    }\n  }\n\n  _setFooter() {\n    let html = this._html;\n    let o = this._options;\n\n    if (o.footer && html.footer) {\n      if (o.footer.nodeName) {\n        html.footer.ineerHTML = o.footer.outerHTML;\n      } else if (typeof o.footer === 'string') {\n        html.footer.innerHTML = o.footer;\n      } else if (! html.footer.children.length) {\n        o.buttons.forEach((button) => {\n          let el = document.createElement('button');\n          data(el, 'button', button);\n          el.innerHTML = button.text;\n          el.setAttribute('type', 'button');\n          for (let j in button.attr) {\n            el.setAttribute(j, button.attr[j]);\n          }\n          html.footer.appendChild(el);\n        });\n      }\n      if (o.construct) {\n        html.content.appendChild(html.footer);\n      }\n    }\n\n  }\n\n  _setEvents() {\n    let o = this._options;\n    let html = this._html;\n\n    this._events.keydownHandler = this._handleKeydownEvent.bind(this);\n    document.body.addEventListener('keydown',\n      this._events.keydownHandler\n    );\n\n    this._events.mousedownHandler = this._handleMousedownEvent.bind(this);\n    html.container.addEventListener('mousedown',\n      this._events.mousedownHandler\n    );\n\n    this._events.clickHandler = this._handleClickEvent.bind(this);\n    html.container.addEventListener('click',\n      this._events.clickHandler\n    );\n\n    this._events.resizeHandler = this._handleResizeEvent.bind(this);\n    window.addEventListener('resize',\n      this._events.resizeHandler\n    );\n  }\n\n  _handleMousedownEvent(e) {\n    this._pointerInContent = false;\n    let path = getPath(e.target);\n    path.every(node => {\n      if (node.classList && node.classList.contains('modal-content')) {\n        this._pointerInContent = true;\n        return false;\n      }\n      return true;\n    });\n  }\n\n  _handleClickEvent(e) {\n    let path = getPath(e.target);\n    path.every(node => {\n      if (node.tagName === 'HTML') {\n        return false;\n      }\n      if (this._options.backdrop !== true && node.classList.contains('modal')) {\n        return false;\n      }\n      if (node.classList.contains('modal-content')) {\n        return false;\n      }\n      if (node.getAttribute('data-dismiss') === 'modal') {\n        this.emit('dismiss', this, e, data(e.target, 'button'));\n        this.hide();\n        return false;\n      }\n\n      if (!this._pointerInContent && node.classList.contains('modal')) {\n        this.emit('dismiss', this, e, null);\n        this.hide();\n        return false;\n      }\n      return true;\n    });\n\n    this._pointerInContent = false;\n  }\n\n  _handleKeydownEvent(e) {\n    if (e.which === 27 && this._options.keyboard) {\n      this.emit('dismiss', this, e, null);\n      this.hide();\n    }\n  }\n\n  _handleResizeEvent(e) {\n    this._resize();\n  }\n\n  show() {\n    let o = this._options;\n    let html = this._html;\n    this.emit('show', this);\n\n    this._checkScrollbar();\n    this._setScrollbar();\n    document.body.classList.add('modal-open');\n\n    if (o.construct) {\n      html.appendTo.appendChild(html.container);\n    }\n\n    html.container.style.display = 'block';\n    html.container.scrollTop = 0;\n\n    if (o.backdrop !== false) {\n      this.once('showBackdrop', () => {\n        this._setEvents();\n\n        if (o.animate) html.container.offsetWidth; // Force reflow\n\n        html.container.classList.add(o.animateInClass);\n\n        setTimeout(() => {\n          this._visible = true;\n          this.emit('shown', this);\n        }, o.transition);\n      });\n      this._backdrop();\n    } else {\n      this._setEvents();\n\n      if (o.animate) html.container.offsetWidth; // Force reflow\n\n      html.container.classList.add(o.animateInClass);\n\n      setTimeout(() => {\n        this._visible = true;\n        this.emit('shown', this);\n      }, o.transition);\n    }\n    this._resize();\n\n    return this;\n  }\n\n  toggle() {\n    if (this._visible) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  }\n\n  _resize() {\n    var modalIsOverflowing =\n      this._html.container.scrollHeight > document.documentElement.clientHeight;\n\n    this._html.container.style.paddingLeft =\n      ! this.bodyIsOverflowing && modalIsOverflowing ? this._scrollbarWidth + 'px' : '';\n\n    this._html.container.style.paddingRight =\n      this.bodyIsOverflowing && ! modalIsOverflowing ? this._scrollbarWidth + 'px' : '';\n  }\n\n  _backdrop() {\n    let html = this._html;\n    let t = this._templates;\n    let o = this._options;\n    let animate = o.animate ? o.animateClass : false;\n\n    html.backdrop = build(t.backdrop);\n    if (animate) html.backdrop.classList.add(animate);\n    html.appendTo.appendChild(html.backdrop);\n\n    if (animate) html.backdrop.offsetWidth;\n\n    html.backdrop.classList.add(o.animateInClass);\n\n    setTimeout(() => {\n      this.emit('showBackdrop', this);\n    }, this._options.backdropTransition);\n  }\n\n  hide() {\n    let html = this._html;\n    let o = this._options;\n    let contCList = html.container.classList;\n    this.emit('hide', this);\n\n    contCList.remove(o.animateInClass);\n\n    if (o.backdrop) {\n      let backCList = html.backdrop.classList;\n      backCList.remove(o.animateInClass);\n    }\n\n    this._removeEvents();\n\n    setTimeout(() => {\n      document.body.classList.remove('modal-open');\n      document.body.style.paddingRight = this.originalBodyPad;\n    }, o.backdropTransition);\n\n    setTimeout(() => {\n      if (o.backdrop) {\n        html.backdrop.parentNode.removeChild(html.backdrop);\n      }\n      html.container.style.display = 'none';\n\n      if (o.construct) {\n        html.container.parentNode.removeChild(html.container);\n      }\n\n      this._visible = false;\n      this.emit('hidden', this);\n    }, o.transition);\n\n    return this;\n  }\n\n  _removeEvents() {\n    if (this._events.keydownHandler) {\n      document.body.removeEventListener('keydown',\n        this._events.keydownHandler\n      );\n    }\n\n    this._html.container.removeEventListener('mousedown',\n      this._events.mousedownHandler\n    );\n\n    this._html.container.removeEventListener('click',\n      this._events.clickHandler\n    );\n\n    window.removeEventListener('resize',\n      this._events.resizeHandler\n    );\n  }\n\n  _checkScrollbar() {\n    this.bodyIsOverflowing = document.body.clientWidth < window.innerWidth;\n  }\n\n  _setScrollbar() {\n    this.originalBodyPad = document.body.style.paddingRight || '';\n    if (this.bodyIsOverflowing) {\n      let basePadding = parseInt(this.originalBodyPad || 0, 10);\n      document.body.style.paddingRight = basePadding + this._scrollbarWidth + 'px';\n    }\n  }\n}\n\nexport default Modal;\n","// External\r\nimport Modal from 'modal-vanilla';\r\n\r\nimport { Options } from '../ol-wfst';\r\nimport { ExceptionGeoserver, IGeoserverDescribeFeatureType } from '../@types';\r\nlet options = {};\r\n\r\n// Store layerNames that has errors\r\nconst isError = new Set();\r\n\r\nexport const initModal = (opts: Options['modal']) => {\r\n    options = opts;\r\n};\r\n\r\nexport const parseError = (\r\n    geoserverResponse: IGeoserverDescribeFeatureType\r\n) => {\r\n    if ('exceptions' in geoserverResponse) {\r\n        return (geoserverResponse.exceptions as ExceptionGeoserver[])\r\n            .map((e) => e.text)\r\n            .join(',');\r\n    } else {\r\n        return '';\r\n    }\r\n};\r\n\r\n/**\r\n * Show modal with errors\r\n *\r\n * @param msg\r\n * @private\r\n */\r\nexport const showError = (\r\n    msg: string,\r\n    originalError: Error = null,\r\n    layerName = ''\r\n): void => {\r\n    // Prevent multiples modals error in the same layer\r\n    if (isError.has(layerName)) {\r\n        return;\r\n    }\r\n\r\n    isError.add(layerName);\r\n\r\n    let err_msg = `<b>Error: ${msg}</b>`;\r\n    if (originalError && originalError.message !== msg) {\r\n        err_msg += `. ${originalError.message}`;\r\n    }\r\n\r\n    const al = Modal.alert(err_msg, options);\r\n\r\n    al.show();\r\n\r\n    al.on('hidden', () => {\r\n        isError.delete(layerName);\r\n    });\r\n};\r\n","import { I18n } from '../../ol-wfst';\r\n\r\nexport const es: I18n = {\r\n    labels: {\r\n        select: 'Seleccionar',\r\n        addElement: 'Modo dibujo',\r\n        editElement: 'Editar elemento',\r\n        save: 'Guardar',\r\n        delete: 'Eliminar',\r\n        cancel: 'Cancelar',\r\n        apply: 'Aplicar cambios',\r\n        upload: 'Subir',\r\n        editMode: 'Modo Edición',\r\n        confirmDelete: '¿Estás seguro de borrar el elemento?',\r\n        geomTypeNotSupported: 'Geometría no compatible con la capa',\r\n        editFields: 'Editar campos',\r\n        editGeom: 'Editar geometría',\r\n        selectDrawType: 'Tipo de geometría para dibujar',\r\n        uploadToLayer: 'Subir archivo a la capa seleccionada',\r\n        uploadFeatures: 'Subida de elementos a la capa',\r\n        validFeatures: 'Válidas',\r\n        invalidFeatures: 'Invalidas',\r\n        loading: 'Cargando...',\r\n        toggleVisibility: 'Cambiar visibilidad de la capa',\r\n        close: 'Cerrar'\r\n    },\r\n    errors: {\r\n        capabilities: 'No se pudieron obtener las Capabilidades del GeoServer',\r\n        wfst: 'El GeoServer no tiene soporte a Transacciones',\r\n        layer: 'No se pudieron obtener datos de la capa',\r\n        layerNotFound: 'Capa no encontrada',\r\n        layerNotVisible: 'La capa no está visible',\r\n        noValidGeometry:\r\n            'No se encontraron geometrías válidas para agregar a esta capa',\r\n        geoserver: 'No se pudieron obtener datos desde el GeoServer',\r\n        badFormat: 'Formato no soportado',\r\n        badFile: 'Error al leer elementos del archivo',\r\n        lockFeature: 'No se pudieron bloquear elementos en el GeoServer',\r\n        transaction: 'Error al hacer transacción con el GeoServer',\r\n        getFeatures: 'Error al obtener elemento desde el GeoServer'\r\n    }\r\n};\r\n","import { I18n } from '../../ol-wfst';\r\n\r\nexport const en: I18n = {\r\n    labels: {\r\n        select: 'Select',\r\n        addElement: 'Toggle Draw mode',\r\n        editElement: 'Edit feature',\r\n        save: 'Save',\r\n        delete: 'Delete',\r\n        cancel: 'Cancel',\r\n        apply: 'Apply changes',\r\n        upload: 'Upload',\r\n        editMode: 'Edit Mode',\r\n        confirmDelete: 'Are you sure to delete the feature?',\r\n        geomTypeNotSupported: 'Geometry not supported by layer',\r\n        editFields: 'Edit fields',\r\n        editGeom: 'Edit geometry',\r\n        selectDrawType: 'Geometry type to draw',\r\n        uploadToLayer: 'Upload file to selected layer',\r\n        uploadFeatures: 'Uploaded features to layer',\r\n        validFeatures: 'Valid geometries',\r\n        invalidFeatures: 'Invalid',\r\n        loading: 'Loading...',\r\n        toggleVisibility: 'Toggle layer visibility',\r\n        close: 'Close'\r\n    },\r\n    errors: {\r\n        capabilities: 'GeoServer Capabilities could not be downloaded.',\r\n        wfst: 'The GeoServer does not support Transactions',\r\n        layer: 'Could not get data from layer',\r\n        layerNotFound: 'Layer not found',\r\n        layerNotVisible: 'Layer is not visible',\r\n        noValidGeometry: 'No valid geometries found to add to this layer',\r\n        geoserver: 'Failed to get data from GeoServer',\r\n        badFormat: 'Unsupported format',\r\n        badFile: 'Error reading items from file',\r\n        lockFeature: 'Could not lock items on the GeoServer',\r\n        transaction: 'Error when doing Transaction with GeoServer',\r\n        getFeatures: 'Error getting elements from GeoServer'\r\n    }\r\n};\r\n","import { I18n } from '../../ol-wfst';\r\n\r\nexport const zh: I18n = {\r\n    labels: {\r\n        select: '选择',\r\n        addElement: '切换绘图类型',\r\n        editElement: '编辑元素',\r\n        save: '保存',\r\n        delete: '删除',\r\n        cancel: '取消',\r\n        apply: '确认并应用改变',\r\n        upload: '上传',\r\n        editMode: '编辑模式',\r\n        confirmDelete: '确认删除元素?',\r\n        geomTypeNotSupported: '图层不支持该几何',\r\n        editFields: '编辑区域',\r\n        editGeom: '编辑几何',\r\n        selectDrawType: '几何类型',\r\n        uploadToLayer: '通过文件上传图层',\r\n        uploadFeatures: '上传元素到图层',\r\n        validFeatures: '合法的几何类型',\r\n        invalidFeatures: '不合法',\r\n        loading: '加载中...',\r\n        toggleVisibility: '切换图层透明度',\r\n        close: '关闭'\r\n    },\r\n    errors: {\r\n        capabilities: '无法加载GeoServer服务所支持的能力.',\r\n        wfst: 'GeoServer不支持事务',\r\n        layer: '无法从图层获得数据',\r\n        layerNotFound: 'Layer not found',\r\n        layerNotVisible: 'Layer is not visible',\r\n        noValidGeometry: '不支持的几何类型无法加载到图层',\r\n        geoserver: '无法从GeoServer获取数据',\r\n        badFormat: '不支持的格式',\r\n        badFile: '读取文件数据出错',\r\n        lockFeature: '无法锁定GeoServer上的元素.',\r\n        transaction: 'GeoServer处理事务出错.',\r\n        getFeatures: '从GeoServer获取元素出错.'\r\n    }\r\n};\r\n","import { I18n } from '../../@types';\r\nexport * from './es';\r\nexport * from './en';\r\nexport * from './zh';\r\n\r\nimport { es } from './es';\r\nimport { en } from './en';\r\nimport { zh } from './zh';\r\n\r\nconst langs = {\r\n    es,\r\n    en,\r\n    zh\r\n};\r\n\r\n// Set default Language\r\nexport let I18N: I18n = en;\r\n\r\nexport const setLang = (lang = 'en', customI18n: I18n = null): void => {\r\n    // Check if language exists\r\n    if (lang in langs) {\r\n        I18N = langs[lang];\r\n    }\r\n\r\n    // Check if customs translations are provided\r\n    if (customI18n) {\r\n        I18N = { ...I18N, ...customI18n };\r\n    }\r\n};\r\n\r\n/**\r\n * /**\r\n * For translations thas has a variable \"{}\"\" to be replaced inside\r\n * @param string\r\n * @param args\r\n * @returns\r\n */\r\nexport const I18N_ = (string: string, ...args: any): string => {\r\n    let text = I18N[string];\r\n\r\n    if (!text) {\r\n        console.error('Translation not found', string);\r\n        text = string;\r\n    }\r\n\r\n    if (args.length) {\r\n        args.forEach((arg) => {\r\n            text = text.replace(/{}/, arg);\r\n        });\r\n    }\r\n\r\n    return text;\r\n};\r\n","import { I18N } from './i18n';\r\n\r\nlet loadingDiv: HTMLDivElement;\r\n\r\nexport const initLoading = (): HTMLDivElement => {\r\n    loadingDiv = document.createElement('div');\r\n    loadingDiv.className = 'ol-wfst--tools-control--loading';\r\n    loadingDiv.innerHTML = I18N.labels.loading;\r\n    return loadingDiv;\r\n};\r\n\r\nexport const showLoading = (bool: boolean = true) => {\r\n    if (bool) {\r\n        loadingDiv.classList.add('ol-wfst--tools-control--loading-show');\r\n    } else {\r\n        loadingDiv.classList.remove('ol-wfst--tools-control--loading-show');\r\n    }\r\n};\r\n","/**\n * Utility function that works like `Object.apply`, but copies getters and setters properly as well.  Additionally gives\n * the option to exclude properties by name.\n */\nconst copyProps = (dest, src, exclude = []) => {\n    const props = Object.getOwnPropertyDescriptors(src);\n    for (let prop of exclude)\n        delete props[prop];\n    Object.defineProperties(dest, props);\n};\n/**\n * Returns the full chain of prototypes up until Object.prototype given a starting object.  The order of prototypes will\n * be closest to farthest in the chain.\n */\nconst protoChain = (obj, currentChain = [obj]) => {\n    const proto = Object.getPrototypeOf(obj);\n    if (proto === null)\n        return currentChain;\n    return protoChain(proto, [...currentChain, proto]);\n};\n/**\n * Identifies the nearest ancestor common to all the given objects in their prototype chains.  For most unrelated\n * objects, this function should return Object.prototype.\n */\nconst nearestCommonProto = (...objs) => {\n    if (objs.length === 0)\n        return undefined;\n    let commonProto = undefined;\n    const protoChains = objs.map(obj => protoChain(obj));\n    while (protoChains.every(protoChain => protoChain.length > 0)) {\n        const protos = protoChains.map(protoChain => protoChain.pop());\n        const potentialCommonProto = protos[0];\n        if (protos.every(proto => proto === potentialCommonProto))\n            commonProto = potentialCommonProto;\n        else\n            break;\n    }\n    return commonProto;\n};\n/**\n * Creates a new prototype object that is a mixture of the given prototypes.  The mixing is achieved by first\n * identifying the nearest common ancestor and using it as the prototype for a new object.  Then all properties/methods\n * downstream of this prototype (ONLY downstream) are copied into the new object.\n *\n * The resulting prototype is more performant than softMixProtos(...), as well as ES5 compatible.  However, it's not as\n * flexible as updates to the source prototypes aren't captured by the mixed result.  See softMixProtos for why you may\n * want to use that instead.\n */\nconst hardMixProtos = (ingredients, constructor, exclude = []) => {\n    var _a;\n    const base = (_a = nearestCommonProto(...ingredients)) !== null && _a !== void 0 ? _a : Object.prototype;\n    const mixedProto = Object.create(base);\n    // Keeps track of prototypes we've already visited to avoid copying the same properties multiple times.  We init the\n    // list with the proto chain below the nearest common ancestor because we don't want any of those methods mixed in\n    // when they will already be accessible via prototype access.\n    const visitedProtos = protoChain(base);\n    for (let prototype of ingredients) {\n        let protos = protoChain(prototype);\n        // Apply the prototype chain in reverse order so that old methods don't override newer ones.\n        for (let i = protos.length - 1; i >= 0; i--) {\n            let newProto = protos[i];\n            if (visitedProtos.indexOf(newProto) === -1) {\n                copyProps(mixedProto, newProto, ['constructor', ...exclude]);\n                visitedProtos.push(newProto);\n            }\n        }\n    }\n    mixedProto.constructor = constructor;\n    return mixedProto;\n};\nconst unique = (arr) => arr.filter((e, i) => arr.indexOf(e) == i);\n\n/**\n * Finds the ingredient with the given prop, searching in reverse order and breadth-first if searching ingredient\n * prototypes is required.\n */\nconst getIngredientWithProp = (prop, ingredients) => {\n    const protoChains = ingredients.map(ingredient => protoChain(ingredient));\n    // since we search breadth-first, we need to keep track of our depth in the prototype chains\n    let protoDepth = 0;\n    // not all prototype chains are the same depth, so this remains true as long as at least one of the ingredients'\n    // prototype chains has an object at this depth\n    let protosAreLeftToSearch = true;\n    while (protosAreLeftToSearch) {\n        // with the start of each horizontal slice, we assume this is the one that's deeper than any of the proto chains\n        protosAreLeftToSearch = false;\n        // scan through the ingredients right to left\n        for (let i = ingredients.length - 1; i >= 0; i--) {\n            const searchTarget = protoChains[i][protoDepth];\n            if (searchTarget !== undefined && searchTarget !== null) {\n                // if we find something, this is proof that this horizontal slice potentially more objects to search\n                protosAreLeftToSearch = true;\n                // eureka, we found it\n                if (Object.getOwnPropertyDescriptor(searchTarget, prop) != undefined) {\n                    return protoChains[i][0];\n                }\n            }\n        }\n        protoDepth++;\n    }\n    return undefined;\n};\n/**\n * \"Mixes\" ingredients by wrapping them in a Proxy.  The optional prototype argument allows the mixed object to sit\n * downstream of an existing prototype chain.  Note that \"properties\" cannot be added, deleted, or modified.\n */\nconst proxyMix = (ingredients, prototype = Object.prototype) => new Proxy({}, {\n    getPrototypeOf() {\n        return prototype;\n    },\n    setPrototypeOf() {\n        throw Error('Cannot set prototype of Proxies created by ts-mixer');\n    },\n    getOwnPropertyDescriptor(_, prop) {\n        return Object.getOwnPropertyDescriptor(getIngredientWithProp(prop, ingredients) || {}, prop);\n    },\n    defineProperty() {\n        throw new Error('Cannot define new properties on Proxies created by ts-mixer');\n    },\n    has(_, prop) {\n        return getIngredientWithProp(prop, ingredients) !== undefined || prototype[prop] !== undefined;\n    },\n    get(_, prop) {\n        return (getIngredientWithProp(prop, ingredients) || prototype)[prop];\n    },\n    set(_, prop, val) {\n        const ingredientWithProp = getIngredientWithProp(prop, ingredients);\n        if (ingredientWithProp === undefined)\n            throw new Error('Cannot set new properties on Proxies created by ts-mixer');\n        ingredientWithProp[prop] = val;\n        return true;\n    },\n    deleteProperty() {\n        throw new Error('Cannot delete properties on Proxies created by ts-mixer');\n    },\n    ownKeys() {\n        return ingredients\n            .map(Object.getOwnPropertyNames)\n            .reduce((prev, curr) => curr.concat(prev.filter(key => curr.indexOf(key) < 0)));\n    },\n});\n/**\n * Creates a new proxy-prototype object that is a \"soft\" mixture of the given prototypes.  The mixing is achieved by\n * proxying all property access to the ingredients.  This is not ES5 compatible and less performant.  However, any\n * changes made to the source prototypes will be reflected in the proxy-prototype, which may be desirable.\n */\nconst softMixProtos = (ingredients, constructor) => proxyMix([...ingredients, { constructor }]);\n\nconst settings = {\n    initFunction: null,\n    staticsStrategy: 'copy',\n    prototypeStrategy: 'copy',\n    decoratorInheritance: 'deep',\n};\n\n// Keeps track of constituent classes for every mixin class created by ts-mixer.\nconst mixins = new Map();\nconst getMixinsForClass = (clazz) => mixins.get(clazz);\nconst registerMixins = (mixedClass, constituents) => mixins.set(mixedClass, constituents);\nconst hasMixin = (instance, mixin) => {\n    if (instance instanceof mixin)\n        return true;\n    const constructor = instance.constructor;\n    const visited = new Set();\n    let frontier = new Set();\n    frontier.add(constructor);\n    while (frontier.size > 0) {\n        // check if the frontier has the mixin we're looking for.  if not, we can say we visited every item in the frontier\n        if (frontier.has(mixin))\n            return true;\n        frontier.forEach(item => visited.add(item));\n        // build a new frontier based on the associated mixin classes and prototype chains of each frontier item\n        const newFrontier = new Set();\n        frontier.forEach(item => {\n            var _a;\n            const itemConstituents = (_a = mixins.get(item)) !== null && _a !== void 0 ? _a : protoChain(item.prototype).map(proto => proto.constructor).filter(item => item !== null);\n            if (itemConstituents)\n                itemConstituents.forEach(constituent => {\n                    if (!visited.has(constituent) && !frontier.has(constituent))\n                        newFrontier.add(constituent);\n                });\n        });\n        // we have a new frontier, now search again\n        frontier = newFrontier;\n    }\n    // if we get here, we couldn't find the mixin anywhere in the prototype chain or associated mixin classes\n    return false;\n};\n\nconst mergeObjectsOfDecorators = (o1, o2) => {\n    var _a, _b;\n    const allKeys = unique([...Object.getOwnPropertyNames(o1), ...Object.getOwnPropertyNames(o2)]);\n    const mergedObject = {};\n    for (let key of allKeys)\n        mergedObject[key] = unique([...((_a = o1 === null || o1 === void 0 ? void 0 : o1[key]) !== null && _a !== void 0 ? _a : []), ...((_b = o2 === null || o2 === void 0 ? void 0 : o2[key]) !== null && _b !== void 0 ? _b : [])]);\n    return mergedObject;\n};\nconst mergePropertyAndMethodDecorators = (d1, d2) => {\n    var _a, _b, _c, _d;\n    return ({\n        property: mergeObjectsOfDecorators((_a = d1 === null || d1 === void 0 ? void 0 : d1.property) !== null && _a !== void 0 ? _a : {}, (_b = d2 === null || d2 === void 0 ? void 0 : d2.property) !== null && _b !== void 0 ? _b : {}),\n        method: mergeObjectsOfDecorators((_c = d1 === null || d1 === void 0 ? void 0 : d1.method) !== null && _c !== void 0 ? _c : {}, (_d = d2 === null || d2 === void 0 ? void 0 : d2.method) !== null && _d !== void 0 ? _d : {}),\n    });\n};\nconst mergeDecorators = (d1, d2) => {\n    var _a, _b, _c, _d, _e, _f;\n    return ({\n        class: unique([...(_a = d1 === null || d1 === void 0 ? void 0 : d1.class) !== null && _a !== void 0 ? _a : [], ...(_b = d2 === null || d2 === void 0 ? void 0 : d2.class) !== null && _b !== void 0 ? _b : []]),\n        static: mergePropertyAndMethodDecorators((_c = d1 === null || d1 === void 0 ? void 0 : d1.static) !== null && _c !== void 0 ? _c : {}, (_d = d2 === null || d2 === void 0 ? void 0 : d2.static) !== null && _d !== void 0 ? _d : {}),\n        instance: mergePropertyAndMethodDecorators((_e = d1 === null || d1 === void 0 ? void 0 : d1.instance) !== null && _e !== void 0 ? _e : {}, (_f = d2 === null || d2 === void 0 ? void 0 : d2.instance) !== null && _f !== void 0 ? _f : {}),\n    });\n};\nconst decorators = new Map();\nconst findAllConstituentClasses = (...classes) => {\n    var _a;\n    const allClasses = new Set();\n    const frontier = new Set([...classes]);\n    while (frontier.size > 0) {\n        for (let clazz of frontier) {\n            const protoChainClasses = protoChain(clazz.prototype).map(proto => proto.constructor);\n            const mixinClasses = (_a = getMixinsForClass(clazz)) !== null && _a !== void 0 ? _a : [];\n            const potentiallyNewClasses = [...protoChainClasses, ...mixinClasses];\n            const newClasses = potentiallyNewClasses.filter(c => !allClasses.has(c));\n            for (let newClass of newClasses)\n                frontier.add(newClass);\n            allClasses.add(clazz);\n            frontier.delete(clazz);\n        }\n    }\n    return [...allClasses];\n};\nconst deepDecoratorSearch = (...classes) => {\n    const decoratorsForClassChain = findAllConstituentClasses(...classes)\n        .map(clazz => decorators.get(clazz))\n        .filter(decorators => !!decorators);\n    if (decoratorsForClassChain.length == 0)\n        return {};\n    if (decoratorsForClassChain.length == 1)\n        return decoratorsForClassChain[0];\n    return decoratorsForClassChain.reduce((d1, d2) => mergeDecorators(d1, d2));\n};\nconst directDecoratorSearch = (...classes) => {\n    const classDecorators = classes.map(clazz => getDecoratorsForClass(clazz));\n    if (classDecorators.length === 0)\n        return {};\n    if (classDecorators.length === 1)\n        return classDecorators[0];\n    return classDecorators.reduce((d1, d2) => mergeDecorators(d1, d2));\n};\nconst getDecoratorsForClass = (clazz) => {\n    let decoratorsForClass = decorators.get(clazz);\n    if (!decoratorsForClass) {\n        decoratorsForClass = {};\n        decorators.set(clazz, decoratorsForClass);\n    }\n    return decoratorsForClass;\n};\nconst decorateClass = (decorator) => ((clazz) => {\n    const decoratorsForClass = getDecoratorsForClass(clazz);\n    let classDecorators = decoratorsForClass.class;\n    if (!classDecorators) {\n        classDecorators = [];\n        decoratorsForClass.class = classDecorators;\n    }\n    classDecorators.push(decorator);\n    return decorator(clazz);\n});\nconst decorateMember = (decorator) => ((object, key, ...otherArgs) => {\n    var _a, _b, _c;\n    const decoratorTargetType = typeof object === 'function' ? 'static' : 'instance';\n    const decoratorType = typeof object[key] === 'function' ? 'method' : 'property';\n    const clazz = decoratorTargetType === 'static' ? object : object.constructor;\n    const decoratorsForClass = getDecoratorsForClass(clazz);\n    const decoratorsForTargetType = (_a = decoratorsForClass === null || decoratorsForClass === void 0 ? void 0 : decoratorsForClass[decoratorTargetType]) !== null && _a !== void 0 ? _a : {};\n    decoratorsForClass[decoratorTargetType] = decoratorsForTargetType;\n    let decoratorsForType = (_b = decoratorsForTargetType === null || decoratorsForTargetType === void 0 ? void 0 : decoratorsForTargetType[decoratorType]) !== null && _b !== void 0 ? _b : {};\n    decoratorsForTargetType[decoratorType] = decoratorsForType;\n    let decoratorsForKey = (_c = decoratorsForType === null || decoratorsForType === void 0 ? void 0 : decoratorsForType[key]) !== null && _c !== void 0 ? _c : [];\n    decoratorsForType[key] = decoratorsForKey;\n    // @ts-ignore: array is type `A[] | B[]` and item is type `A | B`, so technically a type error, but it's fine\n    decoratorsForKey.push(decorator);\n    // @ts-ignore\n    return decorator(object, key, ...otherArgs);\n});\nconst decorate = (decorator) => ((...args) => {\n    if (args.length === 1)\n        return decorateClass(decorator)(args[0]);\n    return decorateMember(decorator)(...args);\n});\n\nfunction Mixin(...constructors) {\n    var _a, _b, _c;\n    const prototypes = constructors.map(constructor => constructor.prototype);\n    // Here we gather up the init functions of the ingredient prototypes, combine them into one init function, and\n    // attach it to the mixed class prototype.  The reason we do this is because we want the init functions to mix\n    // similarly to constructors -- not methods, which simply override each other.\n    const initFunctionName = settings.initFunction;\n    if (initFunctionName !== null) {\n        const initFunctions = prototypes\n            .map(proto => proto[initFunctionName])\n            .filter(func => typeof func === 'function');\n        const combinedInitFunction = function (...args) {\n            for (let initFunction of initFunctions)\n                initFunction.apply(this, args);\n        };\n        const extraProto = { [initFunctionName]: combinedInitFunction };\n        prototypes.push(extraProto);\n    }\n    function MixedClass(...args) {\n        for (const constructor of constructors)\n            // @ts-ignore: potentially abstract class\n            copyProps(this, new constructor(...args));\n        if (initFunctionName !== null && typeof this[initFunctionName] === 'function')\n            this[initFunctionName].apply(this, args);\n    }\n    MixedClass.prototype = settings.prototypeStrategy === 'copy'\n        ? hardMixProtos(prototypes, MixedClass)\n        : softMixProtos(prototypes, MixedClass);\n    Object.setPrototypeOf(MixedClass, settings.staticsStrategy === 'copy'\n        ? hardMixProtos(constructors, null, ['prototype'])\n        : proxyMix(constructors, Function.prototype));\n    let DecoratedMixedClass = MixedClass;\n    if (settings.decoratorInheritance !== 'none') {\n        const classDecorators = settings.decoratorInheritance === 'deep'\n            ? deepDecoratorSearch(...constructors)\n            : directDecoratorSearch(...constructors);\n        for (let decorator of (_a = classDecorators === null || classDecorators === void 0 ? void 0 : classDecorators.class) !== null && _a !== void 0 ? _a : []) {\n            const result = decorator(DecoratedMixedClass);\n            if (result) {\n                DecoratedMixedClass = result;\n            }\n        }\n        applyPropAndMethodDecorators((_b = classDecorators === null || classDecorators === void 0 ? void 0 : classDecorators.static) !== null && _b !== void 0 ? _b : {}, DecoratedMixedClass);\n        applyPropAndMethodDecorators((_c = classDecorators === null || classDecorators === void 0 ? void 0 : classDecorators.instance) !== null && _c !== void 0 ? _c : {}, DecoratedMixedClass.prototype);\n    }\n    registerMixins(DecoratedMixedClass, constructors);\n    return DecoratedMixedClass;\n}\nconst applyPropAndMethodDecorators = (propAndMethodDecorators, target) => {\n    const propDecorators = propAndMethodDecorators.property;\n    const methodDecorators = propAndMethodDecorators.method;\n    if (propDecorators)\n        for (let key in propDecorators)\n            for (let decorator of propDecorators[key])\n                decorator(target, key);\n    if (methodDecorators)\n        for (let key in methodDecorators)\n            for (let decorator of methodDecorators[key])\n                decorator(target, key, Object.getOwnPropertyDescriptor(target, key));\n};\n/**\n * A decorator version of the `Mixin` function.  You'll want to use this instead of `Mixin` for mixing generic classes.\n */\nconst mix = (...ingredients) => decoratedClass => {\n    // @ts-ignore\n    const mixedClass = Mixin(...ingredients.concat([decoratedClass]));\n    Object.defineProperty(mixedClass, 'name', {\n        value: decoratedClass.name,\n        writable: false,\n    });\n    return mixedClass;\n};\n\nexport { Mixin, decorate, hasMixin, mix, settings };\n","export enum GeometryType {\r\n    Point = 'Point',\r\n    LineString = 'LineString',\r\n    LinearRing = 'LinearRing',\r\n    Polygon = 'Polygon',\r\n    MultiPoint = 'MultiPoint',\r\n    MultiLineString = 'MultiLineString',\r\n    MultiPolygon = 'MultiPolygon',\r\n    GeometryCollection = 'GeometryCollection',\r\n    Circle = 'Circle'\r\n}\r\n\r\nexport enum TransactionType {\r\n    Insert = 'insert',\r\n    Delete = 'delete',\r\n    Update = 'update'\r\n}\r\n","import Map from 'ol/Map';\r\nimport { FeatureLike } from 'ol/Feature';\r\n\r\nimport WfsLayer from '../WfsLayer';\r\nimport WmsLayer from '../WmsLayer';\r\nimport { IWfstLayersList } from '../@types';\r\n\r\nlet map: Map;\r\nlet layerToInsertElements: WfsLayer | WmsLayer = null;\r\nlet mode = null;\r\n\r\nexport enum Modes {\r\n    Edit = 'EDIT',\r\n    Draw = 'DRAW'\r\n}\r\n\r\nexport function activateMode(m: Modes = null) {\r\n    mode = m;\r\n}\r\n\r\nexport function getMode() {\r\n    return mode;\r\n}\r\n\r\nconst editedFeatures: Set<string> = new Set();\r\nconst mapLayers: IWfstLayersList = {};\r\n\r\nexport function setMap(m: Map) {\r\n    map = m;\r\n}\r\n\r\nexport function getMap(): Map {\r\n    return map;\r\n}\r\n\r\nexport function setActiveLayerToInsertEls(layer: WmsLayer | WfsLayer) {\r\n    layerToInsertElements = layer;\r\n}\r\n\r\nexport function getActiveLayerToInsertEls(): WmsLayer | WfsLayer {\r\n    return layerToInsertElements;\r\n}\r\n\r\nexport function setMapLayers(data) {\r\n    Object.assign(mapLayers, data);\r\n}\r\n\r\nexport function getStoredMapLayers(): IWfstLayersList {\r\n    return mapLayers;\r\n}\r\n\r\nexport function getStoredLayer(layerName: string): WfsLayer | WmsLayer {\r\n    return getStoredMapLayers()[layerName];\r\n}\r\n\r\nexport function addFeatureToEditedList(feature: FeatureLike): void {\r\n    editedFeatures.add(String(feature.getId()));\r\n}\r\n\r\nexport function removeFeatureFromEditList(feature: FeatureLike): void {\r\n    editedFeatures.delete(String(feature.getId()));\r\n}\r\n\r\nexport function isFeatureEdited(feature: FeatureLike): boolean {\r\n    return editedFeatures.has(String(feature.getId()));\r\n}\r\n","import { Feature } from 'ol';\r\nimport { Geometry } from 'ol/geom';\r\nimport { TransactionResponse } from 'ol/format/WFS';\r\nimport Layer from 'ol/layer/Base';\r\n\r\nimport Geoserver from '../../Geoserver';\r\nimport { IGeoserverDescribeFeatureType } from '../../@types';\r\nimport { GeometryType, TransactionType } from '../../@enums';\r\nimport { I18N } from '../i18n';\r\nimport { getMap } from '../state';\r\nimport { showError } from '../errors';\r\nimport { parseError } from '../errors';\r\n\r\n/**\r\n * Base class from which all layer types are derived.\r\n */\r\nexport default class BaseLayer extends Layer {\r\n    /**\r\n     * @private\r\n     */\r\n    _init(): void {\r\n        const geoserver = this.getGeoserver() as Geoserver;\r\n\r\n        if (geoserver.isLoaded()) {\r\n            this.getAndUpdateDescribeFeatureType();\r\n        } else {\r\n            geoserver.on('change:capabilities', async () => {\r\n                this.getAndUpdateDescribeFeatureType();\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Request and store data layers obtained by DescribeFeatureType\r\n     *\r\n     * @public\r\n     */\r\n    async getAndUpdateDescribeFeatureType(): Promise<void> {\r\n        const layerName = this.get(BaseLayerProperty.NAME);\r\n        const layerLabel = this.get(BaseLayerProperty.LABEL);\r\n\r\n        try {\r\n            const geoserver = this.getGeoserver() as Geoserver;\r\n\r\n            const params = new URLSearchParams({\r\n                service: 'wfs',\r\n                version: geoserver.getAdvanced().describeFeatureTypeVersion,\r\n                request: 'DescribeFeatureType',\r\n                typeName: layerName,\r\n                outputFormat: 'application/json',\r\n                exceptions: 'application/json'\r\n            });\r\n\r\n            const url_fetch = geoserver.getUrl() + '?' + params.toString();\r\n\r\n            const response = await fetch(url_fetch, {\r\n                headers: geoserver.getHeaders(),\r\n                credentials: geoserver.getCredentials()\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error('');\r\n            }\r\n\r\n            const data: IGeoserverDescribeFeatureType = await response.json();\r\n\r\n            if (!data) {\r\n                throw new Error('');\r\n            }\r\n\r\n            if (data.exceptions) {\r\n                throw new Error(parseError(data));\r\n            }\r\n\r\n            const targetNamespace = data.targetNamespace;\r\n            const properties = data.featureTypes[0].properties;\r\n\r\n            // Find the geometry field\r\n            const geom = properties.find((el) => el.type.indexOf('gml:') >= 0);\r\n\r\n            data._parsed = {\r\n                namespace: targetNamespace,\r\n                properties: properties,\r\n                geomType: geom.localType as GeometryType,\r\n                geomField: geom.name\r\n            };\r\n\r\n            this.set(BaseLayerProperty.DESCRIBEFEATURETYPE, data);\r\n        } catch (err) {\r\n            console.error(err);\r\n            showError(`${I18N.errors.layer} \"${layerLabel}\"`, err, layerName);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @public\r\n     * @returns\r\n     */\r\n    isVisibleByZoom(): boolean {\r\n        return getMap().getView().getZoom() > this.getMinZoom();\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param mode\r\n     * @param features\r\n     * @public\r\n     */\r\n    async transactFeatures(\r\n        mode: TransactionType,\r\n        features: Array<Feature<Geometry>> | Feature<Geometry>\r\n    ): Promise<TransactionResponse | false> {\r\n        const geoserver = this.getGeoserver() as Geoserver;\r\n        return geoserver.transact(\r\n            mode,\r\n            features,\r\n            this.get(BaseLayerProperty.NAME)\r\n        );\r\n    }\r\n\r\n    async insertFeatures(\r\n        features: Array<Feature<Geometry>> | Feature<Geometry>\r\n    ): Promise<TransactionResponse | false> {\r\n        return this.transactFeatures(TransactionType.Insert, features);\r\n    }\r\n\r\n    /**\r\n     * @public\r\n     * @param featureId\r\n     * @returns\r\n     */\r\n    async maybeLockFeature(featureId: string | number): Promise<string> {\r\n        const geoserver = this.getGeoserver() as Geoserver;\r\n\r\n        if (geoserver.getUseLockFeature() && geoserver.hasLockFeature()) {\r\n            return await geoserver.lockFeature(\r\n                featureId,\r\n                this.get(BaseLayerProperty.NAME)\r\n            );\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns\r\n     * @public\r\n     */\r\n    getGeoserver(): Geoserver {\r\n        return this.get(BaseLayerProperty.GEOSERVER);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns\r\n     * @public\r\n     */\r\n    getDescribeFeatureType(): IGeoserverDescribeFeatureType {\r\n        return this.get(BaseLayerProperty.DESCRIBEFEATURETYPE);\r\n    }\r\n}\r\n\r\nexport enum BaseLayerProperty {\r\n    NAME = 'name',\r\n    LABEL = 'label',\r\n    DESCRIBEFEATURETYPE = 'describeFeatureType',\r\n    ISVISIBLE = 'isVisible',\r\n    GEOSERVER = 'geoserver'\r\n}\r\n\r\nexport type BaseLayerEventTypes =\r\n    | 'layerRendered'\r\n    | `change:${BaseLayerProperty.DESCRIBEFEATURETYPE}`\r\n    | `change:${BaseLayerProperty.ISVISIBLE}`;\r\n","import Feature from 'ol/Feature';\r\nimport GeoJSON from 'ol/format/GeoJSON';\r\nimport Geometry from 'ol/geom/Geometry';\r\nimport VectorSource, { Options as VSOptions } from 'ol/source/Vector';\r\nimport { transformExtent } from 'ol/proj';\r\nimport { bbox } from 'ol/loadingstrategy';\r\n\r\nimport { WfsGeoserverVendor } from '../../@types';\r\nimport { parseError, showError } from '../errors';\r\nimport { I18N } from '../i18n';\r\nimport { GeoServerAdvanced } from '../../Geoserver';\r\n\r\n/**\r\n * Layer source to retrieve WFS features from geoservers\r\n * https://docs.geoserver.org/stable/en/user/services/wfs/reference.html\r\n *\r\n * @extends {ol/source/Vector~VectorSource}\r\n * @param options\r\n */\r\nexport default class WfsSource extends VectorSource {\r\n    public urlParams = new URLSearchParams({\r\n        SERVICE: 'wfs',\r\n        REQUEST: 'GetFeature',\r\n        OUTPUTFORMAT: 'application/json',\r\n        EXCEPTIONS: 'application/json'\r\n    });\r\n\r\n    constructor(options: WfsSourceOptions) {\r\n        super({\r\n            ...options,\r\n            format: new GeoJSON(),\r\n            loader: async (\r\n                extent,\r\n                resolution,\r\n                projection,\r\n                success,\r\n                failure\r\n            ) => {\r\n                try {\r\n                    // If bbox, add extent to the request\r\n                    if (options.strategy == bbox) {\r\n                        const extentGeoServer = transformExtent(\r\n                            extent,\r\n                            projection.getCode(),\r\n                            options.geoServerAdvanced.projection\r\n                        );\r\n                        // https://docs.geoserver.org/stable/en/user/services/wfs/reference.html\r\n                        // request features using a bounding box with CRS maybe different from featureTypes native CRS\r\n                        this.urlParams.set(\r\n                            'bbox',\r\n                            extentGeoServer.toString() +\r\n                                `,${options.geoServerAdvanced.projection}`\r\n                        );\r\n                    }\r\n\r\n                    const url_fetch =\r\n                        options.geoserverUrl + '?' + this.urlParams.toString();\r\n\r\n                    const response = await fetch(url_fetch, {\r\n                        headers: options.headers,\r\n                        credentials: options.credentials\r\n                    });\r\n\r\n                    if (!response.ok) {\r\n                        throw new Error('');\r\n                    }\r\n\r\n                    const data = await response.json();\r\n\r\n                    if (data.exceptions) {\r\n                        throw new Error(parseError(data));\r\n                    }\r\n\r\n                    const features = this.getFormat().readFeatures(data, {\r\n                        featureProjection: projection.getCode(),\r\n                        dataProjection: options.geoServerAdvanced.projection\r\n                    });\r\n\r\n                    features.forEach((feature: Feature<Geometry>) => {\r\n                        feature.set(\r\n                            '_layerName_',\r\n                            options.name,\r\n                            /* silent = */ true\r\n                        );\r\n                    });\r\n\r\n                    this.addFeatures(features as Feature<Geometry>[]);\r\n\r\n                    success(features as Feature<Geometry>[]);\r\n                } catch (err) {\r\n                    this.removeLoadedExtent(extent);\r\n\r\n                    showError(I18N.errors.geoserver, err, options.name);\r\n\r\n                    failure();\r\n                }\r\n            }\r\n        });\r\n\r\n        this.urlParams.set(\r\n            'version',\r\n            options.geoServerAdvanced.getFeatureVersion\r\n        );\r\n\r\n        this.urlParams.set('typename', options.name);\r\n\r\n        this.urlParams.set(\r\n            'srsName',\r\n            options.geoServerAdvanced.projection.toString()\r\n        );\r\n    }\r\n}\r\n\r\n/**\r\n * **_[interface]_** - Parameters to create a WfsSource\r\n *\r\n * @public\r\n */\r\nexport interface WfsSourceOptions extends VSOptions {\r\n    /**\r\n     * Layer name in the GeoServer\r\n     */\r\n    name: string;\r\n\r\n    /**\r\n     * Url for OWS services. This endpoint will recive the WFS, WFST and WMS requests\r\n     */\r\n    geoserverUrl: string;\r\n\r\n    /**\r\n     * Advanced options for geoserver requests\r\n     */\r\n    geoServerAdvanced?: GeoServerAdvanced;\r\n\r\n    /**\r\n     *\r\n     */\r\n    geoserverVendor?: WfsGeoserverVendor;\r\n\r\n    /**\r\n     * Url headers for GeoServer requests. You can use it to add Authorization credentials\r\n     * https://developer.mozilla.org/en-US/docs/Web/API/Request/headers\r\n     */\r\n    headers?: HeadersInit;\r\n\r\n    /**\r\n     * Credentials for fetch requests\r\n     * https://developer.mozilla.org/en-US/docs/Web/API/Request/credentials\r\n     */\r\n    credentials?: RequestCredentials;\r\n}\r\n","import Feature from 'ol/Feature';\r\nimport Geometry from 'ol/geom/Geometry';\r\nimport VectorLayer from 'ol/layer/Vector';\r\nimport BaseEvent from 'ol/events/Event';\r\nimport { CombinedOnSignature, EventTypes, OnSignature } from 'ol/Observable';\r\nimport { EventsKey } from 'ol/events';\r\nimport { LayerRenderEventTypes } from 'ol/render/EventType';\r\nimport { BaseLayerObjectEventTypes } from 'ol/layer/Base';\r\nimport { ObjectEvent } from 'ol/Object';\r\nimport RenderEvent from 'ol/render/Event';\r\n\r\nimport { Mixin } from 'ts-mixer';\r\n\r\nimport BaseLayer, { BaseLayerEventTypes } from './modules/base/BaseLayer';\r\nimport WfsSource from './modules/base/WfsSource';\r\nimport { LayerOptions } from './ol-wfst';\r\nimport { showLoading } from './modules/loading';\r\nimport { TransactionType } from './@enums';\r\nimport { WfsGeoserverVendor } from './@types';\r\n\r\n/**\r\n * Layer to retrieve WFS features from geoservers\r\n * https://docs.geoserver.org/stable/en/user/services/wfs/reference.html\r\n *\r\n * @fires layerRendered\r\n * @extends {ol/layer/Vector~VectorLayer}\r\n * @param options\r\n */\r\nexport default class WfsLayer extends Mixin(BaseLayer, VectorLayer<WfsSource>) {\r\n    private _loadingCount = 0;\r\n    private _loadedCount = 0;\r\n\r\n    public beforeTransactFeature: (\r\n        feature: Feature<Geometry>,\r\n        transaction: TransactionType\r\n    ) => Feature<Geometry>;\r\n\r\n    declare on: OnSignature<EventTypes, BaseEvent, EventsKey> &\r\n        OnSignature<\r\n            | BaseLayerEventTypes\r\n            | BaseLayerObjectEventTypes\r\n            | 'change:source'\r\n            | 'sourceready',\r\n            ObjectEvent,\r\n            EventsKey\r\n        > &\r\n        OnSignature<LayerRenderEventTypes, RenderEvent, EventsKey> &\r\n        CombinedOnSignature<\r\n            | EventTypes\r\n            | BaseLayerEventTypes\r\n            | BaseLayerObjectEventTypes\r\n            | 'change:source'\r\n            | 'sourceready'\r\n            | LayerRenderEventTypes,\r\n            EventsKey\r\n        >;\r\n\r\n    declare once: OnSignature<EventTypes, BaseEvent, EventsKey> &\r\n        OnSignature<\r\n            | BaseLayerEventTypes\r\n            | BaseLayerObjectEventTypes\r\n            | 'change:source'\r\n            | 'sourceready',\r\n            ObjectEvent,\r\n            EventsKey\r\n        > &\r\n        OnSignature<LayerRenderEventTypes, RenderEvent, EventsKey> &\r\n        CombinedOnSignature<\r\n            | EventTypes\r\n            | BaseLayerEventTypes\r\n            | BaseLayerObjectEventTypes\r\n            | 'change:source'\r\n            | 'sourceready'\r\n            | LayerRenderEventTypes,\r\n            EventsKey\r\n        >;\r\n\r\n    declare un: OnSignature<EventTypes, BaseEvent, void> &\r\n        OnSignature<\r\n            | BaseLayerEventTypes\r\n            | BaseLayerObjectEventTypes\r\n            | 'change:source'\r\n            | 'sourceready',\r\n            ObjectEvent,\r\n            void\r\n        > &\r\n        OnSignature<LayerRenderEventTypes, RenderEvent, void> &\r\n        CombinedOnSignature<\r\n            | EventTypes\r\n            | BaseLayerEventTypes\r\n            | BaseLayerObjectEventTypes\r\n            | 'change:source'\r\n            | 'sourceready'\r\n            | LayerRenderEventTypes,\r\n            void\r\n        >;\r\n\r\n    constructor(options: LayerOptions) {\r\n        super({\r\n            name: options.name,\r\n            label: options.label || options.name,\r\n            minZoom: options.minZoom,\r\n            ...options\r\n        });\r\n\r\n        if (options.beforeTransactFeature) {\r\n            this.beforeTransactFeature = options.beforeTransactFeature;\r\n        }\r\n\r\n        const geoserver = options.geoserver;\r\n\r\n        const source = new WfsSource({\r\n            name: options.name,\r\n            geoserverUrl: geoserver.getUrl(),\r\n            geoServerAdvanced: geoserver.getAdvanced(),\r\n            ...(options.strategy && { strategy: options.strategy }),\r\n            geoserverVendor: options.geoserverVendor\r\n        });\r\n\r\n        this._loadingCount = 0;\r\n        this._loadedCount = 0;\r\n\r\n        source.on('featuresloadstart', () => {\r\n            this._loadingCount++;\r\n            if (this._loadingCount === 1 && this.isVisibleByZoom()) {\r\n                showLoading();\r\n            }\r\n        });\r\n\r\n        source.on(['featuresloadend', 'featuresloaderror'], () => {\r\n            this._loadedCount++;\r\n            if (this._loadingCount === this._loadedCount) {\r\n                this._loadingCount = 0;\r\n                this._loadedCount = 0;\r\n                setTimeout(() => {\r\n                    this.dispatchEvent('layerRendered');\r\n                }, 300);\r\n            }\r\n        });\r\n\r\n        this.setSource(source);\r\n\r\n        const geoserverOptions = options.geoserverVendor as WfsGeoserverVendor;\r\n\r\n        Object.keys(geoserverOptions).forEach((param) => {\r\n            source.urlParams.set(param, geoserverOptions[param]);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @public\r\n     */\r\n    refresh() {\r\n        const source = this.getSource();\r\n        // Refrescamos el wms\r\n        source.refresh();\r\n    }\r\n\r\n    /**\r\n     * Use this to update Geoserver Wms Vendors (https://docs.geoserver.org/latest/en/user/services/wms/vendor.html)\r\n     * and other arguements (https://docs.geoserver.org/stable/en/user/services/wms/reference.html#getmap)\r\n     * in all the getMap requests.\r\n     *\r\n     * Example: you can use this to change the style of the WMS, add a custom sld, set a cql_filter, etc.\r\n     *\r\n     * @public\r\n     * @param paramName\r\n     * @param value Use `undefined` or `null` to remove the param\r\n     * @param refresh\r\n     */\r\n    setCustomParam(\r\n        paramName: string,\r\n        value: string = null,\r\n        refresh = true\r\n    ): URLSearchParams {\r\n        const source = this.getSource();\r\n\r\n        if (value === undefined || value === null) {\r\n            source.urlParams.delete(paramName);\r\n        } else {\r\n            source.urlParams.set(paramName, value);\r\n        }\r\n\r\n        if (refresh) {\r\n            this.refresh();\r\n        }\r\n\r\n        return source.urlParams;\r\n    }\r\n}\r\n","/**\n * @module ol/TileState\n */\n\n/**\n * @enum {number}\n */\nexport default {\n  IDLE: 0,\n  LOADING: 1,\n  LOADED: 2,\n  /**\n   * Indicates that tile loading failed\n   * @type {number}\n   */\n  ERROR: 3,\n  EMPTY: 4,\n};\n","import TileWMS, { Options as TSOptions } from 'ol/source/TileWMS';\r\nimport TileState from 'ol/TileState';\r\nimport { ImageTile } from 'ol';\r\nimport { ObjectEvent } from 'ol/Object';\r\n\r\nimport { WmsGeoserverVendor } from '../../@types';\r\nimport { parseError, showError } from '../errors';\r\nimport { I18N } from '../i18n';\r\nimport { GeoServerAdvanced } from '../../Geoserver';\r\n\r\n/**\r\n * Layer source to retrieve WMS information from geoservers\r\n * https://docs.geoserver.org/stable/en/user/services/wms/reference.html\r\n *\r\n * @extends {ol/source/TieWMS~TileWMS}\r\n * @param options\r\n */\r\nexport default class WmsSource extends TileWMS {\r\n    constructor(options: WmsSourceOptions) {\r\n        super({\r\n            url: options.geoserverUrl,\r\n            serverType: 'geoserver',\r\n            params: {\r\n                SERVICE: 'wms',\r\n                TILED: true,\r\n                LAYERS: options.name,\r\n                EXCEPTIONS: 'application/json',\r\n                ...(options.geoserverVendor && options.geoserverVendor)\r\n            },\r\n            tileLoadFunction: async (tile, src) => {\r\n                const blobToJson = (blob: Blob): any => {\r\n                    return new Promise((resolve) => {\r\n                        const reader = new FileReader();\r\n                        reader.onloadend = () =>\r\n                            resolve(JSON.parse(reader.result as string));\r\n                        reader.readAsText(blob);\r\n                    });\r\n                };\r\n\r\n                try {\r\n                    const response = await fetch(src, {\r\n                        headers: options.headers,\r\n                        credentials: options.credentials\r\n                    });\r\n\r\n                    if (!response.ok) {\r\n                        throw new Error('');\r\n                    }\r\n\r\n                    let data = await response.blob();\r\n\r\n                    // Check if the response has an error\r\n                    if (data.type == 'application/json') {\r\n                        const parsedError = await blobToJson(data);\r\n                        throw new Error(parseError(parsedError));\r\n                    }\r\n\r\n                    ((tile as ImageTile).getImage() as HTMLImageElement).src =\r\n                        URL.createObjectURL(data);\r\n\r\n                    tile.setState(TileState.LOADED);\r\n                } catch (err) {\r\n                    showError(I18N.errors.geoserver, err, options.name);\r\n                    tile.setState(TileState.ERROR);\r\n                }\r\n            },\r\n            ...options\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * **_[interface]_** - Parameters to create a WmsSource\r\n *\r\n * @public\r\n */\r\nexport interface WmsSourceOptions extends Omit<TSOptions, 'params'> {\r\n    /**\r\n     * Layer name in the GeoServer\r\n     */\r\n    name: string;\r\n\r\n    /**\r\n     * Url for OWS services. This endpoint will recive the WFS, WFST and WMS requests\r\n     */\r\n    geoserverUrl: string;\r\n\r\n    /**\r\n     * Advanced options for geoserver requests\r\n     */\r\n    geoServerAdvanced?: GeoServerAdvanced;\r\n\r\n    /**\r\n     *\r\n     */\r\n    geoserverVendor?: WmsGeoserverVendor;\r\n\r\n    /**\r\n     * Url headers for GeoServer requests. You can use it to add Authorization credentials\r\n     * https://developer.mozilla.org/en-US/docs/Web/API/Request/headers\r\n     */\r\n    headers?: HeadersInit;\r\n\r\n    /**\r\n     * Credentials for fetch requests\r\n     * https://developer.mozilla.org/en-US/docs/Web/API/Request/credentials\r\n     */\r\n    credentials?: RequestCredentials;\r\n}\r\n","import { MapBrowserEvent } from 'ol';\r\nimport TileLayer from 'ol/layer/Tile';\r\nimport Geometry from 'ol/geom/Geometry';\r\nimport Feature from 'ol/Feature';\r\nimport GeoJSON from 'ol/format/GeoJSON';\r\nimport BaseEvent from 'ol/events/Event';\r\nimport { CombinedOnSignature, EventTypes, OnSignature } from 'ol/Observable';\r\nimport { EventsKey } from 'ol/events';\r\nimport { LayerRenderEventTypes } from 'ol/render/EventType';\r\nimport { BaseLayerObjectEventTypes } from 'ol/layer/Base';\r\nimport { ObjectEvent } from 'ol/Object';\r\nimport RenderEvent from 'ol/render/Event';\r\n\r\nimport WmsSource from './modules/base/WmsSource';\r\nimport BaseLayer, { BaseLayerEventTypes } from './modules/base/BaseLayer';\r\nimport { LayerOptions } from './ol-wfst';\r\nimport { showLoading } from './modules/loading';\r\nimport { TransactionType } from './@enums';\r\nimport { showError } from './modules/errors';\r\nimport { I18N } from './modules/i18n';\r\nimport { getMap } from './modules/state';\r\nimport { Mixin } from 'ts-mixer';\r\nimport { WmsGeoserverVendor } from './@types';\r\n\r\n/**\r\n * Layer to retrieve WMS information from geoservers\r\n * https://docs.geoserver.org/stable/en/user/services/wms/reference.html\r\n *\r\n * @fires layerRendered\r\n * @extends {ol/layer/Tile~TileLayer}\r\n * @param options\r\n */\r\nexport default class WmsLayer extends Mixin(BaseLayer, TileLayer<WmsSource>) {\r\n    private _loadingCount = 0;\r\n    private _loadedCount = 0;\r\n\r\n    public beforeTransactFeature: (\r\n        feature: Feature<Geometry>,\r\n        transaction: TransactionType\r\n    ) => Feature<Geometry>;\r\n\r\n    // Formats\r\n    private _formatGeoJSON: GeoJSON;\r\n\r\n    declare on: OnSignature<EventTypes, BaseEvent, EventsKey> &\r\n        OnSignature<\r\n            | BaseLayerEventTypes\r\n            | BaseLayerObjectEventTypes\r\n            | 'sourceready'\r\n            | 'change:source'\r\n            | 'change:preload'\r\n            | 'change:useInterimTilesOnError',\r\n            ObjectEvent,\r\n            EventsKey\r\n        > &\r\n        OnSignature<LayerRenderEventTypes, RenderEvent, EventsKey> &\r\n        CombinedOnSignature<\r\n            | EventTypes\r\n            | BaseLayerEventTypes\r\n            | BaseLayerObjectEventTypes\r\n            | 'sourceready'\r\n            | 'change:source'\r\n            | 'change:preload'\r\n            | 'change:useInterimTilesOnError'\r\n            | LayerRenderEventTypes,\r\n            EventsKey\r\n        >;\r\n    declare once: OnSignature<EventTypes, BaseEvent, EventsKey> &\r\n        OnSignature<\r\n            | BaseLayerEventTypes\r\n            | BaseLayerObjectEventTypes\r\n            | 'sourceready'\r\n            | 'change:source'\r\n            | 'change:preload'\r\n            | 'change:useInterimTilesOnError',\r\n            ObjectEvent,\r\n            EventsKey\r\n        > &\r\n        OnSignature<LayerRenderEventTypes, RenderEvent, EventsKey> &\r\n        CombinedOnSignature<\r\n            | EventTypes\r\n            | BaseLayerEventTypes\r\n            | BaseLayerObjectEventTypes\r\n            | 'sourceready'\r\n            | 'change:source'\r\n            | 'change:preload'\r\n            | 'change:useInterimTilesOnError'\r\n            | LayerRenderEventTypes,\r\n            EventsKey\r\n        >;\r\n\r\n    declare un: OnSignature<EventTypes, BaseEvent, void> &\r\n        OnSignature<\r\n            | BaseLayerEventTypes\r\n            | BaseLayerObjectEventTypes\r\n            | 'sourceready'\r\n            | 'change:source'\r\n            | 'change:preload'\r\n            | 'change:useInterimTilesOnError',\r\n            ObjectEvent,\r\n            void\r\n        > &\r\n        OnSignature<LayerRenderEventTypes, RenderEvent, void> &\r\n        CombinedOnSignature<\r\n            | EventTypes\r\n            | BaseLayerEventTypes\r\n            | BaseLayerObjectEventTypes\r\n            | 'sourceready'\r\n            | 'change:source'\r\n            | 'change:preload'\r\n            | 'change:useInterimTilesOnError'\r\n            | LayerRenderEventTypes,\r\n            void\r\n        >;\r\n\r\n    constructor(options: LayerOptions) {\r\n        super({\r\n            name: options.name,\r\n            label: options.label || options.name,\r\n            minZoom: options.minZoom,\r\n            ...options\r\n        });\r\n\r\n        if (options.beforeTransactFeature) {\r\n            this.beforeTransactFeature = options.beforeTransactFeature;\r\n        }\r\n\r\n        this._formatGeoJSON = new GeoJSON();\r\n\r\n        const geoserver = options.geoserver;\r\n\r\n        const source = new WmsSource({\r\n            name: options.name,\r\n            geoserverUrl: geoserver.getUrl(),\r\n            geoServerAdvanced: geoserver.getAdvanced(),\r\n            geoserverVendor: options.geoserverVendor as WmsGeoserverVendor\r\n        });\r\n\r\n        this._loadingCount = 0;\r\n        this._loadedCount = 0;\r\n\r\n        source.on('tileloadstart', () => {\r\n            this._loadingCount++;\r\n            if (this._loadingCount === 1 && this.isVisibleByZoom()) {\r\n                showLoading();\r\n            }\r\n        });\r\n\r\n        source.on(['tileloadend', 'tileloaderror'], () => {\r\n            this._loadedCount++;\r\n            if (this._loadingCount === this._loadedCount) {\r\n                this._loadingCount = 0;\r\n                this._loadedCount = 0;\r\n                setTimeout(() => {\r\n                    this.dispatchEvent('layerRendered');\r\n                }, 300);\r\n            }\r\n        });\r\n\r\n        this.setSource(source);\r\n    }\r\n\r\n    /**\r\n     * Get the features on the click area\r\n     * @param evt\r\n     * @returns\r\n     * @private\r\n     */\r\n    async _getFeaturesByClickEvent(\r\n        evt: MapBrowserEvent<UIEvent>\r\n    ): Promise<Feature<Geometry>[]> {\r\n        const coordinate = evt.coordinate;\r\n\r\n        const view = getMap().getView();\r\n\r\n        // Si la vista es lejana, disminumos el buffer\r\n        // Si es cercana, lo aumentamos, por ejemplo, para podeer clickear los vectores\r\n        // y mejorar la sensibilidad en IOS\r\n        const buffer = view.getZoom() > 10 ? 10 : 5;\r\n\r\n        const source = this.getSource();\r\n\r\n        // Fallback to support a bad name\r\n        // https://openlayers.org/en/v5.3.0/apidoc/module-ol_source_ImageWMS-ImageWMS.html#getGetFeatureInfoUrl\r\n        const fallbackOl5 =\r\n            'getFeatureInfoUrl' in source\r\n                ? 'getFeatureInfoUrl'\r\n                : 'getGetFeatureInfoUrl';\r\n\r\n        const url = source[fallbackOl5](\r\n            coordinate,\r\n            view.getResolution(),\r\n            view.getProjection().getCode(),\r\n            {\r\n                INFO_FORMAT: 'application/json',\r\n                BUFFER: buffer, // Buffer es el \"hit tolerance\" para capas ráster\r\n                FEATURE_COUNT: 1,\r\n                EXCEPTIONS: 'application/json'\r\n            }\r\n        );\r\n\r\n        const geoserver = this.getGeoserver();\r\n\r\n        try {\r\n            const response = await fetch(url, {\r\n                headers: geoserver.getHeaders(),\r\n                credentials: geoserver.getCredentials()\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error(\r\n                    `${I18N.errors.getFeatures} ${response.status}`\r\n                );\r\n            }\r\n\r\n            const data = await response.json();\r\n            const features = this._formatGeoJSON.readFeatures(data);\r\n\r\n            return features;\r\n        } catch (err) {\r\n            showError(err.message, err);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @public\r\n     */\r\n    refresh() {\r\n        const source = this.getSource();\r\n\r\n        // Refrescamos el wms\r\n        source.refresh();\r\n\r\n        // Force refresh the tiles\r\n        const params = source.getParams();\r\n        params.t = new Date().getMilliseconds();\r\n        source.updateParams(params);\r\n    }\r\n\r\n    /**\r\n     * Use this to update Geoserver Wfs Vendors (https://docs.geoserver.org/latest/en/user/services/wfs/vendor.html)\r\n     * and other arguements (https://docs.geoserver.org/stable/en/user/services/wfs/reference.html)\r\n     * in all the getFeature requests.\r\n     *\r\n     * Example: you can use this to set a cql_filter, limit the numbers of features, etc.\r\n     *\r\n     * @public\r\n     * @param paramName\r\n     * @param value\r\n     * @param refresh\r\n     */\r\n    setCustomParam(\r\n        paramName: string,\r\n        value: string = null,\r\n        refresh = true\r\n    ): URLSearchParams {\r\n        const source = this.getSource();\r\n\r\n        source.updateParams({\r\n            [paramName]: value\r\n        });\r\n\r\n        if (refresh) {\r\n            this.refresh();\r\n        }\r\n\r\n        return source.getParams();\r\n    }\r\n}\r\n","/**\n * @module ol/events/Event\n */\n\n/**\n * @classdesc\n * Stripped down implementation of the W3C DOM Level 2 Event interface.\n * See https://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-interface.\n *\n * This implementation only provides `type` and `target` properties, and\n * `stopPropagation` and `preventDefault` methods. It is meant as base class\n * for higher level events defined in the library, and works with\n * {@link module:ol/events/Target~Target}.\n */\nclass BaseEvent {\n  /**\n   * @param {string} type Type.\n   */\n  constructor(type) {\n    /**\n     * @type {boolean}\n     */\n    this.propagationStopped;\n\n    /**\n     * @type {boolean}\n     */\n    this.defaultPrevented;\n\n    /**\n     * The event type.\n     * @type {string}\n     * @api\n     */\n    this.type = type;\n\n    /**\n     * The event target.\n     * @type {Object}\n     * @api\n     */\n    this.target = null;\n  }\n\n  /**\n   * Prevent default. This means that no emulated `click`, `singleclick` or `doubleclick` events\n   * will be fired.\n   * @api\n   */\n  preventDefault() {\n    this.defaultPrevented = true;\n  }\n\n  /**\n   * Stop event propagation.\n   * @api\n   */\n  stopPropagation() {\n    this.propagationStopped = true;\n  }\n}\n\n/**\n * @param {Event|import(\"./Event.js\").default} evt Event\n */\nexport function stopPropagation(evt) {\n  evt.stopPropagation();\n}\n\n/**\n * @param {Event|import(\"./Event.js\").default} evt Event\n */\nexport function preventDefault(evt) {\n  evt.preventDefault();\n}\n\nexport default BaseEvent;\n","/**\n * @module ol/ObjectEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered when a property is changed.\n   * @event module:ol/Object.ObjectEvent#propertychange\n   * @api\n   */\n  PROPERTYCHANGE: 'propertychange',\n};\n\n/**\n * @typedef {'propertychange'} Types\n */\n","/**\n * @module ol/Disposable\n */\n\n/**\n * @classdesc\n * Objects that need to clean up after themselves.\n */\nclass Disposable {\n  constructor() {\n    /**\n     * The object has already been disposed.\n     * @type {boolean}\n     * @protected\n     */\n    this.disposed = false;\n  }\n\n  /**\n   * Clean up.\n   */\n  dispose() {\n    if (!this.disposed) {\n      this.disposed = true;\n      this.disposeInternal();\n    }\n  }\n\n  /**\n   * Extension point for disposable objects.\n   * @protected\n   */\n  disposeInternal() {}\n}\n\nexport default Disposable;\n","/**\n * @module ol/functions\n */\n\nimport {equals as arrayEquals} from './array.js';\n\n/**\n * Always returns true.\n * @return {boolean} true.\n */\nexport function TRUE() {\n  return true;\n}\n\n/**\n * Always returns false.\n * @return {boolean} false.\n */\nexport function FALSE() {\n  return false;\n}\n\n/**\n * A reusable function, used e.g. as a default for callbacks.\n *\n * @return {void} Nothing.\n */\nexport function VOID() {}\n\n/**\n * Wrap a function in another function that remembers the last return.  If the\n * returned function is called twice in a row with the same arguments and the same\n * this object, it will return the value from the first call in the second call.\n *\n * @param {function(...any): ReturnType} fn The function to memoize.\n * @return {function(...any): ReturnType} The memoized function.\n * @template ReturnType\n */\nexport function memoizeOne(fn) {\n  let called = false;\n\n  /** @type {ReturnType} */\n  let lastResult;\n\n  /** @type {Array<any>} */\n  let lastArgs;\n\n  let lastThis;\n\n  return function () {\n    const nextArgs = Array.prototype.slice.call(arguments);\n    if (!called || this !== lastThis || !arrayEquals(nextArgs, lastArgs)) {\n      called = true;\n      lastThis = this;\n      lastArgs = nextArgs;\n      lastResult = fn.apply(this, arguments);\n    }\n    return lastResult;\n  };\n}\n\n/**\n * @template T\n * @param {function(): (T | Promise<T>)} getter A function that returns a value or a promise for a value.\n * @return {Promise<T>} A promise for the value.\n */\nexport function toPromise(getter) {\n  function promiseGetter() {\n    let value;\n    try {\n      value = getter();\n    } catch (err) {\n      return Promise.reject(err);\n    }\n    if (value instanceof Promise) {\n      return value;\n    }\n    return Promise.resolve(value);\n  }\n  return promiseGetter();\n}\n","/**\n * @module ol/obj\n */\n\n/**\n * Removes all properties from an object.\n * @param {Object} object The object to clear.\n */\nexport function clear(object) {\n  for (const property in object) {\n    delete object[property];\n  }\n}\n\n/**\n * Determine if an object has any properties.\n * @param {Object} object The object to check.\n * @return {boolean} The object is empty.\n */\nexport function isEmpty(object) {\n  let property;\n  for (property in object) {\n    return false;\n  }\n  return !property;\n}\n","/**\n * @module ol/events/Target\n */\nimport Disposable from '../Disposable.js';\nimport Event from './Event.js';\nimport {VOID} from '../functions.js';\nimport {clear} from '../obj.js';\n\n/**\n * @typedef {EventTarget|Target} EventTargetLike\n */\n\n/**\n * @classdesc\n * A simplified implementation of the W3C DOM Level 2 EventTarget interface.\n * See https://www.w3.org/TR/2000/REC-DOM-Level-2-Events-20001113/events.html#Events-EventTarget.\n *\n * There are two important simplifications compared to the specification:\n *\n * 1. The handling of `useCapture` in `addEventListener` and\n *    `removeEventListener`. There is no real capture model.\n * 2. The handling of `stopPropagation` and `preventDefault` on `dispatchEvent`.\n *    There is no event target hierarchy. When a listener calls\n *    `stopPropagation` or `preventDefault` on an event object, it means that no\n *    more listeners after this one will be called. Same as when the listener\n *    returns false.\n */\nclass Target extends Disposable {\n  /**\n   * @param {*} [target] Default event target for dispatched events.\n   */\n  constructor(target) {\n    super();\n\n    /**\n     * @private\n     * @type {*}\n     */\n    this.eventTarget_ = target;\n\n    /**\n     * @private\n     * @type {Object<string, number>}\n     */\n    this.pendingRemovals_ = null;\n\n    /**\n     * @private\n     * @type {Object<string, number>}\n     */\n    this.dispatching_ = null;\n\n    /**\n     * @private\n     * @type {Object<string, Array<import(\"../events.js\").Listener>>}\n     */\n    this.listeners_ = null;\n  }\n\n  /**\n   * @param {string} type Type.\n   * @param {import(\"../events.js\").Listener} listener Listener.\n   */\n  addEventListener(type, listener) {\n    if (!type || !listener) {\n      return;\n    }\n    const listeners = this.listeners_ || (this.listeners_ = {});\n    const listenersForType = listeners[type] || (listeners[type] = []);\n    if (!listenersForType.includes(listener)) {\n      listenersForType.push(listener);\n    }\n  }\n\n  /**\n   * Dispatches an event and calls all listeners listening for events\n   * of this type. The event parameter can either be a string or an\n   * Object with a `type` property.\n   *\n   * @param {import(\"./Event.js\").default|string} event Event object.\n   * @return {boolean|undefined} `false` if anyone called preventDefault on the\n   *     event object or if any of the listeners returned false.\n   * @api\n   */\n  dispatchEvent(event) {\n    const isString = typeof event === 'string';\n    const type = isString ? event : event.type;\n    const listeners = this.listeners_ && this.listeners_[type];\n    if (!listeners) {\n      return;\n    }\n\n    const evt = isString ? new Event(event) : /** @type {Event} */ (event);\n    if (!evt.target) {\n      evt.target = this.eventTarget_ || this;\n    }\n    const dispatching = this.dispatching_ || (this.dispatching_ = {});\n    const pendingRemovals =\n      this.pendingRemovals_ || (this.pendingRemovals_ = {});\n    if (!(type in dispatching)) {\n      dispatching[type] = 0;\n      pendingRemovals[type] = 0;\n    }\n    ++dispatching[type];\n    let propagate;\n    for (let i = 0, ii = listeners.length; i < ii; ++i) {\n      if ('handleEvent' in listeners[i]) {\n        propagate = /** @type {import(\"../events.js\").ListenerObject} */ (\n          listeners[i]\n        ).handleEvent(evt);\n      } else {\n        propagate = /** @type {import(\"../events.js\").ListenerFunction} */ (\n          listeners[i]\n        ).call(this, evt);\n      }\n      if (propagate === false || evt.propagationStopped) {\n        propagate = false;\n        break;\n      }\n    }\n    if (--dispatching[type] === 0) {\n      let pr = pendingRemovals[type];\n      delete pendingRemovals[type];\n      while (pr--) {\n        this.removeEventListener(type, VOID);\n      }\n      delete dispatching[type];\n    }\n    return propagate;\n  }\n\n  /**\n   * Clean up.\n   */\n  disposeInternal() {\n    this.listeners_ && clear(this.listeners_);\n  }\n\n  /**\n   * Get the listeners for a specified event type. Listeners are returned in the\n   * order that they will be called in.\n   *\n   * @param {string} type Type.\n   * @return {Array<import(\"../events.js\").Listener>|undefined} Listeners.\n   */\n  getListeners(type) {\n    return (this.listeners_ && this.listeners_[type]) || undefined;\n  }\n\n  /**\n   * @param {string} [type] Type. If not provided,\n   *     `true` will be returned if this event target has any listeners.\n   * @return {boolean} Has listeners.\n   */\n  hasListener(type) {\n    if (!this.listeners_) {\n      return false;\n    }\n    return type\n      ? type in this.listeners_\n      : Object.keys(this.listeners_).length > 0;\n  }\n\n  /**\n   * @param {string} type Type.\n   * @param {import(\"../events.js\").Listener} listener Listener.\n   */\n  removeEventListener(type, listener) {\n    const listeners = this.listeners_ && this.listeners_[type];\n    if (listeners) {\n      const index = listeners.indexOf(listener);\n      if (index !== -1) {\n        if (this.pendingRemovals_ && type in this.pendingRemovals_) {\n          // make listener a no-op, and remove later in #dispatchEvent()\n          listeners[index] = VOID;\n          ++this.pendingRemovals_[type];\n        } else {\n          listeners.splice(index, 1);\n          if (listeners.length === 0) {\n            delete this.listeners_[type];\n          }\n        }\n      }\n    }\n  }\n}\n\nexport default Target;\n","/**\n * @module ol/events/EventType\n */\n\n/**\n * @enum {string}\n * @const\n */\nexport default {\n  /**\n   * Generic change event. Triggered when the revision counter is increased.\n   * @event module:ol/events/Event~BaseEvent#change\n   * @api\n   */\n  CHANGE: 'change',\n\n  /**\n   * Generic error event. Triggered when an error occurs.\n   * @event module:ol/events/Event~BaseEvent#error\n   * @api\n   */\n  ERROR: 'error',\n\n  BLUR: 'blur',\n  CLEAR: 'clear',\n  CONTEXTMENU: 'contextmenu',\n  CLICK: 'click',\n  DBLCLICK: 'dblclick',\n  DRAGENTER: 'dragenter',\n  DRAGOVER: 'dragover',\n  DROP: 'drop',\n  FOCUS: 'focus',\n  KEYDOWN: 'keydown',\n  KEYPRESS: 'keypress',\n  LOAD: 'load',\n  RESIZE: 'resize',\n  TOUCHMOVE: 'touchmove',\n  WHEEL: 'wheel',\n};\n","/**\n * @module ol/events\n */\nimport {clear} from './obj.js';\n\n/**\n * Key to use with {@link module:ol/Observable.unByKey}.\n * @typedef {Object} EventsKey\n * @property {ListenerFunction} listener Listener.\n * @property {import(\"./events/Target.js\").EventTargetLike} target Target.\n * @property {string} type Type.\n * @api\n */\n\n/**\n * Listener function. This function is called with an event object as argument.\n * When the function returns `false`, event propagation will stop.\n *\n * @typedef {function((Event|import(\"./events/Event.js\").default)): (void|boolean)} ListenerFunction\n * @api\n */\n\n/**\n * @typedef {Object} ListenerObject\n * @property {ListenerFunction} handleEvent HandleEvent listener function.\n */\n\n/**\n * @typedef {ListenerFunction|ListenerObject} Listener\n */\n\n/**\n * Registers an event listener on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * This function efficiently binds a `listener` to a `this` object, and returns\n * a key for use with {@link module:ol/events.unlistenByKey}.\n *\n * @param {import(\"./events/Target.js\").EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ListenerFunction} listener Listener.\n * @param {Object} [thisArg] Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @param {boolean} [once] If true, add the listener as one-off listener.\n * @return {EventsKey} Unique key for the listener.\n */\nexport function listen(target, type, listener, thisArg, once) {\n  if (thisArg && thisArg !== target) {\n    listener = listener.bind(thisArg);\n  }\n  if (once) {\n    const originalListener = listener;\n    listener = function () {\n      target.removeEventListener(type, listener);\n      originalListener.apply(this, arguments);\n    };\n  }\n  const eventsKey = {\n    target: target,\n    type: type,\n    listener: listener,\n  };\n  target.addEventListener(type, listener);\n  return eventsKey;\n}\n\n/**\n * Registers a one-off event listener on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * This function efficiently binds a `listener` as self-unregistering listener\n * to a `this` object, and returns a key for use with\n * {@link module:ol/events.unlistenByKey} in case the listener needs to be\n * unregistered before it is called.\n *\n * When {@link module:ol/events.listen} is called with the same arguments after this\n * function, the self-unregistering listener will be turned into a permanent\n * listener.\n *\n * @param {import(\"./events/Target.js\").EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ListenerFunction} listener Listener.\n * @param {Object} [thisArg] Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @return {EventsKey} Key for unlistenByKey.\n */\nexport function listenOnce(target, type, listener, thisArg) {\n  return listen(target, type, listener, thisArg, true);\n}\n\n/**\n * Unregisters event listeners on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * The argument passed to this function is the key returned from\n * {@link module:ol/events.listen} or {@link module:ol/events.listenOnce}.\n *\n * @param {EventsKey} key The key.\n */\nexport function unlistenByKey(key) {\n  if (key && key.target) {\n    key.target.removeEventListener(key.type, key.listener);\n    clear(key);\n  }\n}\n","/**\n * @module ol/Observable\n */\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\nimport {listen, listenOnce, unlistenByKey} from './events.js';\n\n/***\n * @template {string} Type\n * @template {Event|import(\"./events/Event.js\").default} EventClass\n * @template Return\n * @typedef {(type: Type, listener: (event: EventClass) => ?) => Return} OnSignature\n */\n\n/***\n * @template {string} Type\n * @template Return\n * @typedef {(type: Type[], listener: (event: Event|import(\"./events/Event\").default) => ?) => Return extends void ? void : Return[]} CombinedOnSignature\n */\n\n/**\n * @typedef {'change'|'error'} EventTypes\n */\n\n/***\n * @template Return\n * @typedef {OnSignature<EventTypes, import(\"./events/Event.js\").default, Return> & CombinedOnSignature<EventTypes, Return>} ObservableOnSignature\n */\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * An event target providing convenient methods for listener registration\n * and unregistration. A generic `change` event is always available through\n * {@link module:ol/Observable~Observable#changed}.\n *\n * @fires import(\"./events/Event.js\").default\n * @api\n */\nclass Observable extends EventTarget {\n  constructor() {\n    super();\n\n    this.on =\n      /** @type {ObservableOnSignature<import(\"./events\").EventsKey>} */ (\n        this.onInternal\n      );\n\n    this.once =\n      /** @type {ObservableOnSignature<import(\"./events\").EventsKey>} */ (\n        this.onceInternal\n      );\n\n    this.un = /** @type {ObservableOnSignature<void>} */ (this.unInternal);\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.revision_ = 0;\n  }\n\n  /**\n   * Increases the revision counter and dispatches a 'change' event.\n   * @api\n   */\n  changed() {\n    ++this.revision_;\n    this.dispatchEvent(EventType.CHANGE);\n  }\n\n  /**\n   * Get the version number for this object.  Each time the object is modified,\n   * its version number will be incremented.\n   * @return {number} Revision.\n   * @api\n   */\n  getRevision() {\n    return this.revision_;\n  }\n\n  /**\n   * @param {string|Array<string>} type Type.\n   * @param {function((Event|import(\"./events/Event\").default)): ?} listener Listener.\n   * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Event key.\n   * @protected\n   */\n  onInternal(type, listener) {\n    if (Array.isArray(type)) {\n      const len = type.length;\n      const keys = new Array(len);\n      for (let i = 0; i < len; ++i) {\n        keys[i] = listen(this, type[i], listener);\n      }\n      return keys;\n    }\n    return listen(this, /** @type {string} */ (type), listener);\n  }\n\n  /**\n   * @param {string|Array<string>} type Type.\n   * @param {function((Event|import(\"./events/Event\").default)): ?} listener Listener.\n   * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Event key.\n   * @protected\n   */\n  onceInternal(type, listener) {\n    let key;\n    if (Array.isArray(type)) {\n      const len = type.length;\n      key = new Array(len);\n      for (let i = 0; i < len; ++i) {\n        key[i] = listenOnce(this, type[i], listener);\n      }\n    } else {\n      key = listenOnce(this, /** @type {string} */ (type), listener);\n    }\n    /** @type {Object} */ (listener).ol_key = key;\n    return key;\n  }\n\n  /**\n   * Unlisten for a certain type of event.\n   * @param {string|Array<string>} type Type.\n   * @param {function((Event|import(\"./events/Event\").default)): ?} listener Listener.\n   * @protected\n   */\n  unInternal(type, listener) {\n    const key = /** @type {Object} */ (listener).ol_key;\n    if (key) {\n      unByKey(key);\n    } else if (Array.isArray(type)) {\n      for (let i = 0, ii = type.length; i < ii; ++i) {\n        this.removeEventListener(type[i], listener);\n      }\n    } else {\n      this.removeEventListener(type, listener);\n    }\n  }\n}\n\n/**\n * Listen for a certain type of event.\n * @function\n * @param {string|Array<string>} type The event type or array of event types.\n * @param {function((Event|import(\"./events/Event\").default)): ?} listener The listener function.\n * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Unique key for the listener. If\n *     called with an array of event types as the first argument, the return\n *     will be an array of keys.\n * @api\n */\nObservable.prototype.on;\n\n/**\n * Listen once for a certain type of event.\n * @function\n * @param {string|Array<string>} type The event type or array of event types.\n * @param {function((Event|import(\"./events/Event\").default)): ?} listener The listener function.\n * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Unique key for the listener. If\n *     called with an array of event types as the first argument, the return\n *     will be an array of keys.\n * @api\n */\nObservable.prototype.once;\n\n/**\n * Unlisten for a certain type of event.\n * @function\n * @param {string|Array<string>} type The event type or array of event types.\n * @param {function((Event|import(\"./events/Event\").default)): ?} listener The listener function.\n * @api\n */\nObservable.prototype.un;\n\n/**\n * Removes an event listener using the key returned by `on()` or `once()`.\n * @param {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} key The key returned by `on()`\n *     or `once()` (or an array of keys).\n * @api\n */\nexport function unByKey(key) {\n  if (Array.isArray(key)) {\n    for (let i = 0, ii = key.length; i < ii; ++i) {\n      unlistenByKey(key[i]);\n    }\n  } else {\n    unlistenByKey(/** @type {import(\"./events.js\").EventsKey} */ (key));\n  }\n}\n\nexport default Observable;\n","/**\n * @module ol/util\n */\n\n/**\n * @return {never} Any return.\n */\nexport function abstract() {\n  throw new Error('Unimplemented abstract method.');\n}\n\n/**\n * Counter for getUid.\n * @type {number}\n * @private\n */\nlet uidCounter_ = 0;\n\n/**\n * Gets a unique ID for an object. This mutates the object so that further calls\n * with the same object as a parameter returns the same value. Unique IDs are generated\n * as a strictly increasing sequence. Adapted from goog.getUid.\n *\n * @param {Object} obj The object to get the unique ID for.\n * @return {string} The unique ID for the object.\n * @api\n */\nexport function getUid(obj) {\n  return obj.ol_uid || (obj.ol_uid = String(++uidCounter_));\n}\n\n/**\n * OpenLayers version.\n * @type {string}\n */\nexport const VERSION = '7.3.0';\n","/**\n * @module ol/Object\n */\nimport Event from './events/Event.js';\nimport ObjectEventType from './ObjectEventType.js';\nimport Observable from './Observable.js';\nimport {getUid} from './util.js';\nimport {isEmpty} from './obj.js';\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/Object~BaseObject} instances are instances of this type.\n */\nexport class ObjectEvent extends Event {\n  /**\n   * @param {string} type The event type.\n   * @param {string} key The property name.\n   * @param {*} oldValue The old value for `key`.\n   */\n  constructor(type, key, oldValue) {\n    super(type);\n\n    /**\n     * The name of the property whose value is changing.\n     * @type {string}\n     * @api\n     */\n    this.key = key;\n\n    /**\n     * The old value. To get the new value use `e.target.get(e.key)` where\n     * `e` is the event object.\n     * @type {*}\n     * @api\n     */\n    this.oldValue = oldValue;\n  }\n}\n\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *    import(\"./Observable\").OnSignature<import(\"./ObjectEventType\").Types, ObjectEvent, Return> &\n *    import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|import(\"./ObjectEventType\").Types, Return>} ObjectOnSignature\n */\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Most non-trivial classes inherit from this.\n *\n * This extends {@link module:ol/Observable~Observable} with observable\n * properties, where each property is observable as well as the object as a\n * whole.\n *\n * Classes that inherit from this have pre-defined properties, to which you can\n * add your owns. The pre-defined properties are listed in this documentation as\n * 'Observable Properties', and have their own accessors; for example,\n * {@link module:ol/Map~Map} has a `target` property, accessed with\n * `getTarget()` and changed with `setTarget()`. Not all properties are however\n * settable. There are also general-purpose accessors `get()` and `set()`. For\n * example, `get('target')` is equivalent to `getTarget()`.\n *\n * The `set` accessors trigger a change event, and you can monitor this by\n * registering a listener. For example, {@link module:ol/View~View} has a\n * `center` property, so `view.on('change:center', function(evt) {...});` would\n * call the function whenever the value of the center property changes. Within\n * the function, `evt.target` would be the view, so `evt.target.getCenter()`\n * would return the new center.\n *\n * You can add your own observable properties with\n * `object.set('prop', 'value')`, and retrieve that with `object.get('prop')`.\n * You can listen for changes on that property value with\n * `object.on('change:prop', listener)`. You can get a list of all\n * properties with {@link module:ol/Object~BaseObject#getProperties}.\n *\n * Note that the observable properties are separate from standard JS properties.\n * You can, for example, give your map object a title with\n * `map.title='New title'` and with `map.set('title', 'Another title')`. The\n * first will be a `hasOwnProperty`; the second will appear in\n * `getProperties()`. Only the second is observable.\n *\n * Properties can be deleted by using the unset method. E.g.\n * object.unset('foo').\n *\n * @fires ObjectEvent\n * @api\n */\nclass BaseObject extends Observable {\n  /**\n   * @param {Object<string, *>} [values] An object with key-value pairs.\n   */\n  constructor(values) {\n    super();\n\n    /***\n     * @type {ObjectOnSignature<import(\"./events\").EventsKey>}\n     */\n    this.on;\n\n    /***\n     * @type {ObjectOnSignature<import(\"./events\").EventsKey>}\n     */\n    this.once;\n\n    /***\n     * @type {ObjectOnSignature<void>}\n     */\n    this.un;\n\n    // Call {@link module:ol/util.getUid} to ensure that the order of objects' ids is\n    // the same as the order in which they were created.  This also helps to\n    // ensure that object properties are always added in the same order, which\n    // helps many JavaScript engines generate faster code.\n    getUid(this);\n\n    /**\n     * @private\n     * @type {Object<string, *>}\n     */\n    this.values_ = null;\n\n    if (values !== undefined) {\n      this.setProperties(values);\n    }\n  }\n\n  /**\n   * Gets a value.\n   * @param {string} key Key name.\n   * @return {*} Value.\n   * @api\n   */\n  get(key) {\n    let value;\n    if (this.values_ && this.values_.hasOwnProperty(key)) {\n      value = this.values_[key];\n    }\n    return value;\n  }\n\n  /**\n   * Get a list of object property names.\n   * @return {Array<string>} List of property names.\n   * @api\n   */\n  getKeys() {\n    return (this.values_ && Object.keys(this.values_)) || [];\n  }\n\n  /**\n   * Get an object of all property names and values.\n   * @return {Object<string, *>} Object.\n   * @api\n   */\n  getProperties() {\n    return (this.values_ && Object.assign({}, this.values_)) || {};\n  }\n\n  /**\n   * @return {boolean} The object has properties.\n   */\n  hasProperties() {\n    return !!this.values_;\n  }\n\n  /**\n   * @param {string} key Key name.\n   * @param {*} oldValue Old value.\n   */\n  notify(key, oldValue) {\n    let eventType;\n    eventType = `change:${key}`;\n    if (this.hasListener(eventType)) {\n      this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n    }\n    eventType = ObjectEventType.PROPERTYCHANGE;\n    if (this.hasListener(eventType)) {\n      this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n    }\n  }\n\n  /**\n   * @param {string} key Key name.\n   * @param {import(\"./events.js\").Listener} listener Listener.\n   */\n  addChangeListener(key, listener) {\n    this.addEventListener(`change:${key}`, listener);\n  }\n\n  /**\n   * @param {string} key Key name.\n   * @param {import(\"./events.js\").Listener} listener Listener.\n   */\n  removeChangeListener(key, listener) {\n    this.removeEventListener(`change:${key}`, listener);\n  }\n\n  /**\n   * Sets a value.\n   * @param {string} key Key name.\n   * @param {*} value Value.\n   * @param {boolean} [silent] Update without triggering an event.\n   * @api\n   */\n  set(key, value, silent) {\n    const values = this.values_ || (this.values_ = {});\n    if (silent) {\n      values[key] = value;\n    } else {\n      const oldValue = values[key];\n      values[key] = value;\n      if (oldValue !== value) {\n        this.notify(key, oldValue);\n      }\n    }\n  }\n\n  /**\n   * Sets a collection of key-value pairs.  Note that this changes any existing\n   * properties and adds new ones (it does not remove any existing properties).\n   * @param {Object<string, *>} values Values.\n   * @param {boolean} [silent] Update without triggering an event.\n   * @api\n   */\n  setProperties(values, silent) {\n    for (const key in values) {\n      this.set(key, values[key], silent);\n    }\n  }\n\n  /**\n   * Apply any properties from another object without triggering events.\n   * @param {BaseObject} source The source object.\n   * @protected\n   */\n  applyProperties(source) {\n    if (!source.values_) {\n      return;\n    }\n    Object.assign(this.values_ || (this.values_ = {}), source.values_);\n  }\n\n  /**\n   * Unsets a property.\n   * @param {string} key Key name.\n   * @param {boolean} [silent] Unset without triggering an event.\n   * @api\n   */\n  unset(key, silent) {\n    if (this.values_ && key in this.values_) {\n      const oldValue = this.values_[key];\n      delete this.values_[key];\n      if (isEmpty(this.values_)) {\n        this.values_ = null;\n      }\n      if (!silent) {\n        this.notify(key, oldValue);\n      }\n    }\n  }\n}\n\nexport default BaseObject;\n","/**\n * @module ol/extent\n */\nimport Relationship from './extent/Relationship.js';\nimport {assert} from './asserts.js';\n\n/**\n * An array of numbers representing an extent: `[minx, miny, maxx, maxy]`.\n * @typedef {Array<number>} Extent\n * @api\n */\n\n/**\n * Extent corner.\n * @typedef {'bottom-left' | 'bottom-right' | 'top-left' | 'top-right'} Corner\n */\n\n/**\n * Build an extent that includes all given coordinates.\n *\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @return {Extent} Bounding extent.\n * @api\n */\nexport function boundingExtent(coordinates) {\n  const extent = createEmpty();\n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    extendCoordinate(extent, coordinates[i]);\n  }\n  return extent;\n}\n\n/**\n * @param {Array<number>} xs Xs.\n * @param {Array<number>} ys Ys.\n * @param {Extent} [dest] Destination extent.\n * @private\n * @return {Extent} Extent.\n */\nfunction _boundingExtentXYs(xs, ys, dest) {\n  const minX = Math.min.apply(null, xs);\n  const minY = Math.min.apply(null, ys);\n  const maxX = Math.max.apply(null, xs);\n  const maxY = Math.max.apply(null, ys);\n  return createOrUpdate(minX, minY, maxX, maxY, dest);\n}\n\n/**\n * Return extent increased by the provided value.\n * @param {Extent} extent Extent.\n * @param {number} value The amount by which the extent should be buffered.\n * @param {Extent} [dest] Extent.\n * @return {Extent} Extent.\n * @api\n */\nexport function buffer(extent, value, dest) {\n  if (dest) {\n    dest[0] = extent[0] - value;\n    dest[1] = extent[1] - value;\n    dest[2] = extent[2] + value;\n    dest[3] = extent[3] + value;\n    return dest;\n  }\n  return [\n    extent[0] - value,\n    extent[1] - value,\n    extent[2] + value,\n    extent[3] + value,\n  ];\n}\n\n/**\n * Creates a clone of an extent.\n *\n * @param {Extent} extent Extent to clone.\n * @param {Extent} [dest] Extent.\n * @return {Extent} The clone.\n */\nexport function clone(extent, dest) {\n  if (dest) {\n    dest[0] = extent[0];\n    dest[1] = extent[1];\n    dest[2] = extent[2];\n    dest[3] = extent[3];\n    return dest;\n  }\n  return extent.slice();\n}\n\n/**\n * @param {Extent} extent Extent.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {number} Closest squared distance.\n */\nexport function closestSquaredDistanceXY(extent, x, y) {\n  let dx, dy;\n  if (x < extent[0]) {\n    dx = extent[0] - x;\n  } else if (extent[2] < x) {\n    dx = x - extent[2];\n  } else {\n    dx = 0;\n  }\n  if (y < extent[1]) {\n    dy = extent[1] - y;\n  } else if (extent[3] < y) {\n    dy = y - extent[3];\n  } else {\n    dy = 0;\n  }\n  return dx * dx + dy * dy;\n}\n\n/**\n * Check if the passed coordinate is contained or on the edge of the extent.\n *\n * @param {Extent} extent Extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @return {boolean} The coordinate is contained in the extent.\n * @api\n */\nexport function containsCoordinate(extent, coordinate) {\n  return containsXY(extent, coordinate[0], coordinate[1]);\n}\n\n/**\n * Check if one extent contains another.\n *\n * An extent is deemed contained if it lies completely within the other extent,\n * including if they share one or more edges.\n *\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {boolean} The second extent is contained by or on the edge of the\n *     first.\n * @api\n */\nexport function containsExtent(extent1, extent2) {\n  return (\n    extent1[0] <= extent2[0] &&\n    extent2[2] <= extent1[2] &&\n    extent1[1] <= extent2[1] &&\n    extent2[3] <= extent1[3]\n  );\n}\n\n/**\n * Check if the passed coordinate is contained or on the edge of the extent.\n *\n * @param {Extent} extent Extent.\n * @param {number} x X coordinate.\n * @param {number} y Y coordinate.\n * @return {boolean} The x, y values are contained in the extent.\n * @api\n */\nexport function containsXY(extent, x, y) {\n  return extent[0] <= x && x <= extent[2] && extent[1] <= y && y <= extent[3];\n}\n\n/**\n * Get the relationship between a coordinate and extent.\n * @param {Extent} extent The extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate The coordinate.\n * @return {import(\"./extent/Relationship.js\").default} The relationship (bitwise compare with\n *     import(\"./extent/Relationship.js\").Relationship).\n */\nexport function coordinateRelationship(extent, coordinate) {\n  const minX = extent[0];\n  const minY = extent[1];\n  const maxX = extent[2];\n  const maxY = extent[3];\n  const x = coordinate[0];\n  const y = coordinate[1];\n  let relationship = Relationship.UNKNOWN;\n  if (x < minX) {\n    relationship = relationship | Relationship.LEFT;\n  } else if (x > maxX) {\n    relationship = relationship | Relationship.RIGHT;\n  }\n  if (y < minY) {\n    relationship = relationship | Relationship.BELOW;\n  } else if (y > maxY) {\n    relationship = relationship | Relationship.ABOVE;\n  }\n  if (relationship === Relationship.UNKNOWN) {\n    relationship = Relationship.INTERSECTING;\n  }\n  return relationship;\n}\n\n/**\n * Create an empty extent.\n * @return {Extent} Empty extent.\n * @api\n */\nexport function createEmpty() {\n  return [Infinity, Infinity, -Infinity, -Infinity];\n}\n\n/**\n * Create a new extent or update the provided extent.\n * @param {number} minX Minimum X.\n * @param {number} minY Minimum Y.\n * @param {number} maxX Maximum X.\n * @param {number} maxY Maximum Y.\n * @param {Extent} [dest] Destination extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdate(minX, minY, maxX, maxY, dest) {\n  if (dest) {\n    dest[0] = minX;\n    dest[1] = minY;\n    dest[2] = maxX;\n    dest[3] = maxY;\n    return dest;\n  }\n  return [minX, minY, maxX, maxY];\n}\n\n/**\n * Create a new empty extent or make the provided one empty.\n * @param {Extent} [dest] Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateEmpty(dest) {\n  return createOrUpdate(Infinity, Infinity, -Infinity, -Infinity, dest);\n}\n\n/**\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {Extent} [dest] Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromCoordinate(coordinate, dest) {\n  const x = coordinate[0];\n  const y = coordinate[1];\n  return createOrUpdate(x, y, x, y, dest);\n}\n\n/**\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @param {Extent} [dest] Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromCoordinates(coordinates, dest) {\n  const extent = createOrUpdateEmpty(dest);\n  return extendCoordinates(extent, coordinates);\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {Extent} [dest] Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromFlatCoordinates(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  dest\n) {\n  const extent = createOrUpdateEmpty(dest);\n  return extendFlatCoordinates(extent, flatCoordinates, offset, end, stride);\n}\n\n/**\n * @param {Array<Array<import(\"./coordinate.js\").Coordinate>>} rings Rings.\n * @param {Extent} [dest] Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromRings(rings, dest) {\n  const extent = createOrUpdateEmpty(dest);\n  return extendRings(extent, rings);\n}\n\n/**\n * Determine if two extents are equivalent.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {boolean} The two extents are equivalent.\n * @api\n */\nexport function equals(extent1, extent2) {\n  return (\n    extent1[0] == extent2[0] &&\n    extent1[2] == extent2[2] &&\n    extent1[1] == extent2[1] &&\n    extent1[3] == extent2[3]\n  );\n}\n\n/**\n * Determine if two extents are approximately equivalent.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @param {number} tolerance Tolerance in extent coordinate units.\n * @return {boolean} The two extents differ by less than the tolerance.\n */\nexport function approximatelyEquals(extent1, extent2, tolerance) {\n  return (\n    Math.abs(extent1[0] - extent2[0]) < tolerance &&\n    Math.abs(extent1[2] - extent2[2]) < tolerance &&\n    Math.abs(extent1[1] - extent2[1]) < tolerance &&\n    Math.abs(extent1[3] - extent2[3]) < tolerance\n  );\n}\n\n/**\n * Modify an extent to include another extent.\n * @param {Extent} extent1 The extent to be modified.\n * @param {Extent} extent2 The extent that will be included in the first.\n * @return {Extent} A reference to the first (extended) extent.\n * @api\n */\nexport function extend(extent1, extent2) {\n  if (extent2[0] < extent1[0]) {\n    extent1[0] = extent2[0];\n  }\n  if (extent2[2] > extent1[2]) {\n    extent1[2] = extent2[2];\n  }\n  if (extent2[1] < extent1[1]) {\n    extent1[1] = extent2[1];\n  }\n  if (extent2[3] > extent1[3]) {\n    extent1[3] = extent2[3];\n  }\n  return extent1;\n}\n\n/**\n * @param {Extent} extent Extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n */\nexport function extendCoordinate(extent, coordinate) {\n  if (coordinate[0] < extent[0]) {\n    extent[0] = coordinate[0];\n  }\n  if (coordinate[0] > extent[2]) {\n    extent[2] = coordinate[0];\n  }\n  if (coordinate[1] < extent[1]) {\n    extent[1] = coordinate[1];\n  }\n  if (coordinate[1] > extent[3]) {\n    extent[3] = coordinate[1];\n  }\n}\n\n/**\n * @param {Extent} extent Extent.\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @return {Extent} Extent.\n */\nexport function extendCoordinates(extent, coordinates) {\n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    extendCoordinate(extent, coordinates[i]);\n  }\n  return extent;\n}\n\n/**\n * @param {Extent} extent Extent.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {Extent} Extent.\n */\nexport function extendFlatCoordinates(\n  extent,\n  flatCoordinates,\n  offset,\n  end,\n  stride\n) {\n  for (; offset < end; offset += stride) {\n    extendXY(extent, flatCoordinates[offset], flatCoordinates[offset + 1]);\n  }\n  return extent;\n}\n\n/**\n * @param {Extent} extent Extent.\n * @param {Array<Array<import(\"./coordinate.js\").Coordinate>>} rings Rings.\n * @return {Extent} Extent.\n */\nexport function extendRings(extent, rings) {\n  for (let i = 0, ii = rings.length; i < ii; ++i) {\n    extendCoordinates(extent, rings[i]);\n  }\n  return extent;\n}\n\n/**\n * @param {Extent} extent Extent.\n * @param {number} x X.\n * @param {number} y Y.\n */\nexport function extendXY(extent, x, y) {\n  extent[0] = Math.min(extent[0], x);\n  extent[1] = Math.min(extent[1], y);\n  extent[2] = Math.max(extent[2], x);\n  extent[3] = Math.max(extent[3], y);\n}\n\n/**\n * This function calls `callback` for each corner of the extent. If the\n * callback returns a truthy value the function returns that value\n * immediately. Otherwise the function returns `false`.\n * @param {Extent} extent Extent.\n * @param {function(import(\"./coordinate.js\").Coordinate): S} callback Callback.\n * @return {S|boolean} Value.\n * @template S\n */\nexport function forEachCorner(extent, callback) {\n  let val;\n  val = callback(getBottomLeft(extent));\n  if (val) {\n    return val;\n  }\n  val = callback(getBottomRight(extent));\n  if (val) {\n    return val;\n  }\n  val = callback(getTopRight(extent));\n  if (val) {\n    return val;\n  }\n  val = callback(getTopLeft(extent));\n  if (val) {\n    return val;\n  }\n  return false;\n}\n\n/**\n * Get the size of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Area.\n * @api\n */\nexport function getArea(extent) {\n  let area = 0;\n  if (!isEmpty(extent)) {\n    area = getWidth(extent) * getHeight(extent);\n  }\n  return area;\n}\n\n/**\n * Get the bottom left coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Bottom left coordinate.\n * @api\n */\nexport function getBottomLeft(extent) {\n  return [extent[0], extent[1]];\n}\n\n/**\n * Get the bottom right coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Bottom right coordinate.\n * @api\n */\nexport function getBottomRight(extent) {\n  return [extent[2], extent[1]];\n}\n\n/**\n * Get the center coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Center.\n * @api\n */\nexport function getCenter(extent) {\n  return [(extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2];\n}\n\n/**\n * Get a corner coordinate of an extent.\n * @param {Extent} extent Extent.\n * @param {Corner} corner Corner.\n * @return {import(\"./coordinate.js\").Coordinate} Corner coordinate.\n */\nexport function getCorner(extent, corner) {\n  let coordinate;\n  if (corner === 'bottom-left') {\n    coordinate = getBottomLeft(extent);\n  } else if (corner === 'bottom-right') {\n    coordinate = getBottomRight(extent);\n  } else if (corner === 'top-left') {\n    coordinate = getTopLeft(extent);\n  } else if (corner === 'top-right') {\n    coordinate = getTopRight(extent);\n  } else {\n    assert(false, 13); // Invalid corner\n  }\n  return coordinate;\n}\n\n/**\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {number} Enlarged area.\n */\nexport function getEnlargedArea(extent1, extent2) {\n  const minX = Math.min(extent1[0], extent2[0]);\n  const minY = Math.min(extent1[1], extent2[1]);\n  const maxX = Math.max(extent1[2], extent2[2]);\n  const maxY = Math.max(extent1[3], extent2[3]);\n  return (maxX - minX) * (maxY - minY);\n}\n\n/**\n * @param {import(\"./coordinate.js\").Coordinate} center Center.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {import(\"./size.js\").Size} size Size.\n * @param {Extent} [dest] Destination extent.\n * @return {Extent} Extent.\n */\nexport function getForViewAndSize(center, resolution, rotation, size, dest) {\n  const [x0, y0, x1, y1, x2, y2, x3, y3] = getRotatedViewport(\n    center,\n    resolution,\n    rotation,\n    size\n  );\n  return createOrUpdate(\n    Math.min(x0, x1, x2, x3),\n    Math.min(y0, y1, y2, y3),\n    Math.max(x0, x1, x2, x3),\n    Math.max(y0, y1, y2, y3),\n    dest\n  );\n}\n\n/**\n * @param {import(\"./coordinate.js\").Coordinate} center Center.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {import(\"./size.js\").Size} size Size.\n * @return {Array<number>} Linear ring representing the viewport.\n */\nexport function getRotatedViewport(center, resolution, rotation, size) {\n  const dx = (resolution * size[0]) / 2;\n  const dy = (resolution * size[1]) / 2;\n  const cosRotation = Math.cos(rotation);\n  const sinRotation = Math.sin(rotation);\n  const xCos = dx * cosRotation;\n  const xSin = dx * sinRotation;\n  const yCos = dy * cosRotation;\n  const ySin = dy * sinRotation;\n  const x = center[0];\n  const y = center[1];\n  return [\n    x - xCos + ySin,\n    y - xSin - yCos,\n    x - xCos - ySin,\n    y - xSin + yCos,\n    x + xCos - ySin,\n    y + xSin + yCos,\n    x + xCos + ySin,\n    y + xSin - yCos,\n    x - xCos + ySin,\n    y - xSin - yCos,\n  ];\n}\n\n/**\n * Get the height of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Height.\n * @api\n */\nexport function getHeight(extent) {\n  return extent[3] - extent[1];\n}\n\n/**\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {number} Intersection area.\n */\nexport function getIntersectionArea(extent1, extent2) {\n  const intersection = getIntersection(extent1, extent2);\n  return getArea(intersection);\n}\n\n/**\n * Get the intersection of two extents.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @param {Extent} [dest] Optional extent to populate with intersection.\n * @return {Extent} Intersecting extent.\n * @api\n */\nexport function getIntersection(extent1, extent2, dest) {\n  const intersection = dest ? dest : createEmpty();\n  if (intersects(extent1, extent2)) {\n    if (extent1[0] > extent2[0]) {\n      intersection[0] = extent1[0];\n    } else {\n      intersection[0] = extent2[0];\n    }\n    if (extent1[1] > extent2[1]) {\n      intersection[1] = extent1[1];\n    } else {\n      intersection[1] = extent2[1];\n    }\n    if (extent1[2] < extent2[2]) {\n      intersection[2] = extent1[2];\n    } else {\n      intersection[2] = extent2[2];\n    }\n    if (extent1[3] < extent2[3]) {\n      intersection[3] = extent1[3];\n    } else {\n      intersection[3] = extent2[3];\n    }\n  } else {\n    createOrUpdateEmpty(intersection);\n  }\n  return intersection;\n}\n\n/**\n * @param {Extent} extent Extent.\n * @return {number} Margin.\n */\nexport function getMargin(extent) {\n  return getWidth(extent) + getHeight(extent);\n}\n\n/**\n * Get the size (width, height) of an extent.\n * @param {Extent} extent The extent.\n * @return {import(\"./size.js\").Size} The extent size.\n * @api\n */\nexport function getSize(extent) {\n  return [extent[2] - extent[0], extent[3] - extent[1]];\n}\n\n/**\n * Get the top left coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Top left coordinate.\n * @api\n */\nexport function getTopLeft(extent) {\n  return [extent[0], extent[3]];\n}\n\n/**\n * Get the top right coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Top right coordinate.\n * @api\n */\nexport function getTopRight(extent) {\n  return [extent[2], extent[3]];\n}\n\n/**\n * Get the width of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Width.\n * @api\n */\nexport function getWidth(extent) {\n  return extent[2] - extent[0];\n}\n\n/**\n * Determine if one extent intersects another.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent.\n * @return {boolean} The two extents intersect.\n * @api\n */\nexport function intersects(extent1, extent2) {\n  return (\n    extent1[0] <= extent2[2] &&\n    extent1[2] >= extent2[0] &&\n    extent1[1] <= extent2[3] &&\n    extent1[3] >= extent2[1]\n  );\n}\n\n/**\n * Determine if an extent is empty.\n * @param {Extent} extent Extent.\n * @return {boolean} Is empty.\n * @api\n */\nexport function isEmpty(extent) {\n  return extent[2] < extent[0] || extent[3] < extent[1];\n}\n\n/**\n * @param {Extent} extent Extent.\n * @param {Extent} [dest] Extent.\n * @return {Extent} Extent.\n */\nexport function returnOrUpdate(extent, dest) {\n  if (dest) {\n    dest[0] = extent[0];\n    dest[1] = extent[1];\n    dest[2] = extent[2];\n    dest[3] = extent[3];\n    return dest;\n  }\n  return extent;\n}\n\n/**\n * @param {Extent} extent Extent.\n * @param {number} value Value.\n */\nexport function scaleFromCenter(extent, value) {\n  const deltaX = ((extent[2] - extent[0]) / 2) * (value - 1);\n  const deltaY = ((extent[3] - extent[1]) / 2) * (value - 1);\n  extent[0] -= deltaX;\n  extent[2] += deltaX;\n  extent[1] -= deltaY;\n  extent[3] += deltaY;\n}\n\n/**\n * Determine if the segment between two coordinates intersects (crosses,\n * touches, or is contained by) the provided extent.\n * @param {Extent} extent The extent.\n * @param {import(\"./coordinate.js\").Coordinate} start Segment start coordinate.\n * @param {import(\"./coordinate.js\").Coordinate} end Segment end coordinate.\n * @return {boolean} The segment intersects the extent.\n */\nexport function intersectsSegment(extent, start, end) {\n  let intersects = false;\n  const startRel = coordinateRelationship(extent, start);\n  const endRel = coordinateRelationship(extent, end);\n  if (\n    startRel === Relationship.INTERSECTING ||\n    endRel === Relationship.INTERSECTING\n  ) {\n    intersects = true;\n  } else {\n    const minX = extent[0];\n    const minY = extent[1];\n    const maxX = extent[2];\n    const maxY = extent[3];\n    const startX = start[0];\n    const startY = start[1];\n    const endX = end[0];\n    const endY = end[1];\n    const slope = (endY - startY) / (endX - startX);\n    let x, y;\n    if (!!(endRel & Relationship.ABOVE) && !(startRel & Relationship.ABOVE)) {\n      // potentially intersects top\n      x = endX - (endY - maxY) / slope;\n      intersects = x >= minX && x <= maxX;\n    }\n    if (\n      !intersects &&\n      !!(endRel & Relationship.RIGHT) &&\n      !(startRel & Relationship.RIGHT)\n    ) {\n      // potentially intersects right\n      y = endY - (endX - maxX) * slope;\n      intersects = y >= minY && y <= maxY;\n    }\n    if (\n      !intersects &&\n      !!(endRel & Relationship.BELOW) &&\n      !(startRel & Relationship.BELOW)\n    ) {\n      // potentially intersects bottom\n      x = endX - (endY - minY) / slope;\n      intersects = x >= minX && x <= maxX;\n    }\n    if (\n      !intersects &&\n      !!(endRel & Relationship.LEFT) &&\n      !(startRel & Relationship.LEFT)\n    ) {\n      // potentially intersects left\n      y = endY - (endX - minX) * slope;\n      intersects = y >= minY && y <= maxY;\n    }\n  }\n  return intersects;\n}\n\n/**\n * Apply a transform function to the extent.\n * @param {Extent} extent Extent.\n * @param {import(\"./proj.js\").TransformFunction} transformFn Transform function.\n * Called with `[minX, minY, maxX, maxY]` extent coordinates.\n * @param {Extent} [dest] Destination extent.\n * @param {number} [stops] Number of stops per side used for the transform.\n * By default only the corners are used.\n * @return {Extent} Extent.\n * @api\n */\nexport function applyTransform(extent, transformFn, dest, stops) {\n  let coordinates = [];\n  if (stops > 1) {\n    const width = extent[2] - extent[0];\n    const height = extent[3] - extent[1];\n    for (let i = 0; i < stops; ++i) {\n      coordinates.push(\n        extent[0] + (width * i) / stops,\n        extent[1],\n        extent[2],\n        extent[1] + (height * i) / stops,\n        extent[2] - (width * i) / stops,\n        extent[3],\n        extent[0],\n        extent[3] - (height * i) / stops\n      );\n    }\n  } else {\n    coordinates = [\n      extent[0],\n      extent[1],\n      extent[2],\n      extent[1],\n      extent[2],\n      extent[3],\n      extent[0],\n      extent[3],\n    ];\n  }\n  transformFn(coordinates, coordinates, 2);\n  const xs = [];\n  const ys = [];\n  for (let i = 0, l = coordinates.length; i < l; i += 2) {\n    xs.push(coordinates[i]);\n    ys.push(coordinates[i + 1]);\n  }\n  return _boundingExtentXYs(xs, ys, dest);\n}\n\n/**\n * Modifies the provided extent in-place to be within the real world\n * extent.\n *\n * @param {Extent} extent Extent.\n * @param {import(\"./proj/Projection.js\").default} projection Projection\n * @return {Extent} The extent within the real world extent.\n */\nexport function wrapX(extent, projection) {\n  const projectionExtent = projection.getExtent();\n  const center = getCenter(extent);\n  if (\n    projection.canWrapX() &&\n    (center[0] < projectionExtent[0] || center[0] >= projectionExtent[2])\n  ) {\n    const worldWidth = getWidth(projectionExtent);\n    const worldsAway = Math.floor(\n      (center[0] - projectionExtent[0]) / worldWidth\n    );\n    const offset = worldsAway * worldWidth;\n    extent[0] -= offset;\n    extent[2] -= offset;\n  }\n  return extent;\n}\n\n/**\n * Fits the extent to the real world\n *\n * If the extent does not cross the anti meridian, this will return the extent in an array\n * If the extent crosses the anti meridian, the extent will be sliced, so each part fits within the\n * real world\n *\n *\n * @param {Extent} extent Extent.\n * @param {import(\"./proj/Projection.js\").default} projection Projection\n * @return {Array<Extent>} The extent within the real world extent.\n */\nexport function wrapAndSliceX(extent, projection) {\n  if (projection.canWrapX()) {\n    const projectionExtent = projection.getExtent();\n\n    if (!isFinite(extent[0]) || !isFinite(extent[2])) {\n      return [[projectionExtent[0], extent[1], projectionExtent[2], extent[3]]];\n    }\n\n    wrapX(extent, projection);\n    const worldWidth = getWidth(projectionExtent);\n\n    if (getWidth(extent) > worldWidth) {\n      // the extent wraps around on itself\n      return [[projectionExtent[0], extent[1], projectionExtent[2], extent[3]]];\n    } else if (extent[0] < projectionExtent[0]) {\n      // the extent crosses the anti meridian, so it needs to be sliced\n      return [\n        [extent[0] + worldWidth, extent[1], projectionExtent[2], extent[3]],\n        [projectionExtent[0], extent[1], extent[2], extent[3]],\n      ];\n    } else if (extent[2] > projectionExtent[2]) {\n      // the extent crosses the anti meridian, so it needs to be sliced\n      return [\n        [extent[0], extent[1], projectionExtent[2], extent[3]],\n        [projectionExtent[0], extent[1], extent[2] - worldWidth, extent[3]],\n      ];\n    }\n  }\n\n  return [extent];\n}\n","import {WORKER_OFFSCREEN_CANVAS} from './has.js';\n\n/**\n * @module ol/dom\n */\n\n//FIXME Move this function to the canvas module\n/**\n * Create an html canvas element and returns its 2d context.\n * @param {number} [width] Canvas width.\n * @param {number} [height] Canvas height.\n * @param {Array<HTMLCanvasElement>} [canvasPool] Canvas pool to take existing canvas from.\n * @param {CanvasRenderingContext2DSettings} [settings] CanvasRenderingContext2DSettings\n * @return {CanvasRenderingContext2D} The context.\n */\nexport function createCanvasContext2D(width, height, canvasPool, settings) {\n  /** @type {HTMLCanvasElement|OffscreenCanvas} */\n  let canvas;\n  if (canvasPool && canvasPool.length) {\n    canvas = canvasPool.shift();\n  } else if (WORKER_OFFSCREEN_CANVAS) {\n    canvas = new OffscreenCanvas(width || 300, height || 300);\n  } else {\n    canvas = document.createElement('canvas');\n  }\n  if (width) {\n    canvas.width = width;\n  }\n  if (height) {\n    canvas.height = height;\n  }\n  //FIXME Allow OffscreenCanvasRenderingContext2D as return type\n  return /** @type {CanvasRenderingContext2D} */ (\n    canvas.getContext('2d', settings)\n  );\n}\n\n/**\n * Releases canvas memory to avoid exceeding memory limits in Safari.\n * See https://pqina.nl/blog/total-canvas-memory-use-exceeds-the-maximum-limit/\n * @param {CanvasRenderingContext2D} context Context.\n */\nexport function releaseCanvas(context) {\n  const canvas = context.canvas;\n  canvas.width = 1;\n  canvas.height = 1;\n  context.clearRect(0, 0, 1, 1);\n}\n\n/**\n * Get the current computed width for the given element including margin,\n * padding and border.\n * Equivalent to jQuery's `$(el).outerWidth(true)`.\n * @param {!HTMLElement} element Element.\n * @return {number} The width.\n */\nexport function outerWidth(element) {\n  let width = element.offsetWidth;\n  const style = getComputedStyle(element);\n  width += parseInt(style.marginLeft, 10) + parseInt(style.marginRight, 10);\n\n  return width;\n}\n\n/**\n * Get the current computed height for the given element including margin,\n * padding and border.\n * Equivalent to jQuery's `$(el).outerHeight(true)`.\n * @param {!HTMLElement} element Element.\n * @return {number} The height.\n */\nexport function outerHeight(element) {\n  let height = element.offsetHeight;\n  const style = getComputedStyle(element);\n  height += parseInt(style.marginTop, 10) + parseInt(style.marginBottom, 10);\n\n  return height;\n}\n\n/**\n * @param {Node} newNode Node to replace old node\n * @param {Node} oldNode The node to be replaced\n */\nexport function replaceNode(newNode, oldNode) {\n  const parent = oldNode.parentNode;\n  if (parent) {\n    parent.replaceChild(newNode, oldNode);\n  }\n}\n\n/**\n * @param {Node} node The node to remove.\n * @return {Node|null} The node that was removed or null.\n */\nexport function removeNode(node) {\n  return node && node.parentNode ? node.parentNode.removeChild(node) : null;\n}\n\n/**\n * @param {Node} node The node to remove the children from.\n */\nexport function removeChildren(node) {\n  while (node.lastChild) {\n    node.removeChild(node.lastChild);\n  }\n}\n\n/**\n * Transform the children of a parent node so they match the\n * provided list of children.  This function aims to efficiently\n * remove, add, and reorder child nodes while maintaining a simple\n * implementation (it is not guaranteed to minimize DOM operations).\n * @param {Node} node The parent node whose children need reworking.\n * @param {Array<Node>} children The desired children.\n */\nexport function replaceChildren(node, children) {\n  const oldChildren = node.childNodes;\n\n  for (let i = 0; true; ++i) {\n    const oldChild = oldChildren[i];\n    const newChild = children[i];\n\n    // check if our work is done\n    if (!oldChild && !newChild) {\n      break;\n    }\n\n    // check if children match\n    if (oldChild === newChild) {\n      continue;\n    }\n\n    // check if a new child needs to be added\n    if (!oldChild) {\n      node.appendChild(newChild);\n      continue;\n    }\n\n    // check if an old child needs to be removed\n    if (!newChild) {\n      node.removeChild(oldChild);\n      --i;\n      continue;\n    }\n\n    // reorder\n    node.insertBefore(newChild, oldChild);\n  }\n}\n","/**\n * @module ol/css\n */\n\n/**\n * @typedef {Object} FontParameters\n * @property {string} style Style.\n * @property {string} variant Variant.\n * @property {string} weight Weight.\n * @property {string} size Size.\n * @property {string} lineHeight LineHeight.\n * @property {string} family Family.\n * @property {Array<string>} families Families.\n */\n\n/**\n * The CSS class for hidden feature.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_HIDDEN = 'ol-hidden';\n\n/**\n * The CSS class that we'll give the DOM elements to have them selectable.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_SELECTABLE = 'ol-selectable';\n\n/**\n * The CSS class that we'll give the DOM elements to have them unselectable.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_UNSELECTABLE = 'ol-unselectable';\n\n/**\n * The CSS class for unsupported feature.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_UNSUPPORTED = 'ol-unsupported';\n\n/**\n * The CSS class for controls.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_CONTROL = 'ol-control';\n\n/**\n * The CSS class that we'll give the DOM elements that are collapsed, i.e.\n * to those elements which usually can be expanded.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_COLLAPSED = 'ol-collapsed';\n\n/**\n * From https://stackoverflow.com/questions/10135697/regex-to-parse-any-css-font\n * @type {RegExp}\n */\nconst fontRegEx = new RegExp(\n  [\n    '^\\\\s*(?=(?:(?:[-a-z]+\\\\s*){0,2}(italic|oblique))?)',\n    '(?=(?:(?:[-a-z]+\\\\s*){0,2}(small-caps))?)',\n    '(?=(?:(?:[-a-z]+\\\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)',\n    '(?:(?:normal|\\\\1|\\\\2|\\\\3)\\\\s*){0,3}((?:xx?-)?',\n    '(?:small|large)|medium|smaller|larger|[\\\\.\\\\d]+(?:\\\\%|in|[cem]m|ex|p[ctx]))',\n    '(?:\\\\s*\\\\/\\\\s*(normal|[\\\\.\\\\d]+(?:\\\\%|in|[cem]m|ex|p[ctx])?))',\n    '?\\\\s*([-,\\\\\"\\\\\\'\\\\sa-z]+?)\\\\s*$',\n  ].join(''),\n  'i'\n);\nconst fontRegExMatchIndex = [\n  'style',\n  'variant',\n  'weight',\n  'size',\n  'lineHeight',\n  'family',\n];\n\n/**\n * Get the list of font families from a font spec.  Note that this doesn't work\n * for font families that have commas in them.\n * @param {string} fontSpec The CSS font property.\n * @return {FontParameters|null} The font parameters (or null if the input spec is invalid).\n */\nexport const getFontParameters = function (fontSpec) {\n  const match = fontSpec.match(fontRegEx);\n  if (!match) {\n    return null;\n  }\n  const style = /** @type {FontParameters} */ ({\n    lineHeight: 'normal',\n    size: '1.2em',\n    style: 'normal',\n    weight: 'normal',\n    variant: 'normal',\n  });\n  for (let i = 0, ii = fontRegExMatchIndex.length; i < ii; ++i) {\n    const value = match[i + 1];\n    if (value !== undefined) {\n      style[fontRegExMatchIndex[i]] = value;\n    }\n  }\n  style.families = style.family.split(/,\\s?/);\n  return style;\n};\n","/**\n * @module ol/MapEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered after a map frame is rendered.\n   * @event module:ol/MapEvent~MapEvent#postrender\n   * @api\n   */\n  POSTRENDER: 'postrender',\n\n  /**\n   * Triggered when the map starts moving.\n   * @event module:ol/MapEvent~MapEvent#movestart\n   * @api\n   */\n  MOVESTART: 'movestart',\n\n  /**\n   * Triggered after the map is moved.\n   * @event module:ol/MapEvent~MapEvent#moveend\n   * @api\n   */\n  MOVEEND: 'moveend',\n\n  /**\n   * Triggered when loading of additional map data (tiles, images, features) starts.\n   * @event module:ol/MapEvent~MapEvent#loadstart\n   * @api\n   */\n  LOADSTART: 'loadstart',\n\n  /**\n   * Triggered when loading of additional map data has completed.\n   * @event module:ol/MapEvent~MapEvent#loadend\n   * @api\n   */\n  LOADEND: 'loadend',\n};\n\n/***\n * @typedef {'postrender'|'movestart'|'moveend'|'loadstart'|'loadend'} Types\n */\n","/**\n * @module ol/Overlay\n */\nimport BaseObject from './Object.js';\nimport MapEventType from './MapEventType.js';\nimport {CLASS_SELECTABLE} from './css.js';\nimport {containsExtent} from './extent.js';\nimport {listen, unlistenByKey} from './events.js';\nimport {outerHeight, outerWidth, removeChildren, removeNode} from './dom.js';\n\n/**\n * @typedef {'bottom-left' | 'bottom-center' | 'bottom-right' | 'center-left' | 'center-center' | 'center-right' | 'top-left' | 'top-center' | 'top-right'} Positioning\n * The overlay position: `'bottom-left'`, `'bottom-center'`,  `'bottom-right'`,\n * `'center-left'`, `'center-center'`, `'center-right'`, `'top-left'`,\n * `'top-center'`, or `'top-right'`.\n */\n\n/**\n * @typedef {Object} Options\n * @property {number|string} [id] Set the overlay id. The overlay id can be used\n * with the {@link module:ol/Map~Map#getOverlayById} method.\n * @property {HTMLElement} [element] The overlay element.\n * @property {Array<number>} [offset=[0, 0]] Offsets in pixels used when positioning\n * the overlay. The first element in the\n * array is the horizontal offset. A positive value shifts the overlay right.\n * The second element in the array is the vertical offset. A positive value\n * shifts the overlay down.\n * @property {import(\"./coordinate.js\").Coordinate} [position] The overlay position\n * in map projection.\n * @property {Positioning} [positioning='top-left'] Defines how\n * the overlay is actually positioned with respect to its `position` property.\n * Possible values are `'bottom-left'`, `'bottom-center'`, `'bottom-right'`,\n * `'center-left'`, `'center-center'`, `'center-right'`, `'top-left'`,\n * `'top-center'`, and `'top-right'`.\n * @property {boolean} [stopEvent=true] Whether event propagation to the map\n * viewport should be stopped. If `true` the overlay is placed in the same\n * container as that of the controls (CSS class name\n * `ol-overlaycontainer-stopevent`); if `false` it is placed in the container\n * with CSS class name specified by the `className` property.\n * @property {boolean} [insertFirst=true] Whether the overlay is inserted first\n * in the overlay container, or appended. If the overlay is placed in the same\n * container as that of the controls (see the `stopEvent` option) you will\n * probably set `insertFirst` to `true` so the overlay is displayed below the\n * controls.\n * @property {PanIntoViewOptions|boolean} [autoPan=false] Pan the map when calling\n * `setPosition`, so that the overlay is entirely visible in the current viewport.\n * @property {string} [className='ol-overlay-container ol-selectable'] CSS class\n * name.\n */\n\n/**\n * @typedef {Object} PanOptions\n * @property {number} [duration=1000] The duration of the animation in\n * milliseconds.\n * @property {function(number):number} [easing] The easing function to use. Can\n * be one from {@link module:ol/easing} or a custom function.\n * Default is {@link module:ol/easing.inAndOut}.\n */\n\n/**\n * @typedef {Object} PanIntoViewOptions\n * @property {PanOptions} [animation={}] The animation parameters for the pan\n * @property {number} [margin=20] The margin (in pixels) between the\n * overlay and the borders of the map when panning into view.\n */\n\n/**\n * @enum {string}\n * @protected\n */\nconst Property = {\n  ELEMENT: 'element',\n  MAP: 'map',\n  OFFSET: 'offset',\n  POSITION: 'position',\n  POSITIONING: 'positioning',\n};\n\n/**\n * @typedef {import(\"./ObjectEventType\").Types|'change:element'|'change:map'|'change:offset'|'change:position'|\n *   'change:positioning'} OverlayObjectEventTypes\n */\n\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *   import(\"./Observable\").OnSignature<OverlayObjectEventTypes, import(\"./Object\").ObjectEvent, Return> &\n *   import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|OverlayObjectEventTypes, Return>} OverlayOnSignature\n */\n\n/**\n * @classdesc\n * An element to be displayed over the map and attached to a single map\n * location.  Like {@link module:ol/control/Control~Control}, Overlays are\n * visible widgets. Unlike Controls, they are not in a fixed position on the\n * screen, but are tied to a geographical coordinate, so panning the map will\n * move an Overlay but not a Control.\n *\n * Example:\n *\n *     import Overlay from 'ol/Overlay.js';\n *\n *     // ...\n *     const popup = new Overlay({\n *       element: document.getElementById('popup'),\n *     });\n *     popup.setPosition(coordinate);\n *     map.addOverlay(popup);\n *\n * @api\n */\nclass Overlay extends BaseObject {\n  /**\n   * @param {Options} options Overlay options.\n   */\n  constructor(options) {\n    super();\n\n    /***\n     * @type {OverlayOnSignature<import(\"./events\").EventsKey>}\n     */\n    this.on;\n\n    /***\n     * @type {OverlayOnSignature<import(\"./events\").EventsKey>}\n     */\n    this.once;\n\n    /***\n     * @type {OverlayOnSignature<void>}\n     */\n    this.un;\n\n    /**\n     * @protected\n     * @type {Options}\n     */\n    this.options = options;\n\n    /**\n     * @protected\n     * @type {number|string|undefined}\n     */\n    this.id = options.id;\n\n    /**\n     * @protected\n     * @type {boolean}\n     */\n    this.insertFirst =\n      options.insertFirst !== undefined ? options.insertFirst : true;\n\n    /**\n     * @protected\n     * @type {boolean}\n     */\n    this.stopEvent = options.stopEvent !== undefined ? options.stopEvent : true;\n\n    /**\n     * @protected\n     * @type {HTMLElement}\n     */\n    this.element = document.createElement('div');\n    this.element.className =\n      options.className !== undefined\n        ? options.className\n        : 'ol-overlay-container ' + CLASS_SELECTABLE;\n    this.element.style.position = 'absolute';\n    this.element.style.pointerEvents = 'auto';\n\n    /**\n     * @protected\n     * @type {PanIntoViewOptions|undefined}\n     */\n    this.autoPan = options.autoPan === true ? {} : options.autoPan || undefined;\n\n    /**\n     * @protected\n     * @type {{transform_: string,\n     *         visible: boolean}}\n     */\n    this.rendered = {\n      transform_: '',\n      visible: true,\n    };\n\n    /**\n     * @protected\n     * @type {?import(\"./events.js\").EventsKey}\n     */\n    this.mapPostrenderListenerKey = null;\n\n    this.addChangeListener(Property.ELEMENT, this.handleElementChanged);\n    this.addChangeListener(Property.MAP, this.handleMapChanged);\n    this.addChangeListener(Property.OFFSET, this.handleOffsetChanged);\n    this.addChangeListener(Property.POSITION, this.handlePositionChanged);\n    this.addChangeListener(Property.POSITIONING, this.handlePositioningChanged);\n\n    if (options.element !== undefined) {\n      this.setElement(options.element);\n    }\n\n    this.setOffset(options.offset !== undefined ? options.offset : [0, 0]);\n\n    this.setPositioning(options.positioning || 'top-left');\n\n    if (options.position !== undefined) {\n      this.setPosition(options.position);\n    }\n  }\n\n  /**\n   * Get the DOM element of this overlay.\n   * @return {HTMLElement|undefined} The Element containing the overlay.\n   * @observable\n   * @api\n   */\n  getElement() {\n    return /** @type {HTMLElement|undefined} */ (this.get(Property.ELEMENT));\n  }\n\n  /**\n   * Get the overlay identifier which is set on constructor.\n   * @return {number|string|undefined} Id.\n   * @api\n   */\n  getId() {\n    return this.id;\n  }\n\n  /**\n   * Get the map associated with this overlay.\n   * @return {import(\"./Map.js\").default|null} The map that the\n   * overlay is part of.\n   * @observable\n   * @api\n   */\n  getMap() {\n    return /** @type {import(\"./Map.js\").default|null} */ (\n      this.get(Property.MAP) || null\n    );\n  }\n\n  /**\n   * Get the offset of this overlay.\n   * @return {Array<number>} The offset.\n   * @observable\n   * @api\n   */\n  getOffset() {\n    return /** @type {Array<number>} */ (this.get(Property.OFFSET));\n  }\n\n  /**\n   * Get the current position of this overlay.\n   * @return {import(\"./coordinate.js\").Coordinate|undefined} The spatial point that the overlay is\n   *     anchored at.\n   * @observable\n   * @api\n   */\n  getPosition() {\n    return /** @type {import(\"./coordinate.js\").Coordinate|undefined} */ (\n      this.get(Property.POSITION)\n    );\n  }\n\n  /**\n   * Get the current positioning of this overlay.\n   * @return {Positioning} How the overlay is positioned\n   *     relative to its point on the map.\n   * @observable\n   * @api\n   */\n  getPositioning() {\n    return /** @type {Positioning} */ (this.get(Property.POSITIONING));\n  }\n\n  /**\n   * @protected\n   */\n  handleElementChanged() {\n    removeChildren(this.element);\n    const element = this.getElement();\n    if (element) {\n      this.element.appendChild(element);\n    }\n  }\n\n  /**\n   * @protected\n   */\n  handleMapChanged() {\n    if (this.mapPostrenderListenerKey) {\n      removeNode(this.element);\n      unlistenByKey(this.mapPostrenderListenerKey);\n      this.mapPostrenderListenerKey = null;\n    }\n    const map = this.getMap();\n    if (map) {\n      this.mapPostrenderListenerKey = listen(\n        map,\n        MapEventType.POSTRENDER,\n        this.render,\n        this\n      );\n      this.updatePixelPosition();\n      const container = this.stopEvent\n        ? map.getOverlayContainerStopEvent()\n        : map.getOverlayContainer();\n      if (this.insertFirst) {\n        container.insertBefore(this.element, container.childNodes[0] || null);\n      } else {\n        container.appendChild(this.element);\n      }\n      this.performAutoPan();\n    }\n  }\n\n  /**\n   * @protected\n   */\n  render() {\n    this.updatePixelPosition();\n  }\n\n  /**\n   * @protected\n   */\n  handleOffsetChanged() {\n    this.updatePixelPosition();\n  }\n\n  /**\n   * @protected\n   */\n  handlePositionChanged() {\n    this.updatePixelPosition();\n    this.performAutoPan();\n  }\n\n  /**\n   * @protected\n   */\n  handlePositioningChanged() {\n    this.updatePixelPosition();\n  }\n\n  /**\n   * Set the DOM element to be associated with this overlay.\n   * @param {HTMLElement|undefined} element The Element containing the overlay.\n   * @observable\n   * @api\n   */\n  setElement(element) {\n    this.set(Property.ELEMENT, element);\n  }\n\n  /**\n   * Set the map to be associated with this overlay.\n   * @param {import(\"./Map.js\").default|null} map The map that the\n   * overlay is part of. Pass `null` to just remove the overlay from the current map.\n   * @observable\n   * @api\n   */\n  setMap(map) {\n    this.set(Property.MAP, map);\n  }\n\n  /**\n   * Set the offset for this overlay.\n   * @param {Array<number>} offset Offset.\n   * @observable\n   * @api\n   */\n  setOffset(offset) {\n    this.set(Property.OFFSET, offset);\n  }\n\n  /**\n   * Set the position for this overlay. If the position is `undefined` the\n   * overlay is hidden.\n   * @param {import(\"./coordinate.js\").Coordinate|undefined} position The spatial point that the overlay\n   *     is anchored at.\n   * @observable\n   * @api\n   */\n  setPosition(position) {\n    this.set(Property.POSITION, position);\n  }\n\n  /**\n   * Pan the map so that the overlay is entirely visible in the current viewport\n   * (if necessary) using the configured autoPan parameters\n   * @protected\n   */\n  performAutoPan() {\n    if (this.autoPan) {\n      this.panIntoView(this.autoPan);\n    }\n  }\n\n  /**\n   * Pan the map so that the overlay is entirely visible in the current viewport\n   * (if necessary).\n   * @param {PanIntoViewOptions} [panIntoViewOptions] Options for the pan action\n   * @api\n   */\n  panIntoView(panIntoViewOptions) {\n    const map = this.getMap();\n\n    if (!map || !map.getTargetElement() || !this.get(Property.POSITION)) {\n      return;\n    }\n\n    const mapRect = this.getRect(map.getTargetElement(), map.getSize());\n    const element = this.getElement();\n    const overlayRect = this.getRect(element, [\n      outerWidth(element),\n      outerHeight(element),\n    ]);\n\n    panIntoViewOptions = panIntoViewOptions || {};\n\n    const myMargin =\n      panIntoViewOptions.margin === undefined ? 20 : panIntoViewOptions.margin;\n    if (!containsExtent(mapRect, overlayRect)) {\n      // the overlay is not completely inside the viewport, so pan the map\n      const offsetLeft = overlayRect[0] - mapRect[0];\n      const offsetRight = mapRect[2] - overlayRect[2];\n      const offsetTop = overlayRect[1] - mapRect[1];\n      const offsetBottom = mapRect[3] - overlayRect[3];\n\n      const delta = [0, 0];\n      if (offsetLeft < 0) {\n        // move map to the left\n        delta[0] = offsetLeft - myMargin;\n      } else if (offsetRight < 0) {\n        // move map to the right\n        delta[0] = Math.abs(offsetRight) + myMargin;\n      }\n      if (offsetTop < 0) {\n        // move map up\n        delta[1] = offsetTop - myMargin;\n      } else if (offsetBottom < 0) {\n        // move map down\n        delta[1] = Math.abs(offsetBottom) + myMargin;\n      }\n\n      if (delta[0] !== 0 || delta[1] !== 0) {\n        const center = /** @type {import(\"./coordinate.js\").Coordinate} */ (\n          map.getView().getCenterInternal()\n        );\n        const centerPx = map.getPixelFromCoordinateInternal(center);\n        if (!centerPx) {\n          return;\n        }\n        const newCenterPx = [centerPx[0] + delta[0], centerPx[1] + delta[1]];\n\n        const panOptions = panIntoViewOptions.animation || {};\n        map.getView().animateInternal({\n          center: map.getCoordinateFromPixelInternal(newCenterPx),\n          duration: panOptions.duration,\n          easing: panOptions.easing,\n        });\n      }\n    }\n  }\n\n  /**\n   * Get the extent of an element relative to the document\n   * @param {HTMLElement} element The element.\n   * @param {import(\"./size.js\").Size} size The size of the element.\n   * @return {import(\"./extent.js\").Extent} The extent.\n   * @protected\n   */\n  getRect(element, size) {\n    const box = element.getBoundingClientRect();\n    const offsetX = box.left + window.pageXOffset;\n    const offsetY = box.top + window.pageYOffset;\n    return [offsetX, offsetY, offsetX + size[0], offsetY + size[1]];\n  }\n\n  /**\n   * Set the positioning for this overlay.\n   * @param {Positioning} positioning how the overlay is\n   *     positioned relative to its point on the map.\n   * @observable\n   * @api\n   */\n  setPositioning(positioning) {\n    this.set(Property.POSITIONING, positioning);\n  }\n\n  /**\n   * Modify the visibility of the element.\n   * @param {boolean} visible Element visibility.\n   * @protected\n   */\n  setVisible(visible) {\n    if (this.rendered.visible !== visible) {\n      this.element.style.display = visible ? '' : 'none';\n      this.rendered.visible = visible;\n    }\n  }\n\n  /**\n   * Update pixel position.\n   * @protected\n   */\n  updatePixelPosition() {\n    const map = this.getMap();\n    const position = this.getPosition();\n    if (!map || !map.isRendered() || !position) {\n      this.setVisible(false);\n      return;\n    }\n\n    const pixel = map.getPixelFromCoordinate(position);\n    const mapSize = map.getSize();\n    this.updateRenderedPosition(pixel, mapSize);\n  }\n\n  /**\n   * @param {import(\"./pixel.js\").Pixel} pixel The pixel location.\n   * @param {import(\"./size.js\").Size|undefined} mapSize The map size.\n   * @protected\n   */\n  updateRenderedPosition(pixel, mapSize) {\n    const style = this.element.style;\n    const offset = this.getOffset();\n\n    const positioning = this.getPositioning();\n\n    this.setVisible(true);\n\n    const x = Math.round(pixel[0] + offset[0]) + 'px';\n    const y = Math.round(pixel[1] + offset[1]) + 'px';\n    let posX = '0%';\n    let posY = '0%';\n    if (\n      positioning == 'bottom-right' ||\n      positioning == 'center-right' ||\n      positioning == 'top-right'\n    ) {\n      posX = '-100%';\n    } else if (\n      positioning == 'bottom-center' ||\n      positioning == 'center-center' ||\n      positioning == 'top-center'\n    ) {\n      posX = '-50%';\n    }\n    if (\n      positioning == 'bottom-left' ||\n      positioning == 'bottom-center' ||\n      positioning == 'bottom-right'\n    ) {\n      posY = '-100%';\n    } else if (\n      positioning == 'center-left' ||\n      positioning == 'center-center' ||\n      positioning == 'center-right'\n    ) {\n      posY = '-50%';\n    }\n    const transform = `translate(${posX}, ${posY}) translate(${x}, ${y})`;\n    if (this.rendered.transform_ != transform) {\n      this.rendered.transform_ = transform;\n      style.transform = transform;\n    }\n  }\n\n  /**\n   * returns the options this Overlay has been created with\n   * @return {Options} overlay options\n   */\n  getOptions() {\n    return this.options;\n  }\n}\n\nexport default Overlay;\n","export default function createElement(tagName, attrs = {}, ...children) {\r\n    if (typeof tagName === 'function') return tagName(attrs, children);\r\n\r\n    const elem =\r\n        tagName === null\r\n            ? new DocumentFragment()\r\n            : document.createElement(tagName);\r\n\r\n    Object.entries(attrs || {}).forEach(([name, value]) => {\r\n        if (\r\n            typeof value !== undefined &&\r\n            value !== null &&\r\n            value !== undefined\r\n        ) {\r\n            if (name.startsWith('on') && name.toLowerCase() in window)\r\n                elem.addEventListener(name.toLowerCase().substr(2), value);\r\n            else {\r\n                if (name === 'className')\r\n                    elem.setAttribute('class', value.toString());\r\n                else if (name === 'htmlFor')\r\n                    elem.setAttribute('for', value.toString());\r\n                else elem.setAttribute(name, value.toString());\r\n            }\r\n        }\r\n    });\r\n\r\n    for (const child of children) {\r\n        if (!child) continue;\r\n        if (Array.isArray(child)) elem.append(...child);\r\n        else {\r\n            if (child.nodeType === undefined) elem.innerHTML += child;\r\n            else elem.appendChild(child);\r\n        }\r\n    }\r\n    return elem;\r\n}\r\n","var img = \"data:image/svg+xml,%3csvg version='1.1' xmlns='http://www.w3.org/2000/svg' width='512' height='512' viewBox='0 0 512 512'%3e%3cpath d='M240 352h-240v128h480v-128h-240zM448 416h-64v-32h64v32zM112 160l128-128 128 128h-80v160h-96v-160z'%3e%3c/path%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg version='1.1' xmlns='http://www.w3.org/2000/svg' width='768' height='768' viewBox='0 0 768 768'%3e %3cpath d='M663 225l-58.5 58.5-120-120 58.5-58.5q9-9 22.5-9t22.5 9l75 75q9 9 9 22.5t-9 22.5zM96 552l354-354 120 120-354 354h-120v-120z'%3e%3c/path%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg version='1.1' xmlns='http://www.w3.org/2000/svg' width='768' height='768' viewBox='0 0 768 768'%3e%3cpath d='M384 288q39 0 67.5 28.5t28.5 67.5-28.5 67.5-67.5 28.5-67.5-28.5-28.5-67.5 28.5-67.5 67.5-28.5zM384 544.5q66 0 113.25-47.25t47.25-113.25-47.25-113.25-113.25-47.25-113.25 47.25-47.25 113.25 47.25 113.25 113.25 47.25zM384 144q118.5 0 214.5 66t138 174q-42 108-138 174t-214.5 66-214.5-66-138-174q42-108 138-174t214.5-66z'%3e%3c/path%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg version='1.1' xmlns='http://www.w3.org/2000/svg' width='768' height='768' viewBox='0 0 768 768'%3e%3cpath d='M379.5 288h4.5q39 0 67.5 28.5t28.5 67.5v6zM241.5 313.5q-18 36-18 70.5 0 66 47.25 113.25t113.25 47.25q34.5 0 70.5-18l-49.5-49.5q-12 3-21 3-39 0-67.5-28.5t-28.5-67.5q0-9 3-21zM64.5 136.5l40.5-40.5 567 567-40.5 40.5q-7.5-7.5-47.25-46.5t-60.75-60q-64.5 27-139.5 27-118.5 0-214.5-66t-138-174q16.5-39 51.75-86.25t68.25-72.75q-18-18-50.25-51t-36.75-37.5zM384 223.5q-30 0-58.5 12l-69-69q58.5-22.5 127.5-22.5 118.5 0 213.75 66t137.25 174q-36 88.5-109.5 151.5l-93-93q12-28.5 12-58.5 0-66-47.25-113.25t-113.25-47.25z'%3e%3c/path%3e%3c/svg%3e\";\n  export default img;","import { Observable } from 'ol';\r\nimport { SelectEvent } from 'ol/interaction/Select';\r\n\r\nimport { Options, WfsLayer, WmsLayer } from '../ol-wfst';\r\nimport myPragma from '../myPragma';\r\n\r\nimport uploadSvg from '../assets/images/upload.svg';\r\nimport drawSvg from '../assets/images/draw.svg';\r\nimport visibilityOn from '../assets/images/visibilityOn.svg';\r\nimport visibilityOff from '../assets/images/visibilityOff.svg';\r\n\r\nimport { GeometryType } from '../@enums';\r\nimport {\r\n    getActiveLayerToInsertEls,\r\n    getStoredMapLayers,\r\n    setActiveLayerToInsertEls\r\n} from './state';\r\nimport { I18N } from './i18n';\r\nimport Uploads from './Uploads';\r\nimport { BaseLayerProperty } from './base/BaseLayer';\r\n\r\n/**\r\n * Removes in the DOM the class of the tools\r\n * @private\r\n */\r\nexport const resetStateButtons = (): void => {\r\n    const activeBtn = document.querySelector(\r\n        '.ol-wfst--tools-control-btn.wfst--active'\r\n    );\r\n    if (activeBtn) {\r\n        activeBtn.classList.remove('wfst--active');\r\n    }\r\n};\r\n\r\nexport const activateModeButtons = () => {\r\n    const btn = document.querySelector('.ol-wfst--tools-control-btn-edit');\r\n    if (btn) {\r\n        btn.classList.add('wfst--active');\r\n    }\r\n};\r\n\r\nexport const activateDrawButton = () => {\r\n    const btn = document.querySelector('.ol-wfst--tools-control-btn-draw');\r\n    if (btn) {\r\n        btn.classList.add('wfst--active');\r\n    }\r\n};\r\n\r\nexport const visibleLayer = (bool = true) => {\r\n    const btn = document.querySelector('.ol-wfst--tools-control-btn-draw');\r\n    if (btn) {\r\n        btn.classList.add('wfst--active');\r\n    }\r\n};\r\n\r\nexport default class LayersControl extends Observable {\r\n    protected _uploads: Uploads;\r\n    protected _uploadFormats: Options['uploadFormats'];\r\n\r\n    constructor(uploads: Uploads, uploadFormats: Options['uploadFormats']) {\r\n        super();\r\n\r\n        this._uploads = uploads;\r\n        this._uploadFormats = uploadFormats;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param layer\r\n     * @public\r\n     */\r\n    addLayerEl(layer: WfsLayer | WmsLayer) {\r\n        const container = document.querySelector(\r\n            '.wfst--tools-control--select-layers'\r\n        );\r\n\r\n        const layerName = layer.get(BaseLayerProperty.NAME) as string;\r\n        const checked =\r\n            layer === getActiveLayerToInsertEls() ? { checked: 'checked' } : {};\r\n\r\n        const input = (\r\n            <input\r\n                value={layerName}\r\n                id={`wfst--${layerName}`}\r\n                type=\"radio\"\r\n                className=\"ol-wfst--tools-control-input\"\r\n                name=\"wfst--select-layer\"\r\n                {...checked}\r\n                onchange={(evt) => this._layerChangeHandler(evt, layer)}\r\n            />\r\n        );\r\n\r\n        const layerDom = (\r\n            <div\r\n                className={`wfst--layer-control \r\n                            ${layer.getVisible() ? 'ol-wfst--visible-on' : ''}\r\n                            ${\r\n                                layer === getActiveLayerToInsertEls()\r\n                                    ? 'ol-wfst--selected-on'\r\n                                    : ''\r\n                            }`}\r\n                data-layer={layerName}\r\n            >\r\n                <div className=\"ol-wfst--tools-control-visible\">\r\n                    <span\r\n                        className=\"ol-wfst--tools-control-visible-btn ol-wfst--visible-btn-on\"\r\n                        title={I18N.labels.toggleVisibility}\r\n                        onclick={(evt) => this._visibilityClickHandler(evt)}\r\n                    >\r\n                        <img src={visibilityOn} />\r\n                    </span>\r\n                    <span\r\n                        className=\"ol-wfst--tools-control-visible-btn ol-wfst--visible-btn-off\"\r\n                        title={I18N.labels.toggleVisibility}\r\n                        onclick={(evt) => this._visibilityClickHandler(evt)}\r\n                    >\r\n                        <img src={visibilityOff} />\r\n                    </span>\r\n                </div>\r\n                <label htmlFor={`wfst--${layerName}`}>\r\n                    {input}\r\n                    <span\r\n                        title={layer.getDescribeFeatureType()._parsed.geomType}\r\n                    >\r\n                        {layer.get(BaseLayerProperty.LABEL)}\r\n                    </span>\r\n                </label>\r\n            </div>\r\n        );\r\n\r\n        container.appendChild(layerDom);\r\n\r\n        if (layer === getActiveLayerToInsertEls()) {\r\n            input.dispatchEvent(new Event('change'));\r\n        }\r\n\r\n        return layerDom;\r\n    }\r\n\r\n    /**\r\n     * Update geom Types availibles to select for this layer\r\n     *\r\n     * @param layerName\r\n     * @param geomDrawTypeSelected\r\n     * @private\r\n     */\r\n    _changeStateSelect(\r\n        layer: WmsLayer | WfsLayer,\r\n        geomDrawTypeSelected: GeometryType = null\r\n    ): GeometryType {\r\n        /**\r\n         * Set the geometry type in the select according to the geometry of\r\n         * the layer in the geoserver and disable what does not correspond.\r\n         *\r\n         * @param value\r\n         * @param options\r\n         * @private\r\n         */\r\n        const setSelectState = (\r\n            value: GeometryType,\r\n            options: Array<string> | 'all'\r\n        ): void => {\r\n            Array.from(selectDraw.options).forEach(\r\n                (option: HTMLOptionElement) => {\r\n                    option.selected = option.value === value ? true : false;\r\n                    option.disabled =\r\n                        options === 'all'\r\n                            ? false\r\n                            : options.includes(option.value)\r\n                            ? false\r\n                            : true;\r\n                    option.title = option.disabled\r\n                        ? I18N.labels.geomTypeNotSupported\r\n                        : '';\r\n                }\r\n            );\r\n        };\r\n\r\n        const selectDraw = document.querySelector(\r\n            '.wfst--tools-control--select-draw'\r\n        ) as HTMLSelectElement;\r\n\r\n        let drawType: GeometryType;\r\n\r\n        if (selectDraw) {\r\n            const geomLayer = layer.getDescribeFeatureType()._parsed.geomType;\r\n\r\n            if (geomDrawTypeSelected) {\r\n                drawType = selectDraw.value as GeometryType;\r\n            } else {\r\n                if (geomLayer === GeometryType.GeometryCollection) {\r\n                    drawType = GeometryType.LineString; // Default drawing type for GeometryCollection\r\n                    setSelectState(drawType, 'all');\r\n                } else if (geomLayer === GeometryType.LinearRing) {\r\n                    drawType = GeometryType.LineString; // Default drawing type for GeometryCollection\r\n                    setSelectState(drawType, [\r\n                        GeometryType.Circle,\r\n                        GeometryType.LinearRing,\r\n                        GeometryType.Polygon\r\n                    ]);\r\n                    selectDraw.value = drawType;\r\n                } else {\r\n                    drawType = geomLayer;\r\n                    setSelectState(drawType, [geomLayer]);\r\n                }\r\n            }\r\n        }\r\n\r\n        return drawType;\r\n    }\r\n\r\n    _visibilityClickHandler(evt) {\r\n        const btn = evt.currentTarget;\r\n        const parentDiv = btn.closest('.wfst--layer-control') as HTMLElement;\r\n        const layerName = parentDiv.dataset['layer'];\r\n        parentDiv.classList.toggle('ol-wfst--visible-on');\r\n        const layer = getStoredMapLayers()[layerName];\r\n        if (parentDiv.classList.contains('ol-wfst--visible-on')) {\r\n            layer.setVisible(true);\r\n        } else {\r\n            layer.setVisible(false);\r\n        }\r\n    }\r\n\r\n    _layerChangeHandler(evt, layer) {\r\n        const radioInput = evt.currentTarget;\r\n        const parentDiv = radioInput.closest(\r\n            '.wfst--layer-control'\r\n        ) as HTMLElement;\r\n\r\n        // Deselect DOM previous layer\r\n        const selected = document.querySelector('.ol-wfst--selected-on');\r\n\r\n        if (selected) selected.classList.remove('ol-wfst--selected-on');\r\n\r\n        // Select this layer\r\n        parentDiv.classList.add('ol-wfst--selected-on');\r\n        setActiveLayerToInsertEls(layer);\r\n        this._changeStateSelect(layer);\r\n    }\r\n\r\n    render(): HTMLElement {\r\n        return (\r\n            <>\r\n                <div className=\"wfst--tools-control--head\">\r\n                    {this._uploads && (\r\n                        <div>\r\n                            <input\r\n                                id=\"ol-wfst--upload\"\r\n                                type=\"file\"\r\n                                accept={this._uploadFormats}\r\n                                onchange={(evt: InputEvent) =>\r\n                                    this._uploads.process(evt)\r\n                                }\r\n                            />\r\n                            <label\r\n                                className=\"ol-wfst--tools-control-btn ol-wfst--tools-control-btn-upload\"\r\n                                htmlFor=\"ol-wfst--upload\"\r\n                                title={I18N.labels.uploadToLayer}\r\n                            >\r\n                                <img src={uploadSvg} />\r\n                            </label>\r\n                        </div>\r\n                    )}\r\n                    <div className=\"ol-wfst--tools-control-draw-cnt\">\r\n                        <button\r\n                            className=\"ol-wfst--tools-control-btn ol-wfst--tools-control-btn-draw\"\r\n                            type=\"button\"\r\n                            title={I18N.labels.addElement}\r\n                            onclick={() => {\r\n                                this.dispatchEvent('drawMode');\r\n                            }}\r\n                        >\r\n                            <img src={drawSvg} />\r\n                        </button>\r\n                        <select\r\n                            title={I18N.labels.selectDrawType}\r\n                            className=\"wfst--tools-control--select-draw\"\r\n                            onchange={(evt: SelectEvent) => {\r\n                                const selectedValue = evt.target\r\n                                    .value as GeometryType;\r\n                                this._changeStateSelect(\r\n                                    getActiveLayerToInsertEls(),\r\n                                    selectedValue\r\n                                );\r\n                                this.dispatchEvent('changeGeom');\r\n                            }}\r\n                        >\r\n                            {[\r\n                                GeometryType.Point,\r\n                                GeometryType.MultiPoint,\r\n                                GeometryType.LineString,\r\n                                GeometryType.MultiLineString,\r\n                                GeometryType.Polygon,\r\n                                GeometryType.MultiPolygon,\r\n                                GeometryType.Circle\r\n                            ].map((type) => {\r\n                                // Show all options, but enable only the accepted ones\r\n                                return <option value={type}>{type}</option>;\r\n                            })}\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n                <div className=\"wfst--tools-control--select-layers\"></div>\r\n            </>\r\n        );\r\n    }\r\n}\r\n","import VectorLayer from 'ol/layer/Vector';\r\nimport VectorSource from 'ol/source/Vector';\r\n\r\nlet editLayer = new VectorLayer({\r\n    source: new VectorSource(),\r\n    zIndex: 100\r\n});\r\n\r\nexport const getEditLayer = (): VectorLayer<VectorSource> => {\r\n    return editLayer;\r\n};\r\n","// Ol\r\nimport {\r\n    Geometry,\r\n    LineString,\r\n    MultiLineString,\r\n    MultiPoint,\r\n    MultiPolygon,\r\n    Point,\r\n    Polygon\r\n} from 'ol/geom';\r\nimport { Feature, Observable } from 'ol';\r\nimport { GeoJSON, KML, WFS } from 'ol/format';\r\n\r\n// External\r\nimport Modal from 'modal-vanilla';\r\n\r\nimport { Options } from '../ol-wfst';\r\nimport { showError } from './errors';\r\nimport { resetStateButtons } from './LayersControl';\r\nimport { getEditLayer } from './editLayer';\r\nimport { getActiveLayerToInsertEls, getMap } from './state';\r\nimport { GeometryType } from '../@enums';\r\nimport { I18N } from './i18n';\r\nimport { VectorSourceEvent } from 'ol/source/Vector';\r\nimport { BaseLayerProperty } from './base/BaseLayer';\r\n\r\nexport default class Uploads extends Observable {\r\n    protected _options: Options;\r\n\r\n    // Formats\r\n    protected _formatWFS: WFS;\r\n    protected _formatGeoJSON: GeoJSON;\r\n    protected _formatKml: KML;\r\n    protected _xs: XMLSerializer;\r\n\r\n    protected _processUpload: Options['processUpload'];\r\n\r\n    constructor(options: Options) {\r\n        super();\r\n\r\n        this._options = options;\r\n\r\n        this._processUpload = options.processUpload;\r\n\r\n        // Formats\r\n        this._formatWFS = new WFS();\r\n\r\n        this._formatGeoJSON = new GeoJSON();\r\n        this._formatKml = new KML({\r\n            extractStyles: false,\r\n            showPointNames: false\r\n        });\r\n        this._xs = new XMLSerializer();\r\n    }\r\n\r\n    /**\r\n     * Parse and check geometry of uploaded files\r\n     *\r\n     * @param evt\r\n     * @public\r\n     */\r\n    async process(evt: Event): Promise<void> {\r\n        const map = getMap();\r\n        const view = map.getView();\r\n\r\n        const file = (evt.target as HTMLInputElement).files[0];\r\n\r\n        let features: Array<Feature<Geometry>>;\r\n\r\n        if (!file) {\r\n            return;\r\n        }\r\n\r\n        const extension = file.name.split('.').pop().toLowerCase();\r\n\r\n        try {\r\n            // If the user uses a custom fucntion...\r\n            if (this._processUpload) {\r\n                features = this._processUpload(file);\r\n            }\r\n\r\n            // If the user functions return features, we dont process anything more\r\n            if (!features) {\r\n                const string = await this._fileReader(file);\r\n\r\n                if (extension === 'geojson' || extension === 'json') {\r\n                    features = this._formatGeoJSON.readFeatures(string, {\r\n                        featureProjection: view.getProjection().getCode()\r\n                    });\r\n                } else if (extension === 'kml') {\r\n                    features = this._formatKml.readFeatures(string, {\r\n                        featureProjection: view.getProjection().getCode()\r\n                    });\r\n                } else {\r\n                    showError(I18N.errors.badFormat);\r\n                }\r\n            }\r\n\r\n            let invalidFeaturesCount = 0;\r\n            let validFeaturesCount = 0;\r\n\r\n            const featuresToInsert: Array<Feature<Geometry>> = [];\r\n\r\n            for (let feature of features) {\r\n                // If the geometry doesn't correspond to the layer, try to fixit.\r\n                // If we can't, don't use it\r\n                if (!this._checkGeometry(feature)) {\r\n                    feature = this._fixGeometry(feature);\r\n                }\r\n\r\n                if (feature) {\r\n                    featuresToInsert.push(feature);\r\n                    validFeaturesCount++;\r\n                } else {\r\n                    invalidFeaturesCount++;\r\n                    continue;\r\n                }\r\n            }\r\n\r\n            if (!validFeaturesCount) {\r\n                showError(I18N.errors.noValidGeometry);\r\n            } else {\r\n                resetStateButtons();\r\n\r\n                this.dispatchEvent(\r\n                    new VectorSourceEvent(\r\n                        'loadedFeatures',\r\n                        null,\r\n                        featuresToInsert\r\n                    )\r\n                );\r\n\r\n                const content = `\r\n            ${I18N.labels.validFeatures}: ${validFeaturesCount}<br>\r\n            ${\r\n                invalidFeaturesCount\r\n                    ? `${I18N.labels.invalidFeatures}: ${invalidFeaturesCount}`\r\n                    : ''\r\n            }`;\r\n\r\n                this._initModal(content, featuresToInsert);\r\n            }\r\n\r\n            // Reset the input to allow another onChange trigger\r\n            (evt.target as HTMLInputElement).value = null;\r\n        } catch (err) {\r\n            showError(I18N.errors.badFile, err);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Read data file\r\n     * @param file\r\n     * @public\r\n     */\r\n    async _fileReader(file: File): Promise<string> {\r\n        return new Promise((resolve, reject) => {\r\n            const reader = new FileReader();\r\n\r\n            reader.addEventListener('load', async (e) => {\r\n                const fileData = e.target.result;\r\n                resolve(fileData as string);\r\n            });\r\n\r\n            reader.addEventListener('error', (err) => {\r\n                console.error('Error' + err);\r\n                reject();\r\n            });\r\n            reader.readAsText(file);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Attemp to change the geometry feature to the layer\r\n     * @param feature\r\n     * @private\r\n     */\r\n    _fixGeometry(feature: Feature<Geometry>): Feature<Geometry> {\r\n        // Geometry of the layer\r\n        const geomTypeLayer =\r\n            getActiveLayerToInsertEls().getDescribeFeatureType()._parsed\r\n                .geomType;\r\n        const geomTypeFeature = feature.getGeometry().getType();\r\n        let geom: Geometry;\r\n\r\n        switch (geomTypeFeature) {\r\n            case GeometryType.Point: {\r\n                if (geomTypeLayer === GeometryType.MultiPoint) {\r\n                    const coords = (\r\n                        feature.getGeometry() as Point\r\n                    ).getCoordinates();\r\n                    geom = new MultiPoint([coords]);\r\n                }\r\n                break;\r\n            }\r\n\r\n            case GeometryType.LineString:\r\n                if (geomTypeLayer === GeometryType.MultiLineString) {\r\n                    const coords = (\r\n                        feature.getGeometry() as LineString\r\n                    ).getCoordinates();\r\n                    geom = new MultiLineString([coords]);\r\n                }\r\n                break;\r\n\r\n            case GeometryType.Polygon:\r\n                if (geomTypeLayer === GeometryType.MultiPolygon) {\r\n                    const coords = (\r\n                        feature.getGeometry() as Polygon\r\n                    ).getCoordinates();\r\n                    geom = new MultiPolygon([coords]);\r\n                }\r\n                break;\r\n            default:\r\n                geom = null;\r\n        }\r\n\r\n        if (!geom) {\r\n            return null;\r\n        }\r\n\r\n        feature.setGeometry(geom);\r\n        return feature;\r\n    }\r\n\r\n    /**\r\n     * Check if the feature has the same geometry as the target layer\r\n     * @param feature\r\n     * @private\r\n     */\r\n    _checkGeometry(feature: Feature<Geometry>): boolean {\r\n        // Geometry of the layer\r\n        const geomTypeLayer =\r\n            getActiveLayerToInsertEls().getDescribeFeatureType()._parsed\r\n                .geomType;\r\n        const geomTypeFeature = feature.getGeometry().getType();\r\n\r\n        // This geom accepts every type of geometry\r\n        if (geomTypeLayer === GeometryType.GeometryCollection) {\r\n            return true;\r\n        }\r\n\r\n        return geomTypeFeature === geomTypeLayer;\r\n    }\r\n\r\n    /**\r\n     * Confirm modal before transact to the GeoServer the features in the file\r\n     *\r\n     * @param content\r\n     * @param featuresToInsert\r\n     * @private\r\n     */\r\n    _initModal(\r\n        content: string,\r\n        featuresToInsert: Array<Feature<Geometry>>\r\n    ): void {\r\n        const footer = `\r\n        <button type=\"button\" class=\"btn btn-sm btn-secondary\" data-dismiss=\"modal\">\r\n            ${I18N.labels.cancel}\r\n        </button>\r\n        <button type=\"button\" class=\"btn btn-sm btn-primary\" data-action=\"save\" data-dismiss=\"modal\">\r\n            ${I18N.labels.upload}\r\n        </button>\r\n    `;\r\n\r\n        const modal = new Modal({\r\n            ...this._options.modal,\r\n            header: true,\r\n            headerClose: false,\r\n            title:\r\n                I18N.labels.uploadFeatures +\r\n                ' ' +\r\n                getActiveLayerToInsertEls().get(BaseLayerProperty.NAME),\r\n            content: content,\r\n            backdrop: 'static', // Prevent close on click outside the modal\r\n            footer: footer\r\n        }).show();\r\n\r\n        modal.on('dismiss', (modal, event) => {\r\n            // On saving changes\r\n            if (event.target.dataset.action === 'save') {\r\n                this.dispatchEvent(\r\n                    new VectorSourceEvent(\r\n                        'addedFeatures',\r\n                        null,\r\n                        featuresToInsert\r\n                    )\r\n                );\r\n            } else {\r\n                // On cancel button\r\n                getEditLayer().getSource().clear();\r\n            }\r\n        });\r\n    }\r\n}\r\n","/**\r\n * @param target\r\n * @param sources\r\n * @returns\r\n */\r\nexport const deepObjectAssign = (target, ...sources) => {\r\n    sources.forEach((source) => {\r\n        Object.keys(source).forEach((key) => {\r\n            const s_val = source[key];\r\n            const t_val = target[key];\r\n            target[key] =\r\n                t_val &&\r\n                s_val &&\r\n                typeof t_val === 'object' &&\r\n                typeof s_val === 'object' &&\r\n                !Array.isArray(t_val) // Don't merge arrays\r\n                    ? deepObjectAssign(t_val, s_val)\r\n                    : s_val;\r\n        });\r\n    });\r\n    return target;\r\n};\r\n","import { I18N } from './modules/i18n';\r\nimport { Options } from './ol-wfst';\r\n\r\nexport const DEFAULT_LANGUAGE = 'en';\r\n\r\nexport const getDefaultOptions = (): Options => {\r\n    return {\r\n        layers: null,\r\n        evtType: 'singleclick',\r\n        active: true,\r\n        showControl: true,\r\n        language: DEFAULT_LANGUAGE,\r\n        uploadFormats: '.geojson,.json,.kml',\r\n        processUpload: null,\r\n        modal: {\r\n            animateClass: 'fade',\r\n            animateInClass: 'show',\r\n            transition: 300,\r\n            backdropTransition: 150,\r\n            templates: {\r\n                dialog: '<div class=\"modal-dialog modal-dialog-centered\"></div>',\r\n                headerClose: `<button type=\"button\" class=\"btn-close\" data-dismiss=\"modal\" aria-label=\"${I18N.labels.close}\"><span aria-hidden=\"true\">×</span></button>`\r\n            }\r\n        }\r\n    };\r\n};\r\n","import { Feature } from 'ol';\r\nimport { Geometry } from 'ol/geom';\r\nimport { Control } from 'ol/control';\r\nimport { VectorSourceEvent } from 'ol/source/Vector';\r\nimport { CombinedOnSignature, EventTypes, OnSignature } from 'ol/Observable';\r\nimport BaseEvent from 'ol/events/Event';\r\nimport { EventsKey } from 'ol/events';\r\nimport { ObjectEvent } from 'ol/Object';\r\nimport { Types as ObjectEventTypes } from 'ol/ObjectEventType';\r\n\r\nimport myPragma from '../myPragma';\r\nimport { I18N } from './i18n';\r\n\r\ntype ChangesEventTypes = 'cancel' | 'apply' | 'delete';\r\n\r\nexport default class EditControlChangesEl extends Control {\r\n    declare on: OnSignature<EventTypes, BaseEvent, EventsKey> &\r\n        OnSignature<ChangesEventTypes, VectorSourceEvent, EventsKey> &\r\n        OnSignature<ObjectEventTypes, ObjectEvent, EventsKey> &\r\n        CombinedOnSignature<\r\n            ChangesEventTypes | ObjectEventTypes | EventTypes,\r\n            EventsKey\r\n        >;\r\n\r\n    declare once: OnSignature<EventTypes, BaseEvent, EventsKey> &\r\n        OnSignature<ChangesEventTypes, VectorSourceEvent, EventsKey> &\r\n        OnSignature<ObjectEventTypes, ObjectEvent, EventsKey> &\r\n        CombinedOnSignature<\r\n            ChangesEventTypes | ObjectEventTypes | EventTypes,\r\n            EventsKey\r\n        >;\r\n\r\n    declare un: OnSignature<EventTypes, BaseEvent, void> &\r\n        OnSignature<ChangesEventTypes, VectorSourceEvent, EventsKey> &\r\n        OnSignature<ObjectEventTypes, ObjectEvent, void> &\r\n        CombinedOnSignature<\r\n            ChangesEventTypes | ObjectEventTypes | EventTypes,\r\n            void\r\n        >;\r\n\r\n    constructor(feature: Feature<Geometry>) {\r\n        super({\r\n            element: (\r\n                <div className=\"ol-wfst--changes-control\">\r\n                    <div className=\"ol-wfst--changes-control-el\">\r\n                        <div className=\"ol-wfst--changes-control-id\">\r\n                            <b>{I18N.labels.editMode}</b> -{' '}\r\n                            <i>{String(feature.getId())}</i>\r\n                        </div>\r\n                        <button\r\n                            type=\"button\"\r\n                            className=\"btn btn-sm btn-secondary\"\r\n                            onclick={() => {\r\n                                this.dispatchEvent(\r\n                                    new VectorSourceEvent('cancel', feature)\r\n                                );\r\n                            }}\r\n                        >\r\n                            {I18N.labels.cancel}\r\n                        </button>\r\n                        <button\r\n                            type=\"button\"\r\n                            className=\"btn btn-sm btn-primary\"\r\n                            onclick={() => {\r\n                                this.dispatchEvent(\r\n                                    new VectorSourceEvent('apply', feature)\r\n                                );\r\n                            }}\r\n                        >\r\n                            {I18N.labels.apply}\r\n                        </button>\r\n                        <button\r\n                            type=\"button\"\r\n                            className=\"btn btn-sm btn-danger-outline\"\r\n                            onclick={() => {\r\n                                this.dispatchEvent(\r\n                                    new VectorSourceEvent('delete', feature)\r\n                                );\r\n                            }}\r\n                        >\r\n                            {I18N.labels.delete}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            )\r\n        });\r\n    }\r\n}\r\n","// Ol\r\nimport {\r\n    Geometry,\r\n    GeometryCollection,\r\n    LineString,\r\n    MultiLineString,\r\n    MultiPoint,\r\n    MultiPolygon,\r\n    Polygon\r\n} from 'ol/geom';\r\nimport { Circle as CircleStyle, Fill, Stroke, Style } from 'ol/style';\r\nimport { Feature } from 'ol';\r\nimport { FeatureLike } from 'ol/Feature';\r\nimport { Coordinate } from 'ol/coordinate';\r\n\r\nimport { GeometryType } from '../@enums';\r\nimport { getMode, Modes } from './state';\r\n\r\n/**\r\n * Master style that handles two modes on the Edit Layer:\r\n * - one is the basic, showing only the vertices\r\n * - and the other when modify is active, showing bigger vertices\r\n *\r\n * @param feature\r\n * @private\r\n */\r\nexport default function styleFunction(\r\n    feature: Feature<Geometry>\r\n): Array<Style> {\r\n    const getVertexs = (feature: FeatureLike) => {\r\n        let geometry = feature.getGeometry();\r\n\r\n        if (geometry instanceof GeometryCollection) {\r\n            geometry = geometry.getGeometries()[0];\r\n        }\r\n\r\n        const coordinates = (geometry as LineString).getCoordinates();\r\n        let flatCoordinates: Coordinate[] | number[] = null;\r\n\r\n        if (\r\n            geometry instanceof Polygon ||\r\n            geometry instanceof MultiLineString\r\n        ) {\r\n            flatCoordinates = coordinates.flat(1);\r\n        } else if (geometry instanceof MultiPolygon) {\r\n            flatCoordinates = coordinates.flat(2);\r\n        } else {\r\n            flatCoordinates = coordinates;\r\n        }\r\n\r\n        if (!flatCoordinates || !flatCoordinates.length) {\r\n            return;\r\n        }\r\n\r\n        return new MultiPoint(flatCoordinates as Coordinate[]);\r\n    };\r\n\r\n    let geometry = feature.getGeometry();\r\n    let type = geometry.getType();\r\n\r\n    if (geometry instanceof GeometryCollection) {\r\n        geometry = geometry.getGeometries()[0];\r\n        type = geometry.getType();\r\n    }\r\n\r\n    switch (type) {\r\n        case GeometryType.Point:\r\n        case GeometryType.MultiPoint:\r\n            if (getMode() === Modes.Edit) {\r\n                return [\r\n                    new Style({\r\n                        image: new CircleStyle({\r\n                            radius: 6,\r\n                            fill: new Fill({\r\n                                color: '#000000'\r\n                            })\r\n                        })\r\n                    }),\r\n                    new Style({\r\n                        image: new CircleStyle({\r\n                            radius: 4,\r\n                            fill: new Fill({\r\n                                color: '#ff0000'\r\n                            })\r\n                        })\r\n                    })\r\n                ];\r\n            } else {\r\n                return [\r\n                    new Style({\r\n                        image: new CircleStyle({\r\n                            radius: 5,\r\n                            fill: new Fill({\r\n                                color: '#ff0000'\r\n                            })\r\n                        })\r\n                    }),\r\n                    new Style({\r\n                        image: new CircleStyle({\r\n                            radius: 2,\r\n                            fill: new Fill({\r\n                                color: '#000000'\r\n                            })\r\n                        })\r\n                    })\r\n                ];\r\n            }\r\n        default:\r\n            // If editing mode is active, show bigger vertex\r\n            if (getMode() == Modes.Draw || getMode() == Modes.Edit) {\r\n                return [\r\n                    new Style({\r\n                        stroke: new Stroke({\r\n                            color: 'rgba( 255, 0, 0, 1)',\r\n                            width: 4\r\n                        }),\r\n                        fill: new Fill({\r\n                            color: 'rgba(255, 0, 0, 0.7)'\r\n                        })\r\n                    }),\r\n                    new Style({\r\n                        image: new CircleStyle({\r\n                            radius: 4,\r\n                            fill: new Fill({\r\n                                color: '#ff0000'\r\n                            }),\r\n                            stroke: new Stroke({\r\n                                width: 2,\r\n                                color: 'rgba(5, 5, 5, 0.9)'\r\n                            })\r\n                        }),\r\n                        geometry: (feature) => getVertexs(feature)\r\n                    }),\r\n                    new Style({\r\n                        stroke: new Stroke({\r\n                            color: 'rgba(255, 255, 255, 0.7)',\r\n                            width: 2\r\n                        })\r\n                    })\r\n                ];\r\n            } else {\r\n                return [\r\n                    new Style({\r\n                        image: new CircleStyle({\r\n                            radius: 2,\r\n                            fill: new Fill({\r\n                                color: '#000000'\r\n                            })\r\n                        }),\r\n                        geometry: (feature) => getVertexs(feature)\r\n                    }),\r\n                    new Style({\r\n                        stroke: new Stroke({\r\n                            color: '#ff0000',\r\n                            width: 4\r\n                        }),\r\n                        fill: new Fill({\r\n                            color: 'rgba(255, 0, 0, 0.7)'\r\n                        })\r\n                    })\r\n                ];\r\n            }\r\n    }\r\n}\r\n","// Ol\r\nimport { Feature, Observable } from 'ol';\r\nimport { Geometry } from 'ol/geom';\r\n\r\n// External\r\nimport Modal from 'modal-vanilla';\r\n\r\nimport { addFeatureToEditedList, getStoredLayer } from './state';\r\nimport { Options } from '../ol-wfst';\r\nimport { I18N } from './i18n';\r\nimport { VectorSourceEvent } from 'ol/source/Vector';\r\n\r\n/**\r\n * Shows a fields form in a modal window to allow changes in the properties of the feature.\r\n *\r\n * @param feature\r\n * @private\r\n */\r\nexport class EditFieldsModal extends Observable {\r\n    protected _options: Options['modal'];\r\n    protected _modal: Modal;\r\n    protected _feature: Feature;\r\n\r\n    constructor(options: Options['modal']) {\r\n        super();\r\n\r\n        this._options = options;\r\n\r\n        const footer = `\r\n            <button type=\"button\" class=\"btn btn-sm btn-link btn-third\" data-action=\"delete\" data-dismiss=\"modal\">\r\n                ${I18N.labels.delete}\r\n            </button>\r\n            <button type=\"button\" class=\"btn btn-sm btn-secondary\" data-dismiss=\"modal\">\r\n                ${I18N.labels.cancel}\r\n            </button>\r\n            <button type=\"button\" class=\"btn btn-sm btn-primary\" data-action=\"save\" data-dismiss=\"modal\">\r\n                ${I18N.labels.save}\r\n            </button>\r\n        `;\r\n\r\n        this._modal = new Modal({\r\n            ...this._options,\r\n            header: true,\r\n            headerClose: true,\r\n            title: '',\r\n            content: '<div></div>',\r\n            footer: footer\r\n        });\r\n\r\n        this._modal.on('dismiss', (modal, event) => {\r\n            // On saving changes\r\n            if (event.target.dataset.action === 'save') {\r\n                const inputs = modal.el.querySelectorAll('input');\r\n\r\n                inputs.forEach((el: HTMLInputElement) => {\r\n                    const value = el.value;\r\n                    const field = el.name;\r\n                    this._feature.set(field, value, /*isSilent = */ true);\r\n                });\r\n\r\n                this._feature.changed();\r\n\r\n                addFeatureToEditedList(this._feature);\r\n\r\n                this.dispatchEvent(\r\n                    new VectorSourceEvent('save', this._feature)\r\n                );\r\n            } else if (event.target.dataset.action === 'delete') {\r\n                this.dispatchEvent(\r\n                    new VectorSourceEvent('delete', this._feature)\r\n                );\r\n            }\r\n        });\r\n    }\r\n\r\n    show(feature: Feature<Geometry>) {\r\n        this._feature = feature;\r\n\r\n        const title = `${I18N.labels.editElement} ${feature.getId()} `;\r\n\r\n        const properties = feature.getProperties();\r\n        const layerName = feature.get('_layerName_');\r\n\r\n        // Data schema from the geoserver\r\n        const layer = getStoredLayer(layerName);\r\n        const dataSchema = layer.getDescribeFeatureType()._parsed.properties;\r\n\r\n        let content = '<form autocomplete=\"false\">';\r\n        Object.keys(properties).forEach((key) => {\r\n            // If the feature field exists in the geoserver and is not added by openlayers\r\n            const field = dataSchema.find((data) => data.name === key);\r\n\r\n            if (field) {\r\n                const typeXsd = field.type;\r\n                let type;\r\n\r\n                switch (typeXsd) {\r\n                    case 'xsd:string':\r\n                        type = 'text';\r\n                        break;\r\n                    case 'xsd:number':\r\n                    case 'xsd:int':\r\n                        type = 'number';\r\n                        break;\r\n                    case 'xsd:date-time':\r\n                        type = 'datetime';\r\n                        break;\r\n                    default:\r\n                        type = 'text';\r\n                }\r\n\r\n                if (type) {\r\n                    content += `\r\n                <div class=\"ol-wfst--input-field-container\">\r\n                    <label class=\"ol-wfst--input-field-label\" for=\"${key}\">${key}</label>\r\n                    <input placeholder=\"NULL\" class=\"ol-wfst--input-field-input\" type=\"${type}\" name=\"${key}\" value=\"${\r\n                        properties[key] || ''\r\n                    }\">\r\n                </div>`;\r\n                }\r\n            }\r\n        });\r\n\r\n        content += '</form>';\r\n\r\n        this._modal._html.body.innerHTML = content;\r\n        this._modal._html.header.innerHTML = title;\r\n        this._modal.show();\r\n    }\r\n}\r\n","// Ol\r\nimport BaseObject, { ObjectEvent } from 'ol/Object';\r\nimport { Types as ObjectEventTypes } from 'ol/ObjectEventType';\r\n\r\nimport { ProjectionLike } from 'ol/proj';\r\nimport Circle from 'ol/geom/Circle';\r\nimport Geometry from 'ol/geom/Geometry';\r\nimport GeometryCollection from 'ol/geom/GeometryCollection';\r\nimport Feature from 'ol/Feature';\r\n\r\nimport GeoJSON from 'ol/format/GeoJSON';\r\nimport KML from 'ol/format/KML';\r\nimport WFS from 'ol/format/WFS';\r\n\r\nimport { State } from 'ol/source/Source';\r\nimport { fromCircle } from 'ol/geom/Polygon';\r\nimport BaseEvent from 'ol/events/Event';\r\nimport { CombinedOnSignature, EventTypes, OnSignature } from 'ol/Observable';\r\nimport { EventsKey } from 'ol/events';\r\nimport { TransactionResponse } from 'ol/format/WFS';\r\n\r\nimport { showLoading } from './modules/loading';\r\nimport { parseError, showError } from './modules/errors';\r\nimport {\r\n    getMap,\r\n    getStoredLayer,\r\n    removeFeatureFromEditList\r\n} from './modules/state';\r\nimport { getEditLayer } from './modules/editLayer';\r\nimport { deepObjectAssign } from './modules/helpers';\r\nimport { I18N } from './modules/i18n';\r\nimport { GeometryType, TransactionType } from './@enums';\r\nimport WmsLayer from './WmsLayer';\r\n\r\n// https://docs.geoserver.org/latest/en/user/services/wfs/axis_order.html\r\n// Axis ordering: latitude/longitude\r\nconst DEFAULT_GEOSERVER_SRS = 'EPSG:3857';\r\n\r\n/**\r\n * @fires change:capabilities\r\n * @extends {ol/Object~BaseObject}\r\n * @param options\r\n */\r\nexport default class Geoserver extends BaseObject {\r\n    protected _options: GeoserverOptions;\r\n\r\n    protected _countRequests: number;\r\n    protected _insertFeatures: Array<Feature<Geometry>>;\r\n    protected _updateFeatures: Array<Feature<Geometry>>;\r\n    protected _deleteFeatures: Array<Feature<Geometry>>;\r\n\r\n    // Formats\r\n    protected _formatWFS: WFS;\r\n    protected _formatGeoJSON: GeoJSON;\r\n    protected _formatKml: KML;\r\n    protected _xs: XMLSerializer;\r\n\r\n    protected state_: State;\r\n\r\n    declare on: OnSignature<EventTypes, BaseEvent, EventsKey> &\r\n        OnSignature<\r\n            GeoserverEventTypes | ObjectEventTypes,\r\n            ObjectEvent,\r\n            EventsKey\r\n        > &\r\n        CombinedOnSignature<\r\n            GeoserverEventTypes | ObjectEventTypes | EventTypes,\r\n            EventsKey\r\n        >;\r\n\r\n    declare once: OnSignature<EventTypes, BaseEvent, EventsKey> &\r\n        OnSignature<\r\n            GeoserverEventTypes | ObjectEventTypes,\r\n            ObjectEvent,\r\n            EventsKey\r\n        > &\r\n        CombinedOnSignature<\r\n            GeoserverEventTypes | ObjectEventTypes | EventTypes,\r\n            EventsKey\r\n        >;\r\n\r\n    declare un: OnSignature<EventTypes, BaseEvent, void> &\r\n        OnSignature<GeoserverEventTypes | ObjectEventTypes, ObjectEvent, void> &\r\n        CombinedOnSignature<\r\n            GeoserverEventTypes | ObjectEventTypes | EventTypes,\r\n            void\r\n        >;\r\n\r\n    constructor(options: GeoserverOptions) {\r\n        super();\r\n\r\n        const defaults = {\r\n            url: null,\r\n            advanced: {\r\n                getCapabilitiesVersion: '1.3.0',\r\n                getFeatureVersion: '1.0.0',\r\n                describeFeatureTypeVersion: '1.1.0',\r\n                lockFeatureVersion: '1.1.0',\r\n                wfsTransactionVersion: '1.1.0',\r\n                projection: DEFAULT_GEOSERVER_SRS,\r\n                lockFeatureParams: {\r\n                    expiry: 5, // minutes\r\n                    lockId: 'GeoServer',\r\n                    releaseAction: 'SOME'\r\n                }\r\n            },\r\n            headers: {},\r\n            credentials: 'same-origin',\r\n            useLockFeature: true\r\n        };\r\n\r\n        this._options = deepObjectAssign(defaults, options);\r\n\r\n        this.setAdvanced(this._options.advanced);\r\n        this.setHeaders(this._options.headers);\r\n        this.setCredentials(this._options.credentials);\r\n        this.setUrl(this._options.url);\r\n        this.setUseLockFeature(this._options.useLockFeature);\r\n\r\n        this._countRequests = 0;\r\n\r\n        this._insertFeatures = [];\r\n        this._updateFeatures = [];\r\n        this._deleteFeatures = [];\r\n\r\n        // Formats\r\n        this._formatWFS = new WFS();\r\n\r\n        this._formatGeoJSON = new GeoJSON();\r\n        this._formatKml = new KML({\r\n            extractStyles: false,\r\n            showPointNames: false\r\n        });\r\n        this._xs = new XMLSerializer();\r\n\r\n        this.getAndUpdateCapabilities();\r\n\r\n        this.on('change:capabilities', () => {\r\n            this._checkGeoserverCapabilities();\r\n        });\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns\r\n     * @public\r\n     */\r\n    getCapabilities(): XMLDocument {\r\n        return this.get(GeoserverProperty.CAPABILITIES);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param url\r\n     * @param opt_silent\r\n     * @public\r\n     */\r\n    setUrl(url: string, opt_silent = false): void {\r\n        this.set(GeoserverProperty.URL, url, opt_silent);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns\r\n     */\r\n    getUrl(): string {\r\n        return this.get(GeoserverProperty.URL);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param headers\r\n     * @param opt_silent\r\n     * @returns\r\n     * @public\r\n     */\r\n    setHeaders(headers: HeadersInit = {}, opt_silent = false): void {\r\n        return this.set(GeoserverProperty.HEADERS, headers, opt_silent);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns\r\n     * @public\r\n     */\r\n    getHeaders(): HeadersInit {\r\n        return this.get(GeoserverProperty.HEADERS);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param credentials\r\n     * @param opt_silent\r\n     * @public\r\n     */\r\n    setCredentials(\r\n        credentials: RequestCredentials = null,\r\n        opt_silent = false\r\n    ): void {\r\n        this.set(GeoserverProperty.CREDENTIALS, credentials, opt_silent);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns\r\n     * @public\r\n     */\r\n    getCredentials(): RequestCredentials {\r\n        return this.get(GeoserverProperty.CREDENTIALS);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns\r\n     * @public\r\n     */\r\n    setAdvanced(advanced: GeoServerAdvanced = {}, opt_silent = false): void {\r\n        this.set(GeoserverProperty.ADVANCED, advanced, opt_silent);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns\r\n     * @public\r\n     */\r\n    getAdvanced(): GeoServerAdvanced {\r\n        return this.get(GeoserverProperty.ADVANCED);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns\r\n     * @public\r\n     */\r\n    hasTransaction(): boolean {\r\n        return this.get(GeoserverProperty.HASTRASNACTION);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns\r\n     * @public\r\n     */\r\n    hasLockFeature(): boolean {\r\n        return this.get(GeoserverProperty.HASLOCKFEATURE);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns\r\n     * @public\r\n     */\r\n    getUseLockFeature(): boolean {\r\n        return this.get(GeoserverProperty.USELOCKFEATURE);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns\r\n     * @public\r\n     */\r\n    setUseLockFeature(useLockFeature: boolean, opt_silent = false): void {\r\n        this.set(GeoserverProperty.USELOCKFEATURE, useLockFeature, opt_silent);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns\r\n     * @public\r\n     */\r\n    isLoaded(): boolean {\r\n        return this.get(GeoserverProperty.ISLOADED);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns\r\n     */\r\n    getState() {\r\n        return this.state_;\r\n    }\r\n\r\n    /**\r\n     * Get the capabilities from the GeoServer and check\r\n     * all the available operations.\r\n     *\r\n     * @fires getcapabilities\r\n     * @public\r\n     */\r\n    async getAndUpdateCapabilities(): Promise<XMLDocument> {\r\n        try {\r\n            const params = new URLSearchParams({\r\n                service: 'wfs',\r\n                version: this.getAdvanced().getCapabilitiesVersion,\r\n                request: 'GetCapabilities',\r\n                exceptions: 'application/json'\r\n            });\r\n\r\n            const url_fetch = this.getUrl() + '?' + params.toString();\r\n\r\n            const response = await fetch(url_fetch, {\r\n                headers: this.getHeaders(),\r\n                credentials: this.getCredentials()\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error('');\r\n            }\r\n\r\n            const data = await response.text();\r\n            const capabilities = new window.DOMParser().parseFromString(\r\n                data,\r\n                'text/xml'\r\n            );\r\n\r\n            this.set(GeoserverProperty.CAPABILITIES, capabilities);\r\n\r\n            this.state_ = capabilities ? 'ready' : 'error';\r\n\r\n            return capabilities;\r\n        } catch (err) {\r\n            console.error(err);\r\n            const msg =\r\n                typeof err === 'string' ? err : I18N.errors.capabilities;\r\n            showError(msg, err);\r\n        }\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @private\r\n     */\r\n    _checkGeoserverCapabilities() {\r\n        // Available operations in the geoserver\r\n        const operations: HTMLCollectionOf<Element> =\r\n            this.getCapabilities().getElementsByTagName('ows:Operation');\r\n\r\n        Array.from(operations).forEach((operation) => {\r\n            if (operation.getAttribute('name') === 'Transaction') {\r\n                this.set(GeoserverProperty.HASTRASNACTION, true);\r\n            } else if (operation.getAttribute('name') === 'LockFeature') {\r\n                this.set(GeoserverProperty.HASLOCKFEATURE, true);\r\n            } else if (\r\n                operation.getAttribute('name') === 'DescribeFeatureType'\r\n            ) {\r\n                this.set(GeoserverProperty.HASDESCRIBEFEATURETYPE, true);\r\n            }\r\n        });\r\n\r\n        if (!this.hasTransaction()) {\r\n            throw I18N.errors.wfst;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Make the WFS Transactions\r\n     *\r\n     * @param transactionType\r\n     * @param features\r\n     * @param layerName\r\n     * @private\r\n     */\r\n    async transact(\r\n        transactionType: TransactionType,\r\n        features: Array<Feature<Geometry>> | Feature<Geometry>,\r\n        layerName: string\r\n    ): Promise<TransactionResponse | false> {\r\n        features = (\r\n            Array.isArray(features) ? features : [features]\r\n        ) as Feature<Geometry>[];\r\n        const clonedFeatures = [];\r\n        const geoLayer = getStoredLayer(layerName);\r\n\r\n        for (const feature of features) {\r\n            let clone = this._cloneFeature(feature);\r\n            const cloneGeom = clone.getGeometry();\r\n\r\n            // Ugly fix to support GeometryCollection on GML\r\n            // See https://github.com/openlayers/openlayers/issues/4220\r\n            if (cloneGeom instanceof GeometryCollection) {\r\n                this._transformGeoemtryCollectionToGeometries(\r\n                    clone,\r\n                    cloneGeom as GeometryCollection\r\n                );\r\n            } else if (cloneGeom instanceof Circle) {\r\n                // Geoserver has no Support to Circles\r\n                this._transformCircleToPolygon(clone, cloneGeom as Circle);\r\n            }\r\n\r\n            // Filters\r\n            if (\r\n                'beforeTransactFeature' in geoLayer &&\r\n                typeof geoLayer.beforeTransactFeature === 'function'\r\n            ) {\r\n                clone = geoLayer.beforeTransactFeature(clone, transactionType);\r\n            }\r\n\r\n            if (clone) {\r\n                clonedFeatures.push(clone);\r\n            }\r\n        }\r\n\r\n        if (!clonedFeatures.length) {\r\n            showError(I18N.errors.noValidGeometry);\r\n            return false;\r\n        }\r\n\r\n        switch (transactionType) {\r\n            case TransactionType.Insert:\r\n                this._insertFeatures = [\r\n                    ...this._insertFeatures,\r\n                    ...clonedFeatures\r\n                ];\r\n                break;\r\n            case TransactionType.Update:\r\n                this._updateFeatures = [\r\n                    ...this._updateFeatures,\r\n                    ...clonedFeatures\r\n                ];\r\n                break;\r\n            case TransactionType.Delete:\r\n                this._deleteFeatures = [\r\n                    ...this._deleteFeatures,\r\n                    ...clonedFeatures\r\n                ];\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        this._countRequests++;\r\n        const numberRequest = this._countRequests;\r\n\r\n        return new Promise((resolve, reject) => {\r\n            setTimeout(async () => {\r\n                try {\r\n                    // Prevent fire multiples times\r\n                    if (numberRequest !== this._countRequests) {\r\n                        return;\r\n                    }\r\n\r\n                    let srs = getMap().getView().getProjection().getCode();\r\n\r\n                    // Force latitude/longitude order on transactions\r\n                    // EPSG:4326 is longitude/latitude (assumption) and is not managed correctly by GML3\r\n                    srs =\r\n                        srs === 'EPSG:4326'\r\n                            ? 'urn:x-ogc:def:crs:EPSG:4326'\r\n                            : srs;\r\n\r\n                    if (!geoLayer || !geoLayer.getDescribeFeatureType()) {\r\n                        throw new Error(\r\n                            `${I18N.errors.layerNotFound}: \"${layerName}\"`\r\n                        );\r\n                    }\r\n\r\n                    const describeFeatureType =\r\n                        geoLayer.getDescribeFeatureType()._parsed;\r\n\r\n                    const options = {\r\n                        featureNS: describeFeatureType.namespace,\r\n                        featureType: layerName,\r\n                        srsName: srs,\r\n                        featurePrefix: null,\r\n                        nativeElements: null,\r\n                        version: this.getAdvanced().wfsTransactionVersion\r\n                    };\r\n\r\n                    const transaction = this._formatWFS.writeTransaction(\r\n                        this._insertFeatures,\r\n                        this._updateFeatures,\r\n                        this._deleteFeatures,\r\n                        options\r\n                    );\r\n\r\n                    let payload = this._xs.serializeToString(transaction);\r\n                    const geomType = describeFeatureType.geomType;\r\n                    const geomField = describeFeatureType.geomField;\r\n\r\n                    // Ugly fix to support GeometryCollection on GML\r\n                    // See https://github.com/openlayers/openlayers/issues/4220\r\n                    if (geomType === GeometryType.GeometryCollection) {\r\n                        if (transactionType === TransactionType.Insert) {\r\n                            payload = payload.replace(\r\n                                /<geometry>/g,\r\n                                `<geometry><MultiGeometry xmlns=\"http://www.opengis.net/gml\" srsName=\"${srs}\"><geometryMember>`\r\n                            );\r\n                            payload = payload.replace(\r\n                                /<\\/geometry>/g,\r\n                                `</geometryMember></MultiGeometry></geometry>`\r\n                            );\r\n                        } else if (transactionType === TransactionType.Update) {\r\n                            const gmemberIn = `<MultiGeometry xmlns=\"http://www.opengis.net/gml\" srsName=\"${srs}\"><geometryMember>`;\r\n                            const gmemberOut = `</geometryMember></MultiGeometry>`;\r\n\r\n                            payload = payload.replace(\r\n                                /(.*)(<Name>geometry<\\/Name><Value>)(.*?)(<\\/Value>)(.*)/g,\r\n                                `$1$2${gmemberIn}$3${gmemberOut}$4$5`\r\n                            );\r\n                        }\r\n                    }\r\n\r\n                    // Fixes geometry name, weird bug with GML:\r\n                    // The property for the geometry column is always named \"geometry\"\r\n                    if (transactionType === TransactionType.Insert) {\r\n                        payload = payload.replace(\r\n                            /<(\\/?)\\bgeometry\\b>/g,\r\n                            `<$1${geomField}>`\r\n                        );\r\n                    } else {\r\n                        payload = payload.replace(\r\n                            /<Name>geometry<\\/Name>/g,\r\n                            `<Name>${geomField}</Name>`\r\n                        );\r\n                    }\r\n\r\n                    // This has to be te same used before\r\n                    if (\r\n                        this.hasLockFeature &&\r\n                        this.getUseLockFeature() &&\r\n                        transactionType !== TransactionType.Insert\r\n                    ) {\r\n                        payload = payload.replace(\r\n                            `</Transaction>`,\r\n                            `<LockId>${this._options.advanced.lockFeatureParams.lockId}</LockId></Transaction>`\r\n                        );\r\n                    }\r\n\r\n                    const headers = {\r\n                        'Content-Type': 'text/xml',\r\n                        ...this.getHeaders()\r\n                    };\r\n\r\n                    const response = await fetch(this.getUrl(), {\r\n                        method: 'POST',\r\n                        body: payload,\r\n                        headers: headers,\r\n                        credentials: this._options.credentials\r\n                    });\r\n\r\n                    if (!response.ok) {\r\n                        throw new Error(\r\n                            I18N.errors.transaction + ' ' + response.status\r\n                        );\r\n                    }\r\n\r\n                    const responseStr = await response.text();\r\n\r\n                    const parseResponse =\r\n                        this._formatWFS.readTransactionResponse(responseStr);\r\n\r\n                    const wlayer = getStoredLayer(layerName);\r\n\r\n                    if (!Object.keys(parseResponse).length) {\r\n                        const findError = String(responseStr).match(\r\n                            /<ows:ExceptionText>([\\s\\S]*?)<\\/ows:ExceptionText>/\r\n                        );\r\n\r\n                        if (findError) {\r\n                            if (wlayer instanceof WmsLayer) {\r\n                                this._removeFeatures(\r\n                                    features as Feature<Geometry>[]\r\n                                );\r\n                            }\r\n                            // maybe remove tmp wms features here\r\n                            throw new Error(findError[1]);\r\n                        }\r\n                    }\r\n\r\n                    if (transactionType !== TransactionType.Delete) {\r\n                        this._removeFeatures(features as Feature<Geometry>[]);\r\n                    }\r\n\r\n                    wlayer.refresh();\r\n\r\n                    showLoading(false);\r\n\r\n                    this._insertFeatures = [];\r\n                    this._updateFeatures = [];\r\n                    this._deleteFeatures = [];\r\n\r\n                    this._countRequests = 0;\r\n\r\n                    resolve(parseResponse);\r\n                } catch (err) {\r\n                    showError(err.message, err);\r\n                    showLoading(false);\r\n                    this._countRequests = 0;\r\n                    reject();\r\n                }\r\n            }, 0);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @privatwe\r\n     */\r\n    _removeFeatures(features: Feature<Geometry>[]) {\r\n        for (const feature of features as Array<Feature<Geometry>>) {\r\n            getEditLayer().getSource().removeFeature(feature);\r\n        }\r\n    }\r\n    /**\r\n     *\r\n     * @param feature\r\n     * @param geom\r\n     * @private\r\n     */\r\n    _transformCircleToPolygon(feature: Feature<Geometry>, geom: Circle) {\r\n        const geomConverted = fromCircle(geom);\r\n        feature.setGeometry(geomConverted);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param feature\r\n     * @private\r\n     * @param geom\r\n     */\r\n    _transformGeoemtryCollectionToGeometries(\r\n        feature: Feature<Geometry>,\r\n        geom: GeometryCollection\r\n    ) {\r\n        let geomConverted = geom.getGeometries()[0];\r\n\r\n        if (geomConverted instanceof Circle) {\r\n            geomConverted = fromCircle(geomConverted);\r\n        }\r\n\r\n        feature.setGeometry(geomConverted);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param feature\r\n     * @returns\r\n     * @private\r\n     */\r\n    _cloneFeature(feature: Feature<Geometry>): Feature<Geometry> {\r\n        removeFeatureFromEditList(feature);\r\n\r\n        const featureProperties = feature.getProperties();\r\n\r\n        delete featureProperties.boundedBy;\r\n        delete featureProperties._layerName_;\r\n\r\n        const clone = new Feature(featureProperties);\r\n        clone.setId(feature.getId());\r\n\r\n        return clone;\r\n    }\r\n\r\n    /**\r\n     * Lock a feature in the geoserver. Useful before editing a geometry,\r\n     * to avoid changes from multiples suers\r\n     *\r\n     * @param featureId\r\n     * @param layerName\r\n     * @param retry\r\n     * @public\r\n     */\r\n    async lockFeature(\r\n        featureId: string | number,\r\n        layerName: string,\r\n        retry = 0\r\n    ): Promise<string> {\r\n        const params = new URLSearchParams({\r\n            service: 'wfs',\r\n            version: this.getAdvanced().lockFeatureVersion,\r\n            request: 'LockFeature',\r\n            typeName: layerName,\r\n            expiry: String(this._options.advanced.lockFeatureParams.expiry),\r\n            LockId: this._options.advanced.lockFeatureParams.lockId,\r\n            releaseAction:\r\n                this._options.advanced.lockFeatureParams.releaseAction,\r\n            exceptions: 'application/json',\r\n            featureid: `${featureId}`\r\n        });\r\n\r\n        const url_fetch = this.getUrl() + '?' + params.toString();\r\n\r\n        try {\r\n            const response = await fetch(url_fetch, {\r\n                headers: this._options.headers,\r\n                credentials: this._options.credentials\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error(I18N.errors.lockFeature);\r\n            }\r\n\r\n            const data = await response.text();\r\n\r\n            try {\r\n                // First, check if is a JSON (with errors)\r\n                const dataParsed = JSON.parse(data);\r\n\r\n                if ('exceptions' in dataParsed) {\r\n                    const error = new Error(parseError(dataParsed));\r\n\r\n                    const exceptions = dataParsed.exceptions;\r\n                    if (exceptions[0].code === 'CannotLockAllFeatures') {\r\n                        // Maybe the Feature is already blocked, ant thats trigger error, so, we try one locking more time again\r\n                        if (!retry) {\r\n                            this.lockFeature(featureId, layerName, 1);\r\n                        } else {\r\n                            throw error;\r\n                        }\r\n                    } else {\r\n                        throw error;\r\n                    }\r\n                }\r\n            } catch (err) {\r\n                /*\r\n             \r\n                let dataDoc = (new window.DOMParser()).parseFromString(data, 'text/xml');\r\n             \r\n                let lockId = dataDoc.getElementsByTagName('wfs:LockId');\r\n             \r\n                let featuresLocked: HTMLCollectionOf<Element> = dataDoc.getElementsByTagName('ogc:FeatureId');\r\n             \r\n                for (let featureLocked of featuresLocked as any) {\r\n             \r\n                    console.log(featureLocked.getAttribute('fid'));\r\n             \r\n                }\r\n             \r\n                */\r\n            }\r\n\r\n            return data;\r\n        } catch (err) {\r\n            showError(err.message, err);\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * **_[interface]_**\r\n * @public\r\n */\r\nexport interface GeoserverOptions {\r\n    /**\r\n     * Url for OWS services. This endpoint will recive the WFS, WFST and WMS requests\r\n     *\r\n     */\r\n    url: string;\r\n\r\n    /**\r\n     * Advanced options for geoserver requests\r\n     *\r\n     */\r\n    advanced?: GeoServerAdvanced;\r\n\r\n    /**\r\n     * Http headers for GeoServer requests\r\n     * https://developer.mozilla.org/en-US/docs/Web/API/Request/headers\r\n     *\r\n     */\r\n    headers?: HeadersInit;\r\n\r\n    /**\r\n     * Credentials for fetch requests\r\n     * https://developer.mozilla.org/en-US/docs/Web/API/Request/credentials\r\n     *\r\n     * Default is 'same-origin'\r\n     */\r\n    credentials?: RequestCredentials;\r\n\r\n    /**\r\n     * Use LockFeatue request on GeoServer when selecting features. Prevents a feature from being edited\r\n     * through a persistent feature lock. This is not always supportedd by the GeoServer.\r\n     * See https://docs.geoserver.org/stable/en/user/services/wfs/reference.html\r\n     */\r\n    useLockFeature?: boolean;\r\n}\r\n\r\n/**\r\n * **_[interface]_**\r\n *\r\n *  * Default values:\r\n * ```javascript\r\n * {\r\n *   getCapabilitiesVersion: '1.3.0',\r\n *   getFeatureVersion: '1.0.0',\r\n *   describeFeatureTypeVersion: '1.1.0',\r\n *   lockFeatureVersion: '1.1.0',\r\n *   wfsTransactionVersion: '1.1.0',\r\n *   projection: 'EPSG:3857',\r\n *   lockFeatureParams: {\r\n *     expiry: 5,\r\n *     lockId: 'Geoserver',\r\n *     releaseAction: 'SOME'\r\n *   }\r\n * }\r\n * @public\r\n */\r\nexport interface GeoServerAdvanced {\r\n    getCapabilitiesVersion?: string;\r\n    getFeatureVersion?: string;\r\n    lockFeatureVersion?: string;\r\n    describeFeatureTypeVersion?: string;\r\n    wfsTransactionVersion?: string;\r\n    projection?: ProjectionLike;\r\n    lockFeatureParams?: {\r\n        // 5 (minutes) by default\r\n        expiry?: number | string;\r\n\r\n        // 'Geoserver' by default\r\n        lockId?: string;\r\n\r\n        // 'SOME' by default\r\n        releaseAction?: string;\r\n    };\r\n}\r\n\r\nexport enum GeoserverProperty {\r\n    CAPABILITIES = 'capabilities',\r\n    URL = 'url',\r\n    HEADERS = 'headers',\r\n    CREDENTIALS = 'credentials',\r\n    ADVANCED = 'advanced',\r\n    HASTRASNACTION = 'hasTransaction',\r\n    HASLOCKFEATURE = 'hasLockFeature',\r\n    HASDESCRIBEFEATURETYPE = 'hasDescribeFeatureType',\r\n    USELOCKFEATURE = 'useLockFeature',\r\n    ISLOADED = 'isLoaded'\r\n}\r\n\r\nexport type GeoserverEventTypes =\r\n    | `change:${GeoserverProperty.CAPABILITIES}`\r\n    | `change:${GeoserverProperty.URL}`\r\n    | `change:${GeoserverProperty.HEADERS}`\r\n    | `change:${GeoserverProperty.CREDENTIALS}`\r\n    | `change:${GeoserverProperty.ADVANCED}`\r\n    | `change:${GeoserverProperty.HASTRASNACTION}`\r\n    | `change:${GeoserverProperty.HASLOCKFEATURE}`\r\n    | `change:${GeoserverProperty.HASDESCRIBEFEATURETYPE}`\r\n    | `change:${GeoserverProperty.USELOCKFEATURE}`\r\n    | `change:${GeoserverProperty.ISLOADED}`;\r\n","var img = \"data:image/svg+xml,%3csvg version='1.1' xmlns='http://www.w3.org/2000/svg' width='448' height='448' viewBox='0 0 448 448'%3e %3cpath d='M222 296l29-29-38-38-29 29v14h24v24h14zM332 116c-2.25-2.25-6-2-8.25 0.25l-87.5 87.5c-2.25 2.25-2.5 6-0.25 8.25s6 2 8.25-0.25l87.5-87.5c2.25-2.25 2.5-6 0.25-8.25zM352 264.5v47.5c0 39.75-32.25 72-72 72h-208c-39.75 0-72-32.25-72-72v-208c0-39.75 32.25-72 72-72h208c10 0 20 2 29.25 6.25 2.25 1 4 3.25 4.5 5.75 0.5 2.75-0.25 5.25-2.25 7.25l-12.25 12.25c-2.25 2.25-5.25 3-8 2-3.75-1-7.5-1.5-11.25-1.5h-208c-22 0-40 18-40 40v208c0 22 18 40 40 40h208c22 0 40-18 40-40v-31.5c0-2 0.75-4 2.25-5.5l16-16c2.5-2.5 5.75-3 8.75-1.75s5 4 5 7.25zM328 80l72 72-168 168h-72v-72zM439 113l-23 23-72-72 23-23c9.25-9.25 24.75-9.25 34 0l38 38c9.25 9.25 9.25 24.75 0 34z'%3e%3c/path%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg version='1.1' xmlns='http://www.w3.org/2000/svg' width='541' height='512' viewBox='0 0 541 512'%3e %3cpath fill='black' d='M103.306 228.483l129.493-125.249c-17.662-4.272-31.226-18.148-34.98-35.663l-0.055-0.307-129.852 125.248c17.812 4.15 31.53 18.061 35.339 35.662l0.056 0.308z'%3e%3c/path%3e %3cpath fill='black' d='M459.052 393.010c-13.486-8.329-22.346-23.018-22.373-39.779v-0.004c-0.053-0.817-0.082-1.772-0.082-2.733s0.030-1.916 0.089-2.863l-0.007 0.13-149.852 71.94c9.598 8.565 15.611 20.969 15.611 34.779 0 0.014 0 0.029 0 0.043v-0.002c-0.048 5.164-0.94 10.104-2.544 14.711l0.098-0.322z'%3e%3c/path%3e %3cpath fill='black' d='M290.207 57.553c-0.009 15.55-7.606 29.324-19.289 37.819l-0.135 0.093 118.054 46.69c-0.216-1.608-0.346-3.48-0.36-5.379v-0.017c0.033-16.948 9.077-31.778 22.596-39.953l0.209-0.118-122.298-48.056c0.659 2.633 1.098 5.693 1.221 8.834l0.002 0.087z'%3e%3c/path%3e %3cpath fill='black' d='M241.36 410.132l-138.629-160.067c-4.734 17.421-18.861 30.61-36.472 33.911l-0.29 0.045 143.881 166.255c1.668-18.735 14.197-34.162 31.183-40.044l0.327-0.099z'%3e%3c/path%3e %3cpath fill='black' d='M243.446 115.105c-31.785 0-57.553-25.767-57.553-57.553s25.767-57.553 57.553-57.553c31.785 0 57.552 25.767 57.552 57.553v0c0 31.786-25.767 57.553-57.553 57.553v0zM243.446 21.582c-19.866 0-35.97 16.105-35.97 35.97s16.105 35.97 35.97 35.97c19.866 0 35.97-16.105 35.97-35.97v0c0-19.866-16.104-35.97-35.97-35.97v0z'%3e%3c/path%3e %3cpath fill='black' d='M483.224 410.78c-31.786 0-57.553-25.767-57.553-57.553s25.767-57.553 57.553-57.553c31.786 0 57.552 25.767 57.552 57.553v0c0 31.786-25.767 57.553-57.553 57.553v0zM483.224 317.257c-19.866 0-35.97 16.104-35.97 35.97s16.105 35.97 35.97 35.97c19.866 0 35.97-16.105 35.97-35.97v0c0-19.866-16.105-35.97-35.97-35.97v0z'%3e%3c/path%3e %3cpath fill='black' d='M57.553 295.531c-31.785 0-57.553-25.767-57.553-57.553s25.767-57.553 57.553-57.553c31.785 0 57.553 25.767 57.553 57.553v0c0 31.786-25.767 57.553-57.553 57.553v0zM57.553 202.008c-19.866 0-35.97 16.105-35.97 35.97s16.105 35.97 35.97 35.97c19.866 0 35.97-16.105 35.97-35.97v0c-0.041-19.835-16.13-35.898-35.97-35.898 0 0 0 0 0 0v0z'%3e%3c/path%3e %3cpath fill='black' d='M256.036 512.072c-31.786 0-57.553-25.767-57.553-57.553s25.767-57.553 57.553-57.553c31.786 0 57.553 25.767 57.553 57.553v0c0 31.786-25.767 57.553-57.553 57.553v0zM256.036 418.55c-19.866 0-35.97 16.104-35.97 35.97s16.105 35.97 35.97 35.97c19.866 0 35.97-16.105 35.97-35.97v0c0-19.866-16.105-35.97-35.97-35.97v0z'%3e%3c/path%3e %3cpath fill='black' d='M435.24 194.239c-31.786 0-57.553-25.767-57.553-57.553s25.767-57.553 57.553-57.553c31.786 0 57.553 25.767 57.553 57.553v0c0 31.785-25.767 57.553-57.553 57.553v0zM435.24 100.716c-19.866 0-35.97 16.105-35.97 35.97s16.105 35.97 35.97 35.97c19.866 0 35.97-16.105 35.97-35.97v0c0-19.866-16.105-35.97-35.97-35.97v0z'%3e%3c/path%3e%3c/svg%3e\";\n  export default img;","import { getCenter } from 'ol/extent';\r\nimport { Geometry } from 'ol/geom';\r\nimport { Feature, Overlay } from 'ol';\r\nimport { Coordinate } from 'ol/coordinate';\r\n\r\n// Images\r\nimport editFieldsSvg from '../assets/images/editFields.svg';\r\nimport editGeomSvg from '../assets/images/editGeom.svg';\r\nimport { I18N } from './i18n';\r\n\r\nimport myPragma from '../myPragma';\r\n\r\nexport default class EditOverlay extends Overlay {\r\n    constructor(feature: Feature<Geometry>, coordinate: Coordinate = null) {\r\n        super({\r\n            id: feature.getId(),\r\n            position:\r\n                coordinate || getCenter(feature.getGeometry().getExtent()),\r\n            positioning: 'center-center',\r\n            offset: [0, -40],\r\n            stopEvent: true,\r\n            element: (\r\n                <div>\r\n                    <div\r\n                        className=\"ol-wfst--edit-button-cnt\"\r\n                        onclick={() => {\r\n                            this.dispatchEvent('editFields');\r\n                        }}\r\n                    >\r\n                        <button\r\n                            className=\"ol-wfst--edit-button\"\r\n                            type=\"button\"\r\n                            title={I18N.labels.editFields}\r\n                        >\r\n                            <img\r\n                                src={editFieldsSvg}\r\n                                alt={I18N.labels.editFields}\r\n                            />\r\n                        </button>\r\n                    </div>\r\n                    <div\r\n                        className=\"ol-wfst--edit-button-cnt\"\r\n                        onclick={() => {\r\n                            this.dispatchEvent('editGeom');\r\n                        }}\r\n                    >\r\n                        <button\r\n                            class=\"ol-wfst--edit-button\"\r\n                            type=\"button\"\r\n                            title={I18N.labels.editGeom}\r\n                        >\r\n                            <img src={editGeomSvg} alt={I18N.labels.editGeom} />\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            )\r\n        });\r\n    }\r\n}\r\n","// Ol\r\nimport Geometry from 'ol/geom/Geometry';\r\nimport CircleStyle from 'ol/style/Circle';\r\nimport Fill from 'ol/style/Fill';\r\nimport Stroke from 'ol/style/Stroke';\r\nimport Style from 'ol/style/Style';\r\nimport Control from 'ol/control/Control';\r\nimport Draw from 'ol/interaction/Draw';\r\nimport Modify from 'ol/interaction/Modify';\r\nimport Select from 'ol/interaction/Select';\r\nimport Snap from 'ol/interaction/Snap';\r\nimport { MapBrowserEvent } from 'ol';\r\nimport { EventsKey } from 'ol/events';\r\nimport Collection from 'ol/Collection';\r\nimport Feature from 'ol/Feature';\r\nimport Overlay from 'ol/Overlay';\r\nimport View from 'ol/View';\r\nimport VectorSource from 'ol/source/Vector';\r\nimport Map from 'ol/Map';\r\nimport BaseEvent from 'ol/events/Event';\r\nimport { LoadingStrategy } from 'ol/source/Vector';\r\nimport { FeatureLike } from 'ol/Feature';\r\nimport { Options as VectorLayerOptions } from 'ol/layer/BaseVector';\r\nimport { never, primaryAction } from 'ol/events/condition';\r\nimport { unByKey } from 'ol/Observable';\r\nimport { Coordinate } from 'ol/coordinate';\r\nimport { CombinedOnSignature, EventTypes, OnSignature } from 'ol/Observable';\r\nimport { ObjectEvent } from 'ol/Object';\r\nimport { Types as ObjectEventTypes } from 'ol/ObjectEventType';\r\n\r\nimport { initModal, showError } from './modules/errors';\r\nimport { initLoading, showLoading } from './modules/loading';\r\nimport WfsLayer from './WfsLayer';\r\nimport WmsLayer from './WmsLayer';\r\nimport LayersControl, {\r\n    activateDrawButton,\r\n    activateModeButtons,\r\n    resetStateButtons\r\n} from './modules/LayersControl';\r\nimport Uploads from './modules/Uploads';\r\nimport {\r\n    addFeatureToEditedList,\r\n    getStoredMapLayers,\r\n    isFeatureEdited,\r\n    removeFeatureFromEditList,\r\n    setActiveLayerToInsertEls,\r\n    getActiveLayerToInsertEls,\r\n    activateMode,\r\n    getMode,\r\n    Modes,\r\n    setMap,\r\n    setMapLayers,\r\n    getStoredLayer\r\n} from './modules/state';\r\nimport { deepObjectAssign } from './modules/helpers';\r\nimport { getEditLayer } from './modules/editLayer';\r\nimport { GeometryType, TransactionType } from './@enums';\r\nimport {\r\n    I18n,\r\n    IGeoserverDescribeFeatureType,\r\n    WfsGeoserverVendor,\r\n    WmsGeoserverVendor\r\n} from './@types';\r\nimport * as i18n from './modules/i18n/index';\r\nimport { getDefaultOptions } from './defaults';\r\nimport EditControlChangesEl from './modules/EditControlChanges';\r\nimport styleFunction from './modules/styleFunction';\r\nimport { EditFieldsModal } from './modules/EditFieldsModal';\r\nimport Geoserver from './Geoserver';\r\nimport EditOverlay from './modules/EditOverlay';\r\nimport { BaseLayerProperty } from './modules/base/BaseLayer';\r\n\r\n// External\r\nimport Modal from 'modal-vanilla';\r\n\r\n// Style\r\nimport './assets/scss/-ol-wfst.bootstrap5.scss';\r\nimport './assets/scss/ol-wfst.scss';\r\n\r\nconst controlElement = document.createElement('div');\r\n\r\n/**\r\n * Tiny WFST-T client to insert (drawing/uploading), modify and delete\r\n * features on GeoServers using OpenLayers. Layers with these types\r\n * of geometries are supported: \"GeometryCollection\" (in this case, you can\r\n * choose the geometry type of each element to draw), \"Point\", \"MultiPoint\",\r\n * \"LineString\", \"MultiLineString\", \"Polygon\" and \"MultiPolygon\".\r\n *\r\n * @constructor\r\n * @fires modifystart\r\n * @fires modifyend\r\n * @fires drawstart\r\n * @fires drawend\r\n * @fires load\r\n * @fires describeFeatureType\r\n * @extends {ol/control/Control~Control}\r\n * @param options Wfst options, see [Wfst Options](#options) for more details.\r\n */\r\nexport default class Wfst extends Control {\r\n    protected _options: Options;\r\n    protected _i18n: I18n;\r\n\r\n    // Ol\r\n    protected _map: Map;\r\n    protected _view: View;\r\n    protected _viewport: HTMLElement;\r\n    protected _initialized = false;\r\n    protected _layersControl: LayersControl;\r\n    protected _overlay: Overlay;\r\n\r\n    // Interactions\r\n    protected _interactionWfsSelect: Select;\r\n    protected _interactionSelectModify: Select;\r\n    protected _collectionModify: Collection<any>;\r\n    protected _interactionModify: Modify;\r\n    protected _interactionSnap: Snap;\r\n    protected _interactionDraw: Draw;\r\n\r\n    // Obserbable keys\r\n    protected _keyClickWms: EventsKey | EventsKey[];\r\n    protected _keyRemove: EventsKey;\r\n    protected _keySelect: EventsKey;\r\n\r\n    // Controls\r\n    protected _controlApplyDiscardChanges: EditControlChangesEl;\r\n    protected _controlWidgetToolsDiv: HTMLElement;\r\n    protected _selectDraw: HTMLSelectElement;\r\n\r\n    // State\r\n    protected _currentZoom: number;\r\n    protected _lastZoom: number;\r\n\r\n    // Editing\r\n    protected _editFeature: Feature<Geometry>;\r\n    protected _editFeatureOriginal: Feature<Geometry>;\r\n\r\n    protected _uploads: Uploads;\r\n    protected _editFields: EditFieldsModal;\r\n\r\n    declare on: OnSignature<EventTypes, BaseEvent, EventsKey> &\r\n        OnSignature<WfstEventTypes, WfstEvent, EventsKey> &\r\n        OnSignature<ObjectEventTypes, ObjectEvent, EventsKey> &\r\n        CombinedOnSignature<\r\n            WfstEventTypes | ObjectEventTypes | EventTypes,\r\n            EventsKey\r\n        >;\r\n\r\n    declare once: OnSignature<EventTypes, BaseEvent, EventsKey> &\r\n        OnSignature<WfstEventTypes, WfstEvent, EventsKey> &\r\n        OnSignature<ObjectEventTypes, ObjectEvent, EventsKey> &\r\n        CombinedOnSignature<\r\n            WfstEventTypes | ObjectEventTypes | EventTypes,\r\n            EventsKey\r\n        >;\r\n\r\n    declare un: OnSignature<EventTypes, BaseEvent, void> &\r\n        OnSignature<WfstEventTypes, WfstEvent, EventsKey> &\r\n        OnSignature<ObjectEventTypes, ObjectEvent, void> &\r\n        CombinedOnSignature<\r\n            WfstEventTypes | ObjectEventTypes | EventTypes,\r\n            void\r\n        >;\r\n\r\n    constructor(options?: Options) {\r\n        super({\r\n            target: null,\r\n            element: controlElement,\r\n            render: () => {\r\n                if (!this._map) this._init();\r\n            }\r\n        });\r\n\r\n        i18n.setLang(options.language, options.i18n);\r\n\r\n        const defaultOptions = getDefaultOptions();\r\n\r\n        this._options = deepObjectAssign(defaultOptions, options);\r\n\r\n        // By default, the first layer is ready to accept new draws\r\n        setActiveLayerToInsertEls(this._options.layers[0]);\r\n\r\n        this._controlWidgetToolsDiv = controlElement;\r\n        this._controlWidgetToolsDiv.className = 'ol-wfst--tools-control';\r\n\r\n        this._uploads = new Uploads(this._options);\r\n\r\n        this._editFields = new EditFieldsModal(this._options.modal);\r\n    }\r\n\r\n    /**\r\n     * Get all the layers in the ol-wfst instance\r\n     * @public\r\n     */\r\n    getLayers(): Array<WfsLayer | WmsLayer> {\r\n        return Object.values(getStoredMapLayers());\r\n    }\r\n\r\n    /**\r\n     * Get a layer\r\n     * @public\r\n     */\r\n    getLayerByName(layerName = ''): WfsLayer | WmsLayer {\r\n        const layers = getStoredMapLayers();\r\n        if (layerName && layerName in layers) {\r\n            return layers[layerName];\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Connect to the GeoServer and retrieve metadata about the service (GetCapabilities).\r\n     * Get each layer specs (DescribeFeatureType) and create the layers and map controls.\r\n     * @fires describeFeatureType\r\n     * @private\r\n     */\r\n    async _initMapAndLayers(): Promise<void> {\r\n        try {\r\n            const layers = this._options.layers;\r\n\r\n            if (layers.length) {\r\n                let layerRendered = 0;\r\n                let layersNumber = 0; // Only count visibles\r\n\r\n                layers.forEach((layer) => {\r\n                    if (layer.getVisible()) layersNumber++;\r\n\r\n                    layer.on('layerRendered', () => {\r\n                        layerRendered++;\r\n                        if (layerRendered >= layersNumber) {\r\n                            // run only once\r\n                            if (!this._initialized) {\r\n                                this.dispatchEvent('load');\r\n                                this._initialized = true;\r\n                            }\r\n                            showLoading(false);\r\n                        }\r\n                    });\r\n\r\n                    layer.on('change:describeFeatureType', () => {\r\n                        const domEl = this._layersControl.addLayerEl(layer);\r\n\r\n                        layer.on('change:isVisible', () => {\r\n                            const layerNotVisible =\r\n                                'ol-wfst--layer-not-visible';\r\n\r\n                            const visible = layer.isVisibleByZoom();\r\n                            if (visible)\r\n                                domEl.classList.remove(layerNotVisible);\r\n                            else domEl.classList.add(layerNotVisible);\r\n                        });\r\n\r\n                        layer.set(\r\n                            BaseLayerProperty.ISVISIBLE,\r\n                            this._currentZoom > layer.getMinZoom()\r\n                        );\r\n\r\n                        this.dispatchEvent(\r\n                            new WfstEvent({\r\n                                type: 'describeFeatureType',\r\n                                layer: layer,\r\n                                data: layer.getDescribeFeatureType()\r\n                            })\r\n                        );\r\n                    });\r\n\r\n                    layer._init();\r\n\r\n                    this._map.addLayer(layer);\r\n\r\n                    setMapLayers({\r\n                        [layer.get(BaseLayerProperty.NAME)]: layer\r\n                    });\r\n                });\r\n\r\n                this._createMapElements(\r\n                    this._options.showControl,\r\n                    this._options.active\r\n                );\r\n            }\r\n        } catch (err) {\r\n            showLoading(false);\r\n            showError(err.message, err);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    _init(): void {\r\n        this._map = super.getMap();\r\n        this._view = this._map.getView();\r\n        this._viewport = this._map.getViewport();\r\n\r\n        setMap(this._map);\r\n\r\n        //@ts-expect-error\r\n        this._uploads.on('addedFeatures', ({ features }) => {\r\n            const layer = getActiveLayerToInsertEls();\r\n            layer.insertFeatures(features);\r\n        });\r\n\r\n        //@ts-expect-error\r\n        this._uploads.on('loadedFeatures', ({ features }) => {\r\n            this.activateEditMode();\r\n            const editLayerSource = getEditLayer().getSource();\r\n\r\n            editLayerSource.addFeatures(features);\r\n\r\n            this._view.fit(editLayerSource.getExtent(), {\r\n                size: this._map.getSize(),\r\n                maxZoom: 21,\r\n                padding: [100, 100, 100, 100]\r\n            });\r\n        });\r\n\r\n        // @ts-expect-error\r\n        this._editFields.on('save', ({ feature }) => {\r\n            // Force deselect to trigger handler\r\n            this._collectionModify.remove(feature);\r\n        });\r\n\r\n        // @ts-expect-error\r\n        this._editFields.dispose('delete', ({ feature }) => {\r\n            this._deleteFeature(feature, true);\r\n        });\r\n\r\n        this._addMapEvents();\r\n\r\n        initModal(this._options['modal']);\r\n\r\n        this._controlWidgetToolsDiv.append(initLoading());\r\n\r\n        this._initMapAndLayers();\r\n    }\r\n\r\n    /**\r\n     * Create the edit layer to allow modify elements, add interactions,\r\n     * map controls and keyboard handlers.\r\n     *\r\n     * @param showControl\r\n     * @param active\r\n     * @private\r\n     */\r\n    async _createMapElements(\r\n        showControl: boolean,\r\n        active: boolean\r\n    ): Promise<void> {\r\n        // VectorLayer to store features on editing and inserting\r\n        this._prepareEditLayer();\r\n\r\n        this._addInteractions();\r\n        this._addInteractionHandlers();\r\n\r\n        if (showControl) {\r\n            this._addMapControl();\r\n        }\r\n\r\n        // By default, init in edit mode\r\n        this.activateEditMode(active);\r\n    }\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    _addInteractions(): void {\r\n        /**\r\n         * Select the wfs feature already downloaded\r\n         * @private\r\n         */\r\n        const prepareWfsInteraction = () => {\r\n            this._collectionModify = new Collection();\r\n\r\n            // Interaction to select wfs layer elements\r\n            this._interactionWfsSelect = new Select({\r\n                hitTolerance: 10,\r\n                style: (feature: Feature<Geometry>) => styleFunction(feature),\r\n                toggleCondition: never, // Prevent add features to the current selection using shift\r\n                filter: (feature, layer) => {\r\n                    return (\r\n                        getMode() !== Modes.Edit &&\r\n                        layer &&\r\n                        layer instanceof WfsLayer &&\r\n                        layer === getActiveLayerToInsertEls()\r\n                    );\r\n                }\r\n            });\r\n\r\n            this._map.addInteraction(this._interactionWfsSelect);\r\n\r\n            this._interactionWfsSelect.on(\r\n                'select',\r\n                ({ selected, deselected, mapBrowserEvent }) => {\r\n                    const coordinate = mapBrowserEvent.coordinate;\r\n\r\n                    if (selected.length) {\r\n                        selected.forEach((feature) => {\r\n                            if (!isFeatureEdited(feature)) {\r\n                                // Remove the feature from the original layer\r\n                                const layer =\r\n                                    this._interactionWfsSelect.getLayer(\r\n                                        feature\r\n                                    );\r\n                                layer.getSource().removeFeature(feature);\r\n                                this._addFeatureToEditMode(\r\n                                    feature,\r\n                                    coordinate,\r\n                                    layer.get(BaseLayerProperty.NAME)\r\n                                );\r\n                            }\r\n                        });\r\n                    }\r\n\r\n                    if (deselected.length) {\r\n                        if (getMode() !== Modes.Edit) {\r\n                            deselected.forEach((feature) => {\r\n                                // Trigger deselect\r\n                                // This is necessary for those times where two features overlap.\r\n                                this._collectionModify.remove(feature);\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n            );\r\n        };\r\n\r\n        /**\r\n         * Call the geoserver to get the clicked feature\r\n         * @private\r\n         */\r\n        const prepareWmsInteraction = (): void => {\r\n            // Interaction to allow select features in the edit layer\r\n            this._interactionSelectModify = new Select({\r\n                style: (feature: Feature<Geometry>) => styleFunction(feature),\r\n                layers: [getEditLayer()],\r\n                toggleCondition: never, // Prevent add features to the current selection using shift\r\n                removeCondition: () => (getMode() === Modes.Edit ? true : false) // Prevent deselect on clicking outside the feature\r\n            });\r\n\r\n            this._map.addInteraction(this._interactionSelectModify);\r\n\r\n            this._collectionModify =\r\n                this._interactionSelectModify.getFeatures();\r\n\r\n            this._keyClickWms = this._map.on(\r\n                this._options.evtType,\r\n                async (evt: MapBrowserEvent<MouseEvent>) => {\r\n                    if (this._map.hasFeatureAtPixel(evt.pixel)) {\r\n                        return;\r\n                    }\r\n\r\n                    // Only get other features if editmode is disabled\r\n                    if (getMode() !== Modes.Edit) {\r\n                        const layer = getActiveLayerToInsertEls();\r\n\r\n                        // If layer is hidden or is a wfs, skip\r\n                        if (\r\n                            !layer.getVisible() ||\r\n                            !layer.isVisibleByZoom() ||\r\n                            layer instanceof WfsLayer\r\n                        ) {\r\n                            return;\r\n                        }\r\n\r\n                        const features = await layer._getFeaturesByClickEvent(\r\n                            evt\r\n                        );\r\n\r\n                        if (!features.length) {\r\n                            return;\r\n                        }\r\n\r\n                        // For now, support is only for one feature at time\r\n                        this._addFeatureToEditMode(\r\n                            features[0],\r\n                            evt.coordinate,\r\n                            layer.get(BaseLayerProperty.NAME)\r\n                        );\r\n                    }\r\n                }\r\n            );\r\n        };\r\n\r\n        if (this._options.layers.find((layer) => layer instanceof WfsLayer)) {\r\n            prepareWfsInteraction();\r\n        }\r\n\r\n        if (this._options.layers.find((layer) => layer instanceof WmsLayer)) {\r\n            prepareWmsInteraction();\r\n        }\r\n\r\n        this._interactionModify = new Modify({\r\n            style: () => {\r\n                if (getMode() === Modes.Edit) {\r\n                    return new Style({\r\n                        image: new CircleStyle({\r\n                            radius: 6,\r\n                            fill: new Fill({\r\n                                color: '#ff0000'\r\n                            }),\r\n                            stroke: new Stroke({\r\n                                width: 2,\r\n                                color: 'rgba(5, 5, 5, 0.9)'\r\n                            })\r\n                        })\r\n                    });\r\n                } else {\r\n                    return;\r\n                }\r\n            },\r\n            features: this._collectionModify,\r\n            condition: (evt) => {\r\n                return primaryAction(evt) && getMode() === Modes.Edit;\r\n            }\r\n        });\r\n\r\n        this._map.addInteraction(this._interactionModify);\r\n\r\n        this._interactionSnap = new Snap({\r\n            source: getEditLayer().getSource()\r\n        });\r\n        this._map.addInteraction(this._interactionSnap);\r\n    }\r\n\r\n    /**\r\n     * Layer to store temporary the elements to be edited\r\n     * @private\r\n     */\r\n    _prepareEditLayer(): void {\r\n        this._map.addLayer(getEditLayer());\r\n    }\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    _addMapEvents(): void {\r\n        /**\r\n         * @private\r\n         */\r\n        const keyboardEvents = (): void => {\r\n            document.addEventListener('keydown', ({ key }) => {\r\n                const inputFocus = document.querySelector('input:focus');\r\n                if (inputFocus) {\r\n                    return;\r\n                }\r\n                if (key === 'Delete') {\r\n                    const selectedFeatures = this._collectionModify;\r\n                    if (selectedFeatures) {\r\n                        selectedFeatures.forEach((feature) => {\r\n                            this._deleteFeature(feature, true);\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n        };\r\n\r\n        keyboardEvents();\r\n\r\n        this._map.on('moveend', (): void => {\r\n            this._currentZoom = this._view.getZoom();\r\n\r\n            if (this._currentZoom !== this._lastZoom) {\r\n                const layers = getStoredMapLayers();\r\n\r\n                Object.keys(layers).forEach((key) => {\r\n                    const layer = layers[key];\r\n                    if (this._currentZoom > layer.getMinZoom()) {\r\n                        // Show the layers\r\n                        if (!layer.get(BaseLayerProperty.ISVISIBLE)) {\r\n                            layer.set(BaseLayerProperty.ISVISIBLE, true);\r\n                        }\r\n                    } else {\r\n                        // Hide the layer\r\n                        if (layer.get(BaseLayerProperty.ISVISIBLE)) {\r\n                            layer.set(BaseLayerProperty.ISVISIBLE, false);\r\n                        }\r\n                    }\r\n                });\r\n\r\n                this._lastZoom = this._currentZoom;\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Add map handlers\r\n     * @private\r\n     */\r\n    _addInteractionHandlers(): void {\r\n        // When a feature is modified, add this to a list.\r\n        // This prevent events fired on select and deselect features that has no changes and should\r\n        // not be updated in the geoserver\r\n        this._interactionModify.on('modifyend', (evt) => {\r\n            const feature = evt.features.item(0);\r\n            addFeatureToEditedList(feature);\r\n            super.dispatchEvent(evt);\r\n        });\r\n\r\n        this._interactionModify.on('modifystart', (evt) => {\r\n            super.dispatchEvent(evt);\r\n        });\r\n\r\n        this._onDeselectFeatureEvent();\r\n        this._onRemoveFeatureEvent();\r\n    }\r\n\r\n    /**\r\n     * Add the widget on the map to allow change the tools and select active layers\r\n     * @private\r\n     */\r\n    _addMapControl(): void {\r\n        this._layersControl = new LayersControl(\r\n            this._options.showUpload ? this._uploads : null,\r\n            this._options.uploadFormats\r\n        );\r\n\r\n        // @ts-expect-error\r\n        this._layersControl.on('drawMode', () => {\r\n            if (getMode() === Modes.Draw) {\r\n                resetStateButtons();\r\n                this.activateEditMode();\r\n            } else {\r\n                const activeLayer = getActiveLayerToInsertEls();\r\n\r\n                if (!activeLayer.isVisibleByZoom()) {\r\n                    showError(i18n.I18N.errors.layerNotVisible);\r\n                } else {\r\n                    this.activateDrawMode(getActiveLayerToInsertEls());\r\n                }\r\n            }\r\n        });\r\n\r\n        // @ts-expect-error\r\n        this._layersControl.on('changeGeom', () => {\r\n            if (getMode() === Modes.Draw) {\r\n                this.activateDrawMode(getActiveLayerToInsertEls());\r\n            }\r\n        });\r\n\r\n        const controlEl = this._layersControl.render();\r\n\r\n        this._selectDraw = controlEl.querySelector(\r\n            '.wfst--tools-control--select-draw'\r\n        );\r\n\r\n        this._controlWidgetToolsDiv.append(controlEl);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param feature\r\n     * @private\r\n     */\r\n    _deselectEditFeature(feature: FeatureLike): void {\r\n        this._removeOverlayHelper(feature);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param feature\r\n     * @param layerName\r\n     * @private\r\n     */\r\n    _restoreFeatureToLayer(\r\n        feature: Feature<Geometry>,\r\n        layerName?: string\r\n    ): void {\r\n        layerName = layerName || feature.get('_layerName_');\r\n        const layer = getStoredMapLayers()[layerName];\r\n        (layer.getSource() as VectorSource<Geometry>).addFeature(feature);\r\n    }\r\n\r\n    /**\r\n     * @param feature\r\n     * @private\r\n     */\r\n    _removeFeatureFromTmpLayer(feature: Feature<Geometry>): void {\r\n        // Remove element from the Layer\r\n        getEditLayer().getSource().removeFeature(feature);\r\n    }\r\n\r\n    /**\r\n     * Trigger on deselecting a feature from in the Edit layer\r\n     *\r\n     * @private\r\n     */\r\n    _onDeselectFeatureEvent(): void {\r\n        const checkIfFeatureIsChanged = (feature: Feature<Geometry>): void => {\r\n            const layerName = feature.get('_layerName_');\r\n\r\n            const layer = this._options.layers.find(\r\n                (layer) => layer.get(BaseLayerProperty.NAME) === layerName\r\n            );\r\n\r\n            if (layer instanceof WfsLayer) {\r\n                this._interactionWfsSelect.getFeatures().remove(feature);\r\n            }\r\n\r\n            if (isFeatureEdited(feature)) {\r\n                layer.transactFeatures(TransactionType.Update, feature);\r\n            } else {\r\n                // Si es wfs y el elemento no tuvo cambios, lo devolvemos a la layer original\r\n                if (layer instanceof WfsLayer) {\r\n                    this._restoreFeatureToLayer(feature, layerName);\r\n                }\r\n                this._removeFeatureFromTmpLayer(feature);\r\n            }\r\n        };\r\n\r\n        // This is fired when a feature is deselected and fires the transaction process\r\n        this._keySelect = this._collectionModify.on('remove', (evt) => {\r\n            const feature = evt.element;\r\n\r\n            this._deselectEditFeature(feature);\r\n\r\n            checkIfFeatureIsChanged(feature);\r\n\r\n            this._editModeOff();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Trigger on removing a feature from the Edit layer\r\n     *\r\n     * @private\r\n     */\r\n    _onRemoveFeatureEvent(): void {\r\n        // If a feature is removed from the edit layer\r\n        this._keyRemove = getEditLayer()\r\n            .getSource()\r\n            .on('removefeature', (evt) => {\r\n                const feature = evt.feature;\r\n\r\n                if (!feature.get('_delete_')) {\r\n                    return;\r\n                }\r\n\r\n                if (this._keySelect) {\r\n                    unByKey(this._keySelect);\r\n                }\r\n\r\n                const layerName = feature.get('_layerName_');\r\n\r\n                const ll = this.getLayerByName(layerName);\r\n\r\n                ll.transactFeatures(TransactionType.Delete, feature);\r\n\r\n                this._deselectEditFeature(feature);\r\n                this._editModeOff();\r\n\r\n                if (this._keySelect) {\r\n                    setTimeout(() => {\r\n                        this._onDeselectFeatureEvent();\r\n                    }, 150);\r\n                }\r\n            });\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param feature\r\n     * @private\r\n     */\r\n    _editModeOn(feature: Feature<Geometry>): void {\r\n        this._editFeatureOriginal = feature.clone();\r\n\r\n        activateMode(Modes.Edit);\r\n\r\n        // To refresh the style\r\n        getEditLayer().getSource().changed();\r\n\r\n        this._removeOverlayHelper(feature);\r\n\r\n        this._controlApplyDiscardChanges = new EditControlChangesEl(feature);\r\n\r\n        this._controlApplyDiscardChanges.on('cancel', ({ feature }) => {\r\n            feature.setGeometry(this._editFeatureOriginal.getGeometry());\r\n            removeFeatureFromEditList(feature);\r\n            this._collectionModify.remove(feature);\r\n        });\r\n\r\n        this._controlApplyDiscardChanges.on('apply', ({ feature }) => {\r\n            showLoading();\r\n            this._collectionModify.remove(feature);\r\n        });\r\n\r\n        this._controlApplyDiscardChanges.on('delete', ({ feature }) => {\r\n            this._deleteFeature(feature, true);\r\n        });\r\n\r\n        this._map.addControl(this._controlApplyDiscardChanges);\r\n    }\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    _editModeOff(): void {\r\n        activateMode(null);\r\n        this._map.removeControl(this._controlApplyDiscardChanges);\r\n    }\r\n\r\n    /**\r\n     * Remove a feature from the edit Layer and from the Geoserver\r\n     *\r\n     * @param feature\r\n     * @private\r\n     */\r\n    _deleteFeature(feature: Feature<Geometry>, confirm: boolean): void {\r\n        const deleteEl = () => {\r\n            const features = Array.isArray(feature) ? feature : [feature];\r\n            features.forEach((feature) => {\r\n                feature.set('_delete_', true, true);\r\n                getEditLayer().getSource().removeFeature(feature);\r\n            });\r\n            this._collectionModify.clear();\r\n\r\n            const layerName = feature.get('_layerName_');\r\n            const layer = this._options.layers.find(\r\n                (layer) => layer.get(BaseLayerProperty.NAME) === layerName\r\n            );\r\n\r\n            if (layer instanceof WfsLayer) {\r\n                this._interactionWfsSelect.getFeatures().remove(feature);\r\n            }\r\n        };\r\n\r\n        if (confirm) {\r\n            const confirmModal = Modal.confirm(i18n.I18N.labels.confirmDelete, {\r\n                ...this._options.modal\r\n            });\r\n\r\n            confirmModal.show().once('dismiss', function (modal, ev, button) {\r\n                if (button && button.value) {\r\n                    deleteEl();\r\n                }\r\n            });\r\n        } else {\r\n            deleteEl();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Add a feature to the Edit Layer to allow editing, and creates an Overlay Helper to show options\r\n     *\r\n     * @param feature\r\n     * @param coordinate\r\n     * @param layerName\r\n     * @private\r\n     */\r\n    _addFeatureToEditMode(\r\n        feature: Feature<Geometry>,\r\n        coordinate: Coordinate = null,\r\n        layerName = null\r\n    ): void {\r\n        // For now, only allow one element at time\r\n        // @TODO: allow edit multiples elements\r\n        if (this._collectionModify.getLength()) return;\r\n\r\n        if (layerName) {\r\n            // Store the layer information inside the feature\r\n            feature.set('_layerName_', layerName);\r\n        }\r\n\r\n        const props = feature ? feature.getProperties() : '';\r\n\r\n        if (props) {\r\n            if (feature.getGeometry()) {\r\n                getEditLayer().getSource().addFeature(feature);\r\n                this._collectionModify.push(feature);\r\n\r\n                const overlay = new EditOverlay(feature, coordinate);\r\n\r\n                // @ts-expect-error\r\n                overlay.on('editFields', () => {\r\n                    this._editFields.show(feature);\r\n                });\r\n\r\n                // @ts-expect-error\r\n                overlay.on('editGeom', () => {\r\n                    this._editModeOn(feature);\r\n                });\r\n\r\n                this._map.addOverlay(overlay);\r\n\r\n                const layer = getStoredLayer(layerName);\r\n                if (layer) {\r\n                    layer.maybeLockFeature(feature.getId());\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Activate/deactivate the draw mode\r\n     *\r\n     * @param layer\r\n     * @public\r\n     */\r\n    activateDrawMode(layer: WfsLayer | WmsLayer | false): void {\r\n        /**\r\n         *\r\n         * @param layer\r\n         * @private\r\n         */\r\n        const addDrawInteraction = (layer: WfsLayer | WmsLayer): void => {\r\n            this.activateEditMode(false);\r\n\r\n            // If already exists, remove\r\n            if (this._interactionDraw) {\r\n                this._map.removeInteraction(this._interactionDraw);\r\n            }\r\n\r\n            const geomDrawType = this._selectDraw.value;\r\n\r\n            this._interactionDraw = new Draw({\r\n                source: getEditLayer().getSource(),\r\n                type: geomDrawType as GeometryType,\r\n                style: (feature: Feature<Geometry>) => styleFunction(feature),\r\n                stopClick: true // To prevent firing a map/wms click\r\n            });\r\n\r\n            this._map.addInteraction(this._interactionDraw);\r\n\r\n            this._interactionDraw.on('drawstart', (evt) => {\r\n                super.dispatchEvent(evt);\r\n            });\r\n\r\n            this._interactionDraw.on('drawend', (evt) => {\r\n                const feature: Feature<Geometry> = evt.feature;\r\n                layer.transactFeatures(TransactionType.Insert, feature);\r\n                super.dispatchEvent(evt);\r\n            });\r\n        };\r\n\r\n        if (!this._interactionDraw && !layer) {\r\n            return;\r\n        }\r\n\r\n        if (layer) {\r\n            // If layer is set to invisible, show warning\r\n            if (!layer.getVisible()) {\r\n                return;\r\n            }\r\n\r\n            activateDrawButton();\r\n\r\n            this._viewport.classList.add('draw-mode');\r\n\r\n            addDrawInteraction(layer);\r\n        } else {\r\n            this._map.removeInteraction(this._interactionDraw);\r\n            this._viewport.classList.remove('draw-mode');\r\n        }\r\n\r\n        activateMode(layer ? Modes.Draw : null);\r\n    }\r\n\r\n    /**\r\n     * Activate/desactivate the edit mode\r\n     *\r\n     * @param bool\r\n     * @public\r\n     */\r\n    activateEditMode(bool = true): void {\r\n        if (bool) {\r\n            activateModeButtons();\r\n            this.activateDrawMode(false);\r\n        } else {\r\n            // Deselct features\r\n            this._collectionModify.clear();\r\n        }\r\n\r\n        if (this._interactionSelectModify) {\r\n            this._interactionSelectModify.setActive(bool);\r\n        }\r\n\r\n        this._interactionModify.setActive(bool);\r\n\r\n        if (this._interactionWfsSelect)\r\n            this._interactionWfsSelect.setActive(bool);\r\n    }\r\n\r\n    /**\r\n     * Remove the overlay helper atttached to a specify feature\r\n     * @param feature\r\n     * @private\r\n     */\r\n    _removeOverlayHelper(feature: FeatureLike): void {\r\n        const featureId = feature.getId();\r\n\r\n        if (!featureId) {\r\n            return;\r\n        }\r\n\r\n        const overlay = this._map.getOverlayById(featureId);\r\n\r\n        if (!overlay) {\r\n            return;\r\n        }\r\n\r\n        this._map.removeOverlay(overlay);\r\n    }\r\n}\r\n\r\n/**\r\n * **_[interface]_** - Wfst Options specified when creating a Wfst instance\r\n *\r\n * Default values:\r\n * ```javascript\r\n * {\r\n *  layers: null,\r\n *  evtType: 'singleclick',\r\n *  active: true,\r\n *  showControl: true,\r\n *  language: 'en',\r\n *  i18n: {...}, // according to language selection\r\n *  uploadFormats: '.geojson,.json,.kml',\r\n *  processUpload: null,\r\n * }\r\n * ```\r\n */\r\ninterface Options {\r\n    /**\r\n     * Layers to be loaded from the geoserver\r\n     */\r\n    layers?: Array<WfsLayer | WmsLayer>;\r\n\r\n    /**\r\n     * Init active\r\n     */\r\n    active?: boolean;\r\n\r\n    /**\r\n     * The click event to allow selection of Features to be edited\r\n     */\r\n    evtType?: 'singleclick' | 'dblclick';\r\n\r\n    /**\r\n     * Show/hide the control map\r\n     */\r\n    showControl?: boolean;\r\n\r\n    /**\r\n     * Modal configuration\r\n     */\r\n    modal?: {\r\n        animateClass?: string;\r\n        animateInClass?: string;\r\n        transition?: number;\r\n        backdropTransition?: number;\r\n        templates?: {\r\n            dialog?: string | HTMLElement;\r\n            headerClose?: string | HTMLElement;\r\n        };\r\n    };\r\n\r\n    /**\r\n     * Language to be used\r\n     */\r\n    language?: 'es' | 'en' | 'zh';\r\n\r\n    /**\r\n     * Custom translations\r\n     */\r\n    i18n?: I18n;\r\n\r\n    /**\r\n     * Show/hide the upload button\r\n     */\r\n    showUpload?: boolean;\r\n\r\n    /**\r\n     * Accepted extension formats on upload\r\n     * Example: \".json,.geojson\"\r\n     */\r\n    uploadFormats?: string;\r\n\r\n    /**\r\n     * Triggered to allow implement custom functions or to parse other formats than default\r\n     * by filtering the extension. If this doesn't return features, the default function\r\n     * will be used to extract them.\r\n     */\r\n    processUpload?(file: File): Array<Feature<Geometry>>;\r\n}\r\n\r\n/**\r\n * **_[interface]_** - Parameters to create the layers and connect to the GeoServer\r\n *\r\n * You can use all the parameters supported by OpenLayers\r\n *\r\n *  Default values:\r\n * ```javascript\r\n * {\r\n *  name: null,\r\n *  geoserver: null,\r\n *  label: null, // `name` if not provided\r\n *  strategy: all,\r\n *  geoserverVendor: null\r\n * }\r\n * ```\r\n */\r\ninterface LayerOptions extends Omit<VectorLayerOptions<any>, 'source'> {\r\n    /**\r\n     * Layer name in the GeoServer\r\n     */\r\n    name: string;\r\n\r\n    /**\r\n     * Geoserver Object\r\n     */\r\n    geoserver: Geoserver;\r\n\r\n    /**\r\n     * Label to be displayed in the widget control\r\n     */\r\n    label?: string;\r\n\r\n    /**\r\n     * Available geoserver options\r\n     */\r\n    geoserverVendor?: WfsGeoserverVendor | WmsGeoserverVendor;\r\n\r\n    /**\r\n     * Strategy function for loading features.\r\n     * Only for WFS\r\n     * By default `all` strategy is used\r\n     */\r\n    strategy?: LoadingStrategy;\r\n\r\n    /**\r\n     * Triggered before inserting new features to the Geoserver.\r\n     * Use this to insert custom properties, modify the feature, etc.\r\n     */\r\n    beforeTransactFeature?(\r\n        feature: Feature<Geometry>,\r\n        transaction: TransactionType\r\n    ): Feature<Geometry>;\r\n}\r\nclass WfstEvent extends BaseEvent {\r\n    public data: IGeoserverDescribeFeatureType;\r\n    public layer: WfsLayer | WmsLayer;\r\n\r\n    constructor(options: {\r\n        type: WfstEventTypes;\r\n        layer: WfsLayer | WmsLayer;\r\n        data: IGeoserverDescribeFeatureType;\r\n    }) {\r\n        super(options.type);\r\n        this.layer = options.layer;\r\n        this.data = options.data;\r\n    }\r\n}\r\n\r\ntype WfstEventTypes = 'describeFeatureType';\r\n\r\nexport {\r\n    Options,\r\n    WfstEventTypes,\r\n    WfstEvent,\r\n    I18n,\r\n    LayerOptions,\r\n    Geoserver,\r\n    WmsLayer,\r\n    WfsLayer\r\n};\r\n","import Wfst from './ol-wfst';\r\nimport WfsLayer from './WfsLayer';\r\nimport WmsLayer from './WmsLayer';\r\nimport Geoserver from './Geoserver';\r\n\r\nconst utils = {\r\n    WfsLayer,\r\n    WmsLayer,\r\n    Geoserver\r\n};\r\n\r\nObject.assign(Wfst, utils);\r\nexport default Wfst;\r\n"],"names":["bbox","transformExtent","Disposable","Event","EventTarget","Observable","BaseObject","img","myPragma","visibilityOn","visibilityOff","uploadSvg","drawSvg","WFS","GeoJSON","KML","VectorSourceEvent","geom","MultiPoint","MultiLineString","MultiPolygon","Control","GeometryCollection","Polygon","Style","CircleStyle","Fill","Stroke","fromCircle","Overlay","getCenter","editFieldsSvg","editGeomSvg","i18n.setLang","never","primaryAction","i18n.I18N","unByKey","BaseEvent","utils","WfsLayer","WmsLayer","Geoserver","Object","assign","Wfst"],"mappings":"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A;EACA;EACO,SAAS,UAAU,CAAC,IAAI,EAAE;EACjC,EAAE,OAAO,IAAI,IAAI,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC;EAC5E,CAAC;AACD;EACA;EACA;EACA;EACO,SAAS,cAAc,CAAC,IAAI,EAAE;EACrC,EAAE,OAAO,IAAI,CAAC,SAAS,EAAE;EACzB,IAAI,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;EACrC,GAAG;EACH;;ECzGA;EACA;EACA;AAoBA;EACA;EACA;EACA;EACA;EACA;EACA;EACO,MAAM,gBAAgB,GAAG,eAAe;;EC7B/C;EACA;EACA;AACA;EACA;EACA;EACA;AACA,qBAAe;EACf;EACA;EACA;EACA;EACA;EACA,EAAE,UAAU,EAAE,YAAY;AAC1B;EACA;EACA;EACA;EACA;EACA;EACA,EAAE,SAAS,EAAE,WAAW;AACxB;EACA;EACA;EACA;EACA;EACA;EACA,EAAE,OAAO,EAAE,SAAS;AACpB;EACA;EACA;EACA;EACA;EACA;EACA,EAAE,SAAS,EAAE,WAAW;AACxB;EACA;EACA;EACA;EACA;EACA;EACA,EAAE,OAAO,EAAE,SAAS;EACpB,CAAC,CAAC;AACF;EACA;EACA;EACA;;EC9CA;EACA;EACA;AAOA;EACA;EACA;EACA;EACA;EACA;EACA;AACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;AACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;AACA;EACA;EACA;EACA;EACA;EACA;EACA;AACA;EACA;EACA;EACA;EACA;EACA,MAAM,QAAQ,GAAG;EACjB,EAAE,OAAO,EAAE,SAAS;EACpB,EAAE,GAAG,EAAE,KAAK;EACZ,EAAE,MAAM,EAAE,QAAQ;EAClB,EAAE,QAAQ,EAAE,UAAU;EACtB,EAA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","x_google_ignoreList":[0,7,13,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]}